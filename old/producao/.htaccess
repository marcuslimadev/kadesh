# Configuracao Apache para Raiz do Site
DirectoryIndex index.html
RewriteEngine On
RewriteBase /

# API Routes - versao simplificada maxima
RewriteRule ^api/(.*)$ api/index.php [QSA,L]

# Assets estaticos - deixar passar
RewriteRule ^assets/ - [L]

# Arquivos que existem - deixar passar
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [L]

# Diret√≥rios que existem - deixar passar  
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [L]

# Tudo mais vai para index.html (SPA)
RewriteRule ^.*$ index.html [QSA,L]

# Headers de seguranca
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# Cache para assets estaticos
<IfModule mod_expires.c>
    ExpiresActive On
    <FilesMatch "\.(css|js|png|jpg|jpeg|gif|svg|ico|woff|woff2|ttf|eot)$">
        ExpiresDefault "access plus 1 month"
    </FilesMatch>
</IfModule>

# Configuracao PHP
<IfModule mod_php.c>
    php_flag display_errors Off
    php_value error_reporting "E_ERROR | E_PARSE"
</IfModule>

# Proteger arquivos sensiveis
<FilesMatch "\.(sql|md)$">
    Require all denied
</FilesMatch>

<Files "config">
    Require all denied
</Files>