import{r as e,o as t,a,e as s,h as r,i as d,g as o,B as l,C as n,K as m,q as i,j as u,F as x,k as c,u as p,b as g,m as y,t as f,n as b}from"./vue-n9kv2shB.js";import{a as v}from"./index-DGep6SCq.js";import"./utils-CeLII1lI.js";const h={class:"min-h-screen bg-gray-100"},w={class:"bg-white shadow-lg border-b border-gray-200"},k={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},_={class:"flex justify-between h-16"},C={class:"flex items-center"},P={class:"hidden md:ml-10 md:flex md:space-x-4"},S={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},j={class:"bg-white rounded-xl shadow-md p-6 mb-6"},B={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},I={class:"bg-white rounded-xl shadow-md overflow-hidden"},R={key:0,class:"text-center py-12"},A={key:1,class:"overflow-x-auto"},D={class:"min-w-full divide-y divide-gray-200"},F={class:"bg-white divide-y divide-gray-200"},T={class:"px-6 py-4 text-sm text-gray-600"},U={class:"px-6 py-4 text-sm text-gray-600"},L={class:"px-6 py-4 text-sm text-gray-600"},V={class:"px-6 py-4 text-sm text-gray-600"},K={class:"px-6 py-4 text-sm text-gray-600"},N={class:"px-6 py-4"},q={class:"px-6 py-4 text-sm text-gray-600"},z={key:0,class:"text-center py-12 text-gray-500"},E={__name:"AdminPayments",setup(E){const G=p(),$=e(!0),H=e([]),J=e({search:"",status:""}),M=()=>{const e=localStorage.getItem("adminToken")||localStorage.getItem("kadesh_token");return e?{Authorization:`Bearer ${e}`}:{}},O=async()=>{try{$.value=!0;const e={search:J.value.search,status:J.value.status},t=await v.get("/api/admin/payments",{params:e,headers:M()});t.data.success&&(H.value=t.data.data)}catch(e){console.error("Error fetching payments:",e)}finally{$.value=!1}},Q=()=>{J.value={search:"",status:""},O()},W=e=>e||0===e?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e):"A combinar",X=e=>({pending:"Pendente",completed:"Concluido",failed:"Falhou",refunded:"Reembolsado"}[e]||e||"-"),Y=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),G.push("/admin/login")};return t(()=>{O()}),(e,t)=>{const p=o("router-link");return g(),a("div",h,[s("nav",w,[s("div",k,[s("div",_,[s("div",C,[t[9]||(t[9]=s("h1",{class:"text-2xl font-bold text-amber-600"},"Kaddesh Admin",-1)),s("div",P,[r(p,{to:"/admin/dashboard",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"},{default:d(()=>[...t[2]||(t[2]=[y("Dashboard",-1)])]),_:1}),r(p,{to:"/admin/users",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"},{default:d(()=>[...t[3]||(t[3]=[y("Usuários",-1)])]),_:1}),r(p,{to:"/admin/projects",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"},{default:d(()=>[...t[4]||(t[4]=[y("Projetos",-1)])]),_:1}),r(p,{to:"/admin/payments",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-900 bg-gray-100"},{default:d(()=>[...t[5]||(t[5]=[y("Pagamentos",-1)])]),_:1}),r(p,{to:"/admin/disputes",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"},{default:d(()=>[...t[6]||(t[6]=[y("Disputas",-1)])]),_:1}),r(p,{to:"/admin/advertisements",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"},{default:d(()=>[...t[7]||(t[7]=[y("Anúncios",-1)])]),_:1}),r(p,{to:"/admin/settings",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"},{default:d(()=>[...t[8]||(t[8]=[y("Configurações",-1)])]),_:1})])]),s("div",{class:"flex items-center"},[s("button",{onClick:Y,class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium"},"Sair")])])])]),s("div",S,[t[15]||(t[15]=s("h2",{class:"text-3xl font-bold text-gray-900 mb-6"},"Gerenciar Pagamentos",-1)),s("div",j,[s("div",B,[s("div",null,[t[10]||(t[10]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Buscar",-1)),l(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>J.value.search=e),onInput:O,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Pagador, recebedor ou contrato..."},null,544),[[n,J.value.search]])]),s("div",null,[t[12]||(t[12]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),l(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>J.value.status=e),onChange:O,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},[...t[11]||(t[11]=[i('<option value="">Todos</option><option value="pending">Pendente</option><option value="completed">Concluido</option><option value="failed">Falhou</option><option value="refunded">Reembolsado</option>',5)])],544),[[m,J.value.status]])]),s("div",{class:"flex items-end"},[s("button",{onClick:Q,class:"w-full px-4 py-2 border border-gray-300 rounded-md text-sm font-medium"}," Limpar filtros ")])])]),s("div",I,[$.value?(g(),a("div",R,[...t[13]||(t[13]=[s("div",{class:"inline-block animate-spin rounded-full h-10 w-10 border-b-2 border-amber-600"},null,-1),s("p",{class:"mt-4 text-gray-600"},"Carregando pagamentos...",-1)])])):(g(),a("div",A,[s("table",D,[t[14]||(t[14]=s("thead",{class:"bg-gray-50"},[s("tr",null,[s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Contrato"),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Pagador"),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Recebedor"),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Valor"),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Taxa"),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Criado em")])],-1)),s("tbody",F,[(g(!0),a(x,null,c(H.value,e=>{return g(),a("tr",{key:e.id},[s("td",T,f(e.contract_id||"-"),1),s("td",U,f(e.payer_name||e.payer_email||"-"),1),s("td",L,f(e.receiver_name||e.receiver_email||"-"),1),s("td",V,f(W(e.amount)),1),s("td",K,f(W(e.platform_fee)),1),s("td",N,[s("span",{class:b(["px-2 py-1 text-xs font-semibold rounded-full",(r=e.status,{pending:"bg-amber-100 text-amber-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",refunded:"bg-blue-100 text-blue-800"}[r]||"bg-gray-100 text-gray-800")])},f(X(e.status)),3)]),s("td",q,f((t=e.created_at,t?new Date(t).toLocaleDateString("pt-BR"):"-")),1)]);var t,r}),128))])]),0===H.value.length?(g(),a("div",z," Nenhum pagamento encontrado ")):u("",!0)]))])])])}}};export{E as default};
