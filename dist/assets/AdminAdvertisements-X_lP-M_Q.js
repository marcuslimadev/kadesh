import{r as e,c as a,o as l,a as t,e as s,j as i,p as o,t as n,C as r,D as u,J as d,F as c,l as v,k as p,M as m,u as k,b as h,n as _}from"./vue-DDtQ7Z_H.js";import{a as f}from"./utils-CeLII1lI.js";import{_ as g}from"./index-GrC-7x6E.js";const w={class:"admin-container"},b={key:0,class:"alert-error"},y={class:"flex"},x={class:"ml-3 text-sm text-red-700"},C={key:1,class:"alert-success"},A={class:"flex"},L={class:"ml-3 text-sm text-green-700"},M={class:"stats-grid"},B={class:"stat-card"},z={class:"stat-value"},j={class:"stat-card"},U={class:"stat-value text-green-400"},V={class:"stat-card"},E={class:"stat-value"},I={class:"stat-card"},S={class:"stat-value"},D={class:"filters-bar"},T={key:2,class:"loading-state"},q={key:3,class:"empty-state"},$={key:4,class:"ads-grid"},H={class:"ad-header"},F={class:"ad-position-badge"},N={key:0,class:"ad-preview"},P=["src","alt"],R={class:"ad-content"},G={class:"ad-title"},J={class:"ad-description"},Q={key:0,class:"ad-link"},K=["href"],O={class:"ad-stats"},W={class:"ad-stat"},X={class:"ad-stat"},Y={key:0,class:"ad-stat"},Z={class:"ctr-badge"},ee={key:1,class:"ad-dates"},ae={key:0,class:"ad-date"},le={key:1,class:"ad-date"},te={class:"ad-actions"},se=["onClick"],ie=["onClick","title"],oe={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ne={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},re=["onClick"],ue={class:"modal-content"},de={class:"modal-header"},ce={class:"modal-title"},ve={class:"form-group"},pe={class:"form-group"},me={class:"form-row"},ke={class:"form-group"},he={class:"form-group"},_e={class:"form-row"},fe={class:"form-group"},ge={class:"form-group"},we={class:"form-row"},be={class:"form-group"},ye={class:"form-group"},xe={class:"form-group"},Ce={class:"checkbox-label"},Ae={key:0,class:"ad-preview-box"},Le={class:"ad-card-preview"},Me={class:"ad-eyebrow-preview"},Be={class:"ad-title-preview"},ze={class:"ad-sub-preview"},je={class:"modal-actions"},Ue=["disabled"],Ve=g({__name:"AdminAdvertisements",setup(g){k();const Ve=e([]),Ee=e(!0),Ie=e(!1),Se=e(null),De=e(!1),Te=e(null),qe=e(null),$e=e(""),He=e("all"),Fe=e("all"),Ne=e({title:"",description:"",link_url:"",image_url:"",position:"left",slot:1,is_active:!0,start_date:"",end_date:""}),Pe=a(()=>Ve.value.filter(e=>e.is_active).length),Re=a(()=>Ve.value.reduce((e,a)=>e+(a.impression_count||0),0)),Ge=a(()=>Ve.value.reduce((e,a)=>e+(a.click_count||0),0)),Je=a(()=>Ve.value.filter(e=>{const a=e.title.toLowerCase().includes($e.value.toLowerCase())||e.description.toLowerCase().includes($e.value.toLowerCase()),l="all"===He.value||"active"===He.value&&e.is_active||"inactive"===He.value&&!e.is_active,t="all"===Fe.value||e.position===Fe.value;return a&&l&&t}));async function Qe(){try{Ee.value=!0,Te.value=null;const e=localStorage.getItem("admin_token"),a=await f.get("/api/advertisements/admin",{headers:{Authorization:`Bearer ${e}`}});Ve.value=a.data}catch(e){console.error("Erro ao carregar anúncios:",e),Te.value="Não foi possível carregar os anúncios. Tente novamente."}finally{Ee.value=!1}}function Ke(){Se.value=null,Ne.value={title:"",description:"",link_url:"",image_url:"",position:"left",slot:1,is_active:!0,start_date:"",end_date:""},Ie.value=!0}function Oe(){Ie.value=!1,Se.value=null}async function We(){var e,a;try{De.value=!0,Te.value=null,qe.value=null;const e=localStorage.getItem("admin_token"),a={...Ne.value,link_url:Ne.value.link_url||null,image_url:Ne.value.image_url||null,start_date:Ne.value.start_date||null,end_date:Ne.value.end_date||null};Se.value?(await f.put(`/api/advertisements/admin/${Se.value.id}`,a,{headers:{Authorization:`Bearer ${e}`}}),qe.value="Anúncio atualizado com sucesso!"):(await f.post("/api/advertisements/admin",a,{headers:{Authorization:`Bearer ${e}`}}),qe.value="Anúncio criado com sucesso!"),await Qe(),Oe()}catch(l){console.error("Erro ao salvar anúncio:",l),Te.value="Erro ao salvar anúncio: "+((null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.error)||l.message)}finally{De.value=!1}}function Xe(e){return new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}return l(()=>{Qe()}),(e,a)=>(h(),t("div",w,[s("div",{class:"admin-header"},[a[15]||(a[15]=s("h1",{class:"admin-title"},"Gerenciar Anúncios",-1)),s("button",{class:"btn-primary",onClick:Ke},[...a[14]||(a[14]=[s("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),o(" Novo Anúncio ",-1)])])]),Te.value?(h(),t("div",b,[s("div",y,[a[17]||(a[17]=s("svg",{class:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),s("p",x,n(Te.value),1),s("button",{onClick:a[0]||(a[0]=e=>Te.value=null),class:"ml-auto text-red-400 hover:text-red-600"},[...a[16]||(a[16]=[s("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])])):i("",!0),qe.value?(h(),t("div",C,[s("div",A,[a[19]||(a[19]=s("svg",{class:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),s("p",L,n(qe.value),1),s("button",{onClick:a[1]||(a[1]=e=>qe.value=null),class:"ml-auto text-green-400 hover:text-green-600"},[...a[18]||(a[18]=[s("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])])):i("",!0),s("div",M,[s("div",B,[a[20]||(a[20]=s("div",{class:"stat-label"},"Total de Anúncios",-1)),s("div",z,n(Ve.value.length),1)]),s("div",j,[a[21]||(a[21]=s("div",{class:"stat-label"},"Ativos",-1)),s("div",U,n(Pe.value),1)]),s("div",V,[a[22]||(a[22]=s("div",{class:"stat-label"},"Impressões Totais",-1)),s("div",E,n(Re.value),1)]),s("div",I,[a[23]||(a[23]=s("div",{class:"stat-label"},"Cliques Totais",-1)),s("div",S,n(Ge.value),1)])]),s("div",D,[r(s("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>$e.value=e),type:"text",placeholder:"Buscar anúncios...",class:"filter-input"},null,512),[[u,$e.value]]),r(s("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>He.value=e),class:"filter-select"},[...a[24]||(a[24]=[s("option",{value:"all"},"Todos os Status",-1),s("option",{value:"active"},"Apenas Ativos",-1),s("option",{value:"inactive"},"Apenas Inativos",-1)])],512),[[d,He.value]]),r(s("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>Fe.value=e),class:"filter-select"},[...a[25]||(a[25]=[s("option",{value:"all"},"Todas as Posições",-1),s("option",{value:"left"},"Esquerda",-1),s("option",{value:"right"},"Direita",-1)])],512),[[d,Fe.value]])]),Ee.value?(h(),t("div",T,[...a[26]||(a[26]=[s("div",{class:"spinner"},null,-1),s("p",null,"Carregando anúncios...",-1)])])):0===Je.value.length?(h(),t("div",q,[a[27]||(a[27]=s("svg",{class:"empty-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),a[28]||(a[28]=s("p",null,"Nenhum anúncio encontrado",-1)),s("button",{class:"btn-secondary",onClick:Ke},"Criar primeiro anúncio")])):(h(),t("div",$,[(h(!0),t(c,null,v(Je.value,e=>(h(),t("div",{key:e.id,class:"ad-item"},[s("div",H,[s("div",{class:_(["ad-status-badge",{active:e.is_active}])},n(e.is_active?"Ativo":"Inativo"),3),s("div",F,n("left"===e.position?"Esquerda":"Direita")+" - Slot "+n(e.slot),1)]),e.image_url?(h(),t("div",N,[s("img",{src:e.image_url,alt:e.title,class:"ad-image"},null,8,P)])):i("",!0),s("div",R,[s("h3",G,n(e.title),1),s("p",J,n(e.description),1),e.link_url?(h(),t("div",Q,[a[29]||(a[29]=s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)),s("a",{href:e.link_url,target:"_blank",rel:"noopener"},n(e.link_url),9,K)])):i("",!0),s("div",O,[s("div",W,[a[30]||(a[30]=s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),o(" "+n(e.impression_count)+" impressões ",1)]),s("div",X,[a[31]||(a[31]=s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})],-1)),o(" "+n(e.click_count)+" cliques ",1)]),e.click_count>0?(h(),t("div",Y,[s("span",Z,"CTR: "+n((e.click_count/e.impression_count*100).toFixed(2))+"%",1)])):i("",!0)]),e.start_date||e.end_date?(h(),t("div",ee,[e.start_date?(h(),t("div",ae," Início: "+n(Xe(e.start_date)),1)):i("",!0),e.end_date?(h(),t("div",le," Fim: "+n(Xe(e.end_date)),1)):i("",!0)])):i("",!0)]),s("div",te,[s("button",{class:"btn-icon",onClick:a=>function(e){Se.value=e,Ne.value={title:e.title,description:e.description,link_url:e.link_url||"",image_url:e.image_url||"",position:e.position,slot:e.slot,is_active:e.is_active,start_date:e.start_date?e.start_date.slice(0,16):"",end_date:e.end_date?e.end_date.slice(0,16):""},Ie.value=!0}(e),title:"Editar"},[...a[32]||(a[32]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,se),s("button",{class:"btn-icon",onClick:a=>async function(e){try{Te.value=null;const a=localStorage.getItem("admin_token");await f.patch(`/api/advertisements/admin/${e}/toggle`,{},{headers:{Authorization:`Bearer ${a}`}}),await Qe(),qe.value="Status alterado!",setTimeout(()=>{qe.value=null},2e3)}catch(a){console.error("Erro ao alternar status:",a),Te.value="Erro ao alternar status do anúncio."}}(e.id),title:e.is_active?"Desativar":"Ativar"},[e.is_active?(h(),t("svg",oe,[...a[33]||(a[33]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"},null,-1)])])):(h(),t("svg",ne,[...a[34]||(a[34]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])]))],8,ie),s("button",{class:"btn-icon btn-danger",onClick:a=>async function(e){if(confirm("Tem certeza que deseja deletar este anúncio?"))try{Te.value=null;const a=localStorage.getItem("admin_token");await f.delete(`/api/advertisements/admin/${e}`,{headers:{Authorization:`Bearer ${a}`}}),await Qe(),qe.value="Anúncio deletado!",setTimeout(()=>{qe.value=null},2e3)}catch(a){console.error("Erro ao deletar anúncio:",a),Te.value="Erro ao deletar anúncio."}}(e.id),title:"Deletar"},[...a[35]||(a[35]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,re)])]))),128))])),Ie.value?(h(),t("div",{key:5,class:"modal-overlay",onClick:p(Oe,["self"])},[s("div",ue,[s("div",de,[s("h2",ce,n(Se.value?"Editar Anúncio":"Novo Anúncio"),1),s("button",{class:"btn-close",onClick:Oe},[...a[36]||(a[36]=[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s("form",{onSubmit:p(We,["prevent"]),class:"modal-form"},[s("div",ve,[a[37]||(a[37]=s("label",null,"Título *",-1)),r(s("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>Ne.value.title=e),type:"text",required:"",class:"form-input"},null,512),[[u,Ne.value.title]])]),s("div",pe,[a[38]||(a[38]=s("label",null,"Descrição *",-1)),r(s("textarea",{"onUpdate:modelValue":a[6]||(a[6]=e=>Ne.value.description=e),required:"",class:"form-textarea"},null,512),[[u,Ne.value.description]])]),s("div",me,[s("div",ke,[a[39]||(a[39]=s("label",null,"Link (URL)",-1)),r(s("input",{"onUpdate:modelValue":a[7]||(a[7]=e=>Ne.value.link_url=e),type:"url",class:"form-input",placeholder:"https://..."},null,512),[[u,Ne.value.link_url]])]),s("div",he,[a[40]||(a[40]=s("label",null,"URL da Imagem",-1)),r(s("input",{"onUpdate:modelValue":a[8]||(a[8]=e=>Ne.value.image_url=e),type:"url",class:"form-input",placeholder:"https://..."},null,512),[[u,Ne.value.image_url]])])]),s("div",_e,[s("div",fe,[a[42]||(a[42]=s("label",null,"Posição *",-1)),r(s("select",{"onUpdate:modelValue":a[9]||(a[9]=e=>Ne.value.position=e),required:"",class:"form-select"},[...a[41]||(a[41]=[s("option",{value:"left"},"Esquerda",-1),s("option",{value:"right"},"Direita",-1)])],512),[[d,Ne.value.position]])]),s("div",ge,[a[43]||(a[43]=s("label",null,"Slot (ordem) *",-1)),r(s("input",{"onUpdate:modelValue":a[10]||(a[10]=e=>Ne.value.slot=e),type:"number",min:"1",max:"10",required:"",class:"form-input"},null,512),[[u,Ne.value.slot,void 0,{number:!0}]])])]),s("div",we,[s("div",be,[a[44]||(a[44]=s("label",null,"Data Início",-1)),r(s("input",{"onUpdate:modelValue":a[11]||(a[11]=e=>Ne.value.start_date=e),type:"datetime-local",class:"form-input"},null,512),[[u,Ne.value.start_date]])]),s("div",ye,[a[45]||(a[45]=s("label",null,"Data Fim",-1)),r(s("input",{"onUpdate:modelValue":a[12]||(a[12]=e=>Ne.value.end_date=e),type:"datetime-local",class:"form-input"},null,512),[[u,Ne.value.end_date]])])]),s("div",xe,[s("label",Ce,[r(s("input",{"onUpdate:modelValue":a[13]||(a[13]=e=>Ne.value.is_active=e),type:"checkbox",class:"form-checkbox"},null,512),[[m,Ne.value.is_active]]),a[46]||(a[46]=s("span",null,"Anúncio ativo",-1))])]),Ne.value.title&&Ne.value.description?(h(),t("div",Ae,[a[48]||(a[48]=s("p",{class:"preview-label"},"Preview:",-1)),s("div",Le,[s("p",Me,n(Ne.value.is_active?"Patrocinado":"Inativo"),1),s("h4",Be,n(Ne.value.title),1),s("p",ze,n(Ne.value.description),1),a[47]||(a[47]=s("button",{class:"ad-cta-preview",type:"button"},"Quero anunciar",-1))])])):i("",!0),s("div",je,[s("button",{type:"button",class:"btn-secondary",onClick:Oe},"Cancelar"),s("button",{type:"submit",class:"btn-primary",disabled:De.value},n(De.value?"Salvando...":"Salvar Anúncio"),9,Ue)])],32)])])):i("",!0)]))}},[["__scopeId","data-v-8d598ac5"]]);export{Ve as default};
