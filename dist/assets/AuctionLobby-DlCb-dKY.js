import{r as e,c as a,o as t,a as l,j as o,b as s,e as r,F as n,l as i,m as d,t as c,i as u,g as p,n as v,s as m,B as b,J as g,h as x,T as f,p as h,C as k,K as y,f as w,q as A,u as C,k as _,D as j}from"./vue-NU_yXd1p.js";import{_ as F,a as D,u as M,b as V}from"./index-FOjKMSjo.js";import{p as $}from"./projectService-B8NrQHtu.js";import{b as P}from"./bidService-BFc9_kYg.js";import"./utils-CeLII1lI.js";const B={class:"flex items-center justify-between text-xs font-medium text-muted sm:col-span-2"},S={class:"ad-title"},z={class:"ad-description"},N=["href","onClick"],E=F({__name:"AdRail",props:{position:{type:String,default:"left"}},setup(m){const b=m,g=e(!1),x=e([]),f=a(()=>"right"===b.position?"right":"left"),h={left:[{id:"mock-left-1",title:"Impulsione seu Projeto",description:"Destaque seu projeto e encontre os melhores profissionais.",link_url:"/ads"},{id:"mock-left-2",title:"Seja um Prestador Premium",description:"Aumente sua visibilidade e ganhe mais propostas.",link_url:"/ads"}],right:[{id:"mock-right-1",title:"Suporte 24/7",description:"Nossa equipe estÃ¡ sempre disponÃ­vel para ajudar.",link_url:"/ads"},{id:"mock-right-2",title:"Pagamentos 100% Seguros",description:"TransaÃ§Ãµes protegidas e fluxo com escrow.",link_url:"/ads"}]};async function k(e){try{if(String(e).startsWith("mock-"))return;await D.post(`/api/advertisements/${e}/click`)}catch(a){console.error("Erro ao registrar clique:",a)}}return t(()=>{!async function(){try{const e=await D.get("/api/advertisements",{params:{position:f.value}}),a=Array.isArray(e.data)?e.data:[];x.value=a.length?a:h[f.value]||[]}catch(e){console.error("Erro ao carregar anÃºncios:",e),x.value=h[f.value]||[]}}()}),(e,a)=>{const t=p("router-link");return!g.value&&x.value.length>0?(s(),l("aside",{key:0,class:v(["grid grid-cols-1 sm:grid-cols-2 gap-4 w-full xl:w-72 xl:flex xl:flex-col xl:gap-6","left"===f.value?"xl:mr-8":"xl:ml-8"])},[r("div",B,[a[2]||(a[2]=r("span",{class:"uppercase tracking-wider"},"Patrocinado",-1)),r("button",{class:"text-muted hover:text-heading transition-colors",onClick:a[0]||(a[0]=e=>g.value=!0),title:"Ocultar anÃºncios"},[...a[1]||(a[1]=[r("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),(s(!0),l(n,null,i(x.value,e=>(s(),l("div",{key:e.id,class:"ad-card card-premium"},[a[6]||(a[6]=r("div",{class:"ad-badge"},[r("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[r("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),r("span",null,"AnÃºncio")],-1)),r("h4",S,c(e.title),1),r("p",z,c(e.description),1),e.link_url&&e.link_url.startsWith("/")?(s(),d(t,{key:0,to:e.link_url,class:"ad-cta btn-gold",onClick:a=>k(e.id)},{default:u(()=>[...a[3]||(a[3]=[r("span",null,"Saiba mais",-1),r("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1)])]),_:1},8,["to","onClick"])):e.link_url?(s(),l("a",{key:1,href:e.link_url,target:"_blank",rel:"noopener",class:"ad-cta btn-gold",onClick:a=>k(e.id)},[...a[4]||(a[4]=[r("span",null,"Saiba mais",-1),r("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1)])],8,N)):(s(),d(t,{key:2,to:"/ads",class:"ad-cta btn-gold",onClick:a=>k(e.id)},{default:u(()=>[...a[5]||(a[5]=[r("span",null,"Saiba mais",-1),r("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1)])]),_:1},8,["onClick"]))]))),128))],2)):o("",!0)}}},[["__scopeId","data-v-b4d64d8e"]]),L={class:"lobby-shell py-6 px-4 sm:px-6 lg:px-8"},H={class:"lobby-grid max-w-7xl mx-auto"},R={class:"lobby-main space-y-6"},I={class:"lobby-hero card"},U={class:"text-center space-y-3"},q={class:"hero-title text-2xl md:text-3xl font-bold"},O={class:"hero-sub text-sm max-w-3xl mx-auto"},T={class:"flex justify-center gap-3 pt-2"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J={class:"text-sm text-muted"},W={class:"text-2xl font-bold text-primary"},Q={class:"card"},K={class:"flex items-center justify-between gap-4 mb-4"},X={key:0,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Y={class:"card filters-card"},Z={class:"flex items-center justify-between mb-4"},ee={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ae=["value"],te={key:0,class:"pending-chip"},le={key:0,class:"card text-center py-12"},oe={key:1,class:"card text-center py-12"},se={key:2,class:"space-y-6"},re={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ne={class:"relative h-48 overflow-hidden rounded-t-2xl bg-gradient-to-br from-[#1A1A1A] to-[#0F1117]"},ie=["src","alt"],de={key:1,class:"w-full h-full flex items-center justify-center"},ce={class:"absolute top-3 left-3"},ue={key:2,class:"absolute top-3 right-3"},pe={class:"absolute bottom-3 left-3"},ve={class:"flex items-center gap-2 px-3 py-1.5 bg-[#D4AF37]/90 backdrop-blur-sm rounded-full text-[#0F1117] font-bold text-sm"},me={class:"p-5 bg-[#161821] border-x border-b border-[rgba(212,175,55,0.24)] rounded-b-2xl"},be={class:"inline-block px-3 py-1 bg-[#D4AF37]/10 text-[#D4AF37] text-xs font-semibold rounded-full mb-3"},ge={class:"text-xs uppercase tracking-wide text-[#C7C7C7] mb-1"},xe={class:"text-[#F5F5F5] font-semibold"},fe={class:"text-[#C7C7C7] text-sm line-clamp-2 mb-4"},he={class:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-4 p-3 bg-[#0F1117] rounded-xl"},ke={class:"text-center"},ye={class:"text-base font-bold text-[#D4AF37]"},we={class:"text-center border-x border-[rgba(212,175,55,0.1)]"},Ae={class:"text-sm font-semibold text-[#F5F5F5]"},Ce={class:"text-center border-x border-[rgba(212,175,55,0.1)] sm:border-x-0 sm:border-l sm:border-[rgba(212,175,55,0.1)]"},_e={class:"text-base font-bold text-[#F5F5F5]"},je={class:"text-center"},Fe={class:"flex items-center justify-between pt-3 border-t border-[rgba(212,175,55,0.1)]"},De={class:"flex items-center gap-2"},Me={class:"w-8 h-8 rounded-full bg-[#D4AF37]/20 flex items-center justify-center"},Ve={class:"text-[#D4AF37] font-bold text-xs"},$e={class:"text-xs font-medium text-[#F5F5F5]"},Pe={class:"text-xs text-[#8A8A8A]"},Be={class:"flex items-center gap-2"},Se=["onClick"],ze={key:3,class:"flex justify-center"},Ne={class:"inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Ee=["disabled"],Le={class:"pagination-current"},He=["disabled"],Re={class:"modal-card"},Ie={class:"space-y-4"},Ue={class:"modal-card"},qe={class:"space-y-4"},Oe={class:"p-4 rounded-xl border border-[rgba(212,175,55,0.2)] bg-[#0F1117]"},Te={class:"text-lg font-semibold text-heading"},Ge={class:"mt-6 flex justify-end gap-2"},Je=["disabled"],We=F({__name:"AuctionLobby",setup(F){const B=M(),S=C(),z=V(),{currentMode:N}=m(z),We=a(()=>"contractor"===N.value),Qe=a(()=>"provider"===N.value),Ke=a(()=>{const e=B.user;return e&&e.name?e.name.split(" ")[0]:"Usuario"}),Xe=a(()=>`ðŸŽ¯ Lobby do ${We.value?"Contratante":"Prestador"} - ${Ke.value}`),Ye=a(()=>We.value?"Gerencie seus leiloes, monitore os lances e acompanhe o vencedor em tempo real.":"Descubra projetos em aberto, acompanhe disputas e envie lances competitivos instantaneamente."),Ze=a(()=>{const e=aa.value.length,a=aa.value.filter(e=>"open"===e.status).length;return aa.value.filter(e=>(e.priority||3)<=2).length,We.value?[{label:"Projetos ativos",value:e,caption:"publicados por voce",text:"text-amber-400"},{label:"Aceitando propostas",value:a,caption:"leiloes abertos agora",text:"text-amber-400"}]:[{label:"Projetos disponiveis",value:a,caption:"aceitando novos lances",text:"text-amber-400"},{label:"Novos hoje",value:aa.value.filter(e=>{const a=new Date(e.created_at);return new Date-a<=864e5}).length,caption:"oportunidades frescas",text:"text-amber-400"}]}),ea=e(!1),aa=e([]),ta=e(1),la=e(20),oa=$.getCategories(),sa=e({category:"",budget:"",deadline:"",status:""}),ra=e(!0),na=e(!1),ia=e({name:"",description:""}),da=e([]),ca=e(!1),ua=e(null),pa=e({amount:null,delivery_time:null,proposal:""}),va=e(!1),ma="kadesh_lobby_filters_contractor",ba="kadesh_lobby_filters_provider",ga=()=>"contractor"===N.value?ma:ba,xa=()=>{if("undefined"!=typeof window)try{const e=localStorage.getItem(ga());if(!e)return;const a=JSON.parse(e);sa.value={category:a.category||"",budget:a.budget||"",deadline:a.deadline||"",status:a.status||""}}catch(e){console.warn("Nao foi possivel restaurar filtros do lobby:",e)}},fa=a(()=>{let e=aa.value;return sa.value.category&&(e=e.filter(e=>e.category===sa.value.category)),sa.value.budget&&(e=e.filter(e=>e.budget<=parseInt(sa.value.budget))),sa.value.status&&(e=e.filter(e=>e.status===sa.value.status)),e}),ha=async()=>{var e;ea.value=!0;try{(()=>{var e,a,t,l,o;if("undefined"==typeof window)return;const s=localStorage.getItem("kadesh_token");s&&"undefined"!==s&&"null"!==s?((null==(t=null==(a=null==(e=D)?void 0:e.defaults)?void 0:a.headers)?void 0:t.common)&&(D.defaults.headers.common.Authorization=`Bearer ${s}`,D.defaults.headers.common.Authorization=`Bearer ${s}`),(null==(o=null==(l=D)?void 0:l.defaults)?void 0:o.headers)&&(D.defaults.headers.Authorization=`Bearer ${s}`),console.log("[Lobby] Header Authorization garantido antes de loadProjects")):console.warn("[Lobby] Nenhum token encontrado para setar header")})();const a=We.value?"/api/projects/my-projects":"/api/projects",t={per_page:la.value,page:ta.value};sa.value.status?t.status=sa.value.status:Qe.value&&(t.status="open"),sa.value.category&&(t.category=sa.value.category),sa.value.budget&&(t.budget_max=sa.value.budget);const l=await D.get(a,{params:t}),o=Array.isArray(l.data)?l.data:(null==(e=l.data)?void 0:e.projects)||[];aa.value=o}catch(a){console.error("Erro ao carregar projetos:",a),aa.value=[]}finally{ea.value=!1}},ka=()=>{ta.value=1,ha()},ya=()=>{sa.value={category:"",budget:"",deadline:"",status:""},ka()},wa=e=>{const a=Number(e||0);return a>=1e6?`R$ ${(a/1e6).toFixed(1)}M`:a>=1e3?`R$ ${(a/1e3).toFixed(1)}k`:`R$ ${a.toFixed(0)}`},Aa=e=>{if(!e)return"N/A";const a=new Date(e),t=new Date-a,l=Math.floor(t/864e5);return 0===l?"Hoje":1===l?"Ontem":l<7?`${l}d atras`:a.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})},Ca=e=>{if(!e)return"Sem prazo";const a=new Date(e);return Number.isNaN(a.getTime())?"Sem prazo":a.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})},_a=e=>{const a=oa.find(a=>a.value===e||a.label===e);return a?a.label:e||"Geral"},ja=e=>{const a=(e=>e&&Array.isArray(e.attachments)?e.attachments:[])(e),t=a.find(e=>{var a;return null==(a=null==e?void 0:e.mime_type)?void 0:a.startsWith("image/")});return(null==t?void 0:t.file_url)||null},Fa=e=>e?e.bid_count??e.bids_count??0:0,Da=e=>{if(!e)return null;const a=e.lowest_bid_amount??e.lowest_bid??null;return"number"==typeof a?a:a?parseFloat(a):null},Ma=e=>{if(!(null==e?void 0:e.deadline))return null;const a=new Date(e.deadline);if(Number.isNaN(a.getTime()))return null;const t=a-new Date;if(t<=0)return{text:"Prazo encerrado",class:"bg-red-100 text-red-700",bgClass:"bg-red-500/90"};const l=Math.floor(t/6e4),o=Math.floor(l/1440),s=Math.floor(l%1440/60),r=l%60;let n="";n=o>0?`${o}d ${s}h`:s>0?`${s}h ${r}m`:`${r}m`;let i="bg-green-100 text-green-700",d="bg-emerald-500/90";return o<=2&&(i="bg-amber-100 text-amber-700",d="bg-amber-500/90"),s<6&&0===o&&(i="bg-orange-100 text-orange-700",d="bg-orange-500/90"),0===s&&0===o&&(i="bg-red-100 text-red-700",d="bg-red-500/90"),{text:n,class:i,bgClass:d}},Va=()=>{na.value=!1,ia.value={name:"",description:""}},$a=()=>{ia.value.name&&(da.value.push({...ia.value,created_at:new Date}),Va())},Pa=()=>{ca.value=!1,ua.value=null},Ba=async()=>{var e,a;if(B.isAuthenticated){if(pa.value.amount&&pa.value.delivery_time&&(null==(e=pa.value.proposal)?void 0:e.trim())&&(null==(a=ua.value)?void 0:a.id)){va.value=!0;try{const e={project_id:ua.value.id,amount:pa.value.amount,delivery_time:pa.value.delivery_time,proposal:pa.value.proposal};(await P.createBid(e)).success&&(await ha(),Pa())}catch(t){console.error("Erro ao enviar lance rapido:",t)}finally{va.value=!1}}}else S.push({name:"login",query:{redirect:"/lobby"}})},Sa=()=>{ha()};return t(()=>{xa(),ha(),"undefined"!=typeof window&&window.addEventListener("kadesh:projects-updated",Sa)}),b(N,()=>{xa(),ta.value=1,ha()}),b(sa,()=>{(()=>{if("undefined"!=typeof window)try{localStorage.setItem(ga(),JSON.stringify(sa.value))}catch(e){console.warn("Nao foi possivel salvar filtros do lobby:",e)}})()},{deep:!0}),g(()=>{"undefined"!=typeof window&&window.removeEventListener("kadesh:projects-updated",Sa)}),(e,a)=>{const t=p("router-link");return s(),l("div",L,[r("div",H,[x(E,{position:"left"}),r("div",R,[r("section",I,[r("div",U,[a[15]||(a[15]=r("p",{class:"hero-eyebrow text-xs uppercase tracking-wider"},"LEILÃƒO PRINCIPAL - SERVICE BRIDGE",-1)),r("h1",q,c(Xe.value),1),r("p",O,c(Ye.value),1),r("div",T,[x(t,{to:"/",class:"cta-outline text-sm px-4 py-2"},{default:u(()=>[...a[14]||(a[14]=[h("Voltar para a Home",-1)])]),_:1}),r("button",{class:"cta-outline text-sm px-4 py-2",onClick:a[0]||(a[0]=e=>ra.value=!ra.value)},c(ra.value?"Esconder acessos":"Mostrar acessos"),1)])])]),r("section",G,[(s(!0),l(n,null,i(Ze.value,e=>(s(),l("div",{key:e.label,class:"stat-card card"},[r("p",J,c(e.label),1),r("p",W,c(e.value),1),r("span",{class:v(["text-xs font-semibold",e.text])},c(e.caption),3)]))),128))]),r("section",Q,[r("div",K,[a[16]||(a[16]=r("div",null,[r("p",{class:"text-sm text-muted"},"Acesso rapido"),r("h2",{class:"text-xl font-semibold"},"Navegue pelo que importa agora")],-1)),r("button",{class:"cta-outline",onClick:a[1]||(a[1]=e=>ra.value=!ra.value)},c(ra.value?"Recolher":"Expandir"),1)]),x(f,{name:"fade"},{default:u(()=>[ra.value?(s(),l("div",X,[x(t,{to:"/dashboard",class:"action-tile"},{default:u(()=>[...a[17]||(a[17]=[r("svg",{class:"w-6 h-6 text-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),r("span",null,"Dashboard",-1)])]),_:1}),We.value?(s(),d(t,{key:0,to:"/projects/create",class:"action-tile primary"},{default:u(()=>[...a[18]||(a[18]=[r("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),r("span",null,"Novo Projeto",-1)])]),_:1})):(s(),d(t,{key:1,to:"/projects",class:"action-tile primary"},{default:u(()=>[...a[19]||(a[19]=[r("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),r("span",null,"Explorar Projetos",-1)])]),_:1})),x(t,{to:"/wallet",class:"action-tile"},{default:u(()=>[...a[20]||(a[20]=[r("svg",{class:"w-6 h-6 text-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})],-1),r("span",null,"Carteira",-1)])]),_:1}),x(t,{to:"/contracts",class:"action-tile"},{default:u(()=>[...a[21]||(a[21]=[r("svg",{class:"w-6 h-6 text-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),r("span",null,"Contratos",-1)])]),_:1})])):o("",!0)]),_:1})]),r("section",Y,[r("div",Z,[a[23]||(a[23]=r("div",null,[r("p",{class:"text-sm text-muted"},"Filtros e curadoria"),r("h2",{class:"text-lg font-semibold"},"Refine o grid do Lobby")],-1)),r("button",{class:"cta-link",onClick:a[2]||(a[2]=e=>na.value=!0)},[...a[22]||(a[22]=[r("span",{class:"text-lg font-bold mr-1"},"+",-1),h(" Nova categoria ",-1)])])]),r("div",ee,[r("div",null,[a[25]||(a[25]=r("label",{class:"filter-label"},"Categoria",-1)),k(r("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>sa.value.category=e),class:"filter-input"},[a[24]||(a[24]=r("option",{value:""},"Todas",-1)),(s(!0),l(n,null,i(w(oa),e=>(s(),l("option",{key:e.value,value:e.value},c(e.label),9,ae))),128))],512),[[y,sa.value.category]])]),r("div",null,[a[27]||(a[27]=r("label",{class:"filter-label"},"Orcamento (Max)",-1)),k(r("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>sa.value.budget=e),class:"filter-input"},[...a[26]||(a[26]=[A('<option value="" data-v-aa72616d>Qualquer</option><option value="500" data-v-aa72616d>Ate R$ 500</option><option value="1000" data-v-aa72616d>Ate R$ 1.000</option><option value="5000" data-v-aa72616d>Ate R$ 5.000</option><option value="10000" data-v-aa72616d>Ate R$ 10.000</option>',5)])],512),[[y,sa.value.budget]])]),r("div",null,[a[29]||(a[29]=r("label",{class:"filter-label"},"Prazo",-1)),k(r("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>sa.value.deadline=e),class:"filter-input"},[...a[28]||(a[28]=[A('<option value="" data-v-aa72616d>Qualquer</option><option value="7" data-v-aa72616d>Ate 7 dias</option><option value="15" data-v-aa72616d>Ate 15 dias</option><option value="30" data-v-aa72616d>Ate 30 dias</option><option value="60" data-v-aa72616d>Ate 60 dias</option>',5)])],512),[[y,sa.value.deadline]])]),r("div",null,[a[31]||(a[31]=r("label",{class:"filter-label"},"Status",-1)),k(r("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>sa.value.status=e),class:"filter-input"},[...a[30]||(a[30]=[r("option",{value:""},"Todos",-1),r("option",{value:"open"},"Aberto (aceita propostas)",-1),r("option",{value:"in_progress"},"Em andamento",-1),r("option",{value:"completed"},"Concluido",-1)])],512),[[y,sa.value.status]])])]),da.value.length?(s(),l("div",te," Ultima sugestao: "+c(da.value[da.value.length-1].name)+" aguardando validacao do ADM. ",1)):o("",!0),r("div",{class:"mt-4 flex justify-end gap-2"},[r("button",{onClick:ya,class:"cta-ghost"}," Limpar filtros "),r("button",{onClick:ka,class:"cta-link"}," Aplicar filtros ")])]),ea.value?(s(),l("div",le,[...a[32]||(a[32]=[r("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gold mx-auto"},null,-1),r("p",{class:"mt-4 text-muted"},"Carregando projetos...",-1)])])):0===fa.value.length?(s(),l("div",oe,[...a[33]||(a[33]=[r("svg",{class:"w-16 h-16 text-muted mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),r("p",{class:"text-muted"},"Nenhum projeto encontrado com os filtros atuais",-1)])])):(s(),l("div",se,[r("div",re,[(s(!0),l(n,null,i(fa.value,e=>{var n,i;return s(),l("div",{key:e.id,class:v(["auction-card-modern group transform transition-all duration-300 hover:scale-105 hover:shadow-2xl",(null==(n=Ma(e))?void 0:n.hours)<=24?"ring-2 ring-[#D4AF37] ring-opacity-50 animate-pulse":""])},[r("div",ne,[ja(e)?(s(),l("img",{key:0,src:ja(e),alt:e.title,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"},null,8,ie)):(s(),l("div",de,[...a[34]||(a[34]=[r("svg",{class:"w-20 h-20 text-[#D4AF37]/30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])])),a[37]||(a[37]=r("div",{class:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"},null,-1)),r("div",ce,[r("span",{class:v(["px-3 py-1.5 rounded-full text-xs font-bold uppercase tracking-wide backdrop-blur-sm","open"===e.status?"bg-emerald-500/90 text-white":"in_progress"===e.status?"bg-amber-500/90 text-white":"bg-gray-500/90 text-white"])},c((i=e.status,{open:"Aberto",in_progress:"Em andamento",completed:"Concluido",cancelled:"Cancelado"}[i]||i)),3)]),Ma(e)?(s(),l("div",ue,[r("div",{class:v(["flex items-center gap-2 px-3 py-1.5 rounded-full backdrop-blur-sm text-white font-bold text-sm",Ma(e).bgClass])},[a[35]||(a[35]=r("svg",{class:"w-4 h-4 animate-pulse",fill:"currentColor",viewBox:"0 0 20 20"},[r("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),h(" "+c(Ma(e).text),1)],2)])):o("",!0),r("div",pe,[r("div",ve,[a[36]||(a[36]=r("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})],-1)),h(" "+c(Fa(e))+" Lance(s) ",1)])])]),r("div",me,[r("span",be,c(_a(e.category)),1),r("p",ge,[a[38]||(a[38]=h(" Contratante: ",-1)),r("span",xe,c(e.client_name||"Contratante"),1)]),x(t,{to:`/projects/${e.id}`,class:"block text-lg font-bold text-[#F5F5F5] hover:text-[#D4AF37] transition-colors line-clamp-2 mb-3 leading-tight"},{default:u(()=>[h(c(e.title),1)]),_:2},1032,["to"]),r("p",fe,c(e.description),1),r("div",he,[r("div",ke,[a[39]||(a[39]=r("p",{class:"text-xs text-[#8A8A8A] uppercase mb-1"},"Orcamento",-1)),r("p",ye,c(wa(e.budget)),1)]),r("div",we,[a[40]||(a[40]=r("p",{class:"text-xs text-[#8A8A8A] uppercase mb-1"},"Prazo",-1)),r("p",Ae,c(Ca(e.deadline)),1)]),r("div",Ce,[a[41]||(a[41]=r("p",{class:"text-xs text-[#8A8A8A] uppercase mb-1"},"Propostas",-1)),r("p",_e,c(Fa(e)),1)]),r("div",je,[a[42]||(a[42]=r("p",{class:"text-xs text-[#8A8A8A] uppercase mb-1"},"Menor",-1)),r("p",{class:v(["text-base font-bold",Da(e)?"text-emerald-400":"text-[#8A8A8A]"])},c(Da(e)?wa(Da(e)):"Ã”Ã‡Ã¶"),3)])]),r("div",Fe,[r("div",De,[r("div",Me,[r("span",Ve,c((e.client_name||"C")[0].toUpperCase()),1)]),r("div",null,[r("p",$e,c(e.client_name||"Contratante"),1),r("p",Pe,c(Aa(e.created_at)),1)])]),r("div",Be,[Qe.value?(s(),l("button",{key:0,type:"button",class:"cta-bid",onClick:a=>(e=>{Qe.value&&(ua.value=e,pa.value={amount:null,delivery_time:null,proposal:""},ca.value=!0)})(e)}," Dar lance ",8,Se)):o("",!0),x(t,{to:`/projects/${e.id}`,class:"cta-view"},{default:u(()=>[h(c(Qe.value?"Detalhes":"Ver"),1)]),_:1},8,["to"])])])])],2)}),128))])])),fa.value.length>0?(s(),l("div",ze,[r("nav",Ne,[r("button",{onClick:a[7]||(a[7]=e=>ta.value--),disabled:1===ta.value,class:"pagination-button rounded-l-md"}," Anterior ",8,Ee),r("span",Le," Pagina "+c(ta.value),1),r("button",{onClick:a[8]||(a[8]=e=>ta.value++),disabled:fa.value.length<la.value,class:"pagination-button rounded-r-md"}," Proxima ",8,He)])])):o("",!0)]),x(E,{position:"right"})]),x(f,{name:"fade"},{default:u(()=>[na.value?(s(),l("div",{key:0,class:"modal-overlay",onClick:_(Va,["self"])},[r("div",Re,[r("div",{class:"flex items-center justify-between mb-4"},[a[43]||(a[43]=r("div",null,[r("p",{class:"text-sm text-muted"},"+ Categoria"),r("h3",{class:"text-xl font-semibold"},"Sugerir nova categoria")],-1)),r("button",{class:"cta-ghost",onClick:Va},"Fechar")]),r("div",Ie,[r("div",null,[a[44]||(a[44]=r("label",{class:"filter-label"},"Nome",-1)),k(r("input",{"onUpdate:modelValue":a[9]||(a[9]=e=>ia.value.name=e),type:"text",class:"filter-input",placeholder:"Ex: IA Generativa"},null,512),[[j,ia.value.name]])]),r("div",null,[a[45]||(a[45]=r("label",{class:"filter-label"},"Descricao",-1)),k(r("textarea",{"onUpdate:modelValue":a[10]||(a[10]=e=>ia.value.description=e),rows:"3",class:"filter-input",placeholder:"Conte rapidamente o que engloba a categoria"},null,512),[[j,ia.value.description]])])]),r("div",{class:"mt-6 flex justify-end gap-2"},[r("button",{class:"cta-ghost",onClick:Va},"Cancelar"),r("button",{class:"cta-link",onClick:$a},"Enviar para validacao")])])])):o("",!0)]),_:1}),x(f,{name:"fade"},{default:u(()=>{var e;return[ca.value?(s(),l("div",{key:0,class:"modal-overlay",onClick:_(Pa,["self"])},[r("div",Ue,[r("div",{class:"flex items-center justify-between mb-4"},[a[46]||(a[46]=r("div",null,[r("p",{class:"text-sm text-muted"},"Enviar proposta"),r("h3",{class:"text-xl font-semibold"},"Lance rapido no leilao")],-1)),r("button",{class:"cta-ghost",onClick:Pa},"Fechar")]),r("div",qe,[r("div",Oe,[a[47]||(a[47]=r("p",{class:"text-sm text-[#8A8A8A] uppercase tracking-wide"},"Projeto",-1)),r("p",Te,c(null==(e=ua.value)?void 0:e.title),1)]),r("div",null,[a[48]||(a[48]=r("label",{class:"filter-label"},"Valor do lance (R$)",-1)),k(r("input",{"onUpdate:modelValue":a[11]||(a[11]=e=>pa.value.amount=e),type:"number",min:"1",class:"filter-input",placeholder:"0,00"},null,512),[[j,pa.value.amount,void 0,{number:!0}]])]),r("div",null,[a[49]||(a[49]=r("label",{class:"filter-label"},"Prazo (dias)",-1)),k(r("input",{"onUpdate:modelValue":a[12]||(a[12]=e=>pa.value.delivery_time=e),type:"number",min:"1",class:"filter-input",placeholder:"7"},null,512),[[j,pa.value.delivery_time,void 0,{number:!0}]])]),r("div",null,[a[50]||(a[50]=r("label",{class:"filter-label"},"Proposta",-1)),k(r("textarea",{"onUpdate:modelValue":a[13]||(a[13]=e=>pa.value.proposal=e),rows:"4",class:"filter-input proposal-highlight",placeholder:"Descreva sua proposta com clareza"},null,512),[[j,pa.value.proposal]])])]),r("div",Ge,[r("button",{class:"cta-ghost",onClick:Pa},"Cancelar"),r("button",{class:"cta-link",disabled:va.value,onClick:Ba},c(va.value?"Enviando...":"Enviar lance"),9,Je)])])])):o("",!0)]}),_:1})])}}},[["__scopeId","data-v-aa72616d"]]);export{We as default};
