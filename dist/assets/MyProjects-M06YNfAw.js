import{r as e,c as t,B as o,o as a,a as s,e as r,j as l,t as n,C as d,J as i,q as u,F as c,l as p,f as g,h as m,i as v,g as b,b as x,p as h}from"./vue-DDtQ7Z_H.js";import{u as f}from"./index-D4KwJ1mG.js";import{_ as y}from"./StatusBadge-DHup6cxz.js";import{_ as w}from"./Pagination-DY4WjV3X.js";import{p as k}from"./projectService-BHpKJd_c.js";import{b as A}from"./utils-CeLII1lI.js";import{l as _}from"./index-Ctu0mvSg.js";const j={class:"min-h-screen bg-page py-8"},D={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},C={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},M={class:"bg-[#161821] rounded-lg shadow-lg p-6 border border-[rgba(212,175,55,0.24)]"},F={class:"flex items-center"},B={class:"text-2xl font-bold text-heading"},V={class:"bg-[#161821] rounded-lg shadow-lg p-6 border border-[rgba(212,175,55,0.24)]"},z={class:"flex items-center"},P={class:"text-2xl font-bold text-heading"},E={class:"bg-[#161821] rounded-lg shadow-lg p-6 border border-[rgba(212,175,55,0.24)]"},T={class:"flex items-center"},H={class:"text-2xl font-bold text-heading"},L={class:"bg-[#161821] rounded-lg shadow-lg p-6 border border-[rgba(212,175,55,0.24)]"},N={class:"flex items-center"},S={class:"text-2xl font-bold text-heading"},O={class:"bg-[#161821] rounded-lg shadow-lg p-6 mb-6 border border-[rgba(212,175,55,0.24)]"},R={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},U=["value"],q={key:0,class:"mt-4"},G={key:0,class:"text-center py-12"},I={key:1,class:"bg-[#161821] rounded-lg shadow-lg p-8 text-center border border-[rgba(212,175,55,0.24)]"},J={class:"mt-2 text-sm text-body"},$={key:2,class:"bg-[#161821] rounded-lg shadow-lg p-12 text-center border border-[rgba(212,175,55,0.24)]"},K={class:"mt-2 text-sm text-body"},Q={class:"mt-6"},W={key:3,class:"space-y-4"},X={class:"p-6"},Y={class:"flex items-start justify-between"},Z={class:"flex-1"},ee={class:"flex items-center gap-3 mb-2"},te={class:"text-xl font-semibold text-heading"},oe={class:"text-body text-sm mb-4 line-clamp-2"},ae={class:"flex items-center gap-6 text-sm text-gray-500 mb-4"},se={class:"flex items-center"},re={class:"flex items-center"},le={class:"flex items-center"},ne={class:"flex items-center"},de={class:"flex items-center justify-end gap-3 mt-4 pt-4 border-t border-gray-200"},ie={key:0,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700"},ue={key:4,class:"mt-8"},ce={__name:"MyProjects",setup(ce){f();const pe=e([]),ge=e(!1),me=e(null),ve=e(1),be=e({status:"",category:"",sortBy:"created_at_desc"}),xe=k.getCategories(),he=t(()=>({total:pe.value.length,open:pe.value.filter(e=>"open"===e.status).length,in_progress:pe.value.filter(e=>"in_progress"===e.status).length,completed:pe.value.filter(e=>"completed"===e.status).length})),fe=t(()=>""!==be.value.status||""!==be.value.category),ye=t(()=>{let e=[...pe.value];be.value.status&&(e=e.filter(e=>e.status===be.value.status)),be.value.category&&(e=e.filter(e=>e.category===be.value.category)),e.sort((e,t)=>{switch(be.value.sortBy){case"created_at_desc":return new Date(t.created_at)-new Date(e.created_at);case"created_at_asc":return new Date(e.created_at)-new Date(t.created_at);case"budget_desc":return(t.budget||0)-(e.budget||0);case"budget_asc":return(e.budget||0)-(t.budget||0);case"bids_desc":return(t.bid_count||0)-(e.bid_count||0);default:return 0}});const t=10*(ve.value-1),o=t+10;return e.slice(t,o)}),we=t(()=>{let e=[...pe.value];return be.value.status&&(e=e.filter(e=>e.status===be.value.status)),be.value.category&&(e=e.filter(e=>e.category===be.value.category)),Math.ceil(e.length/10)}),ke=e=>{if(!e)return"Data não disponível";try{return A(new Date(e),{addSuffix:!0,locale:_})}catch(t){return"Data inválida"}},Ae=e=>{const t=xe.find(t=>t.value===e);return t?t.label:e},_e=()=>{be.value={status:"",category:"",sortBy:"created_at_desc"},ve.value=1},je=async()=>{ge.value=!0,me.value=null;try{const e=await k.getMyProjects();e.success?pe.value=e.data.projects||[]:me.value=e.error}catch(e){console.error("Error loading projects:",e),me.value="Erro ao carregar projetos"}finally{ge.value=!1}};return o(()=>[be.value.status,be.value.category],()=>{ve.value=1}),a(()=>{je()}),(e,t)=>{const o=b("router-link");return x(),s("div",j,[r("div",D,[t[29]||(t[29]=r("div",{class:"mb-8"},[r("h1",{class:"text-3xl font-bold text-heading"},"Meus Projetos"),r("p",{class:"mt-2 text-body"},"Gerencie todos os seus projetos publicados")],-1)),r("div",C,[r("div",M,[r("div",F,[t[5]||(t[5]=r("div",{class:"p-3 rounded-full bg-[rgba(212,175,55,0.15)] text-[#D4AF37] mr-4 border border-[#D4AF37]"},[r("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),r("div",null,[r("p",B,n(he.value.total),1),t[4]||(t[4]=r("p",{class:"text-sm text-body"},"Total",-1))])])]),r("div",V,[r("div",z,[t[7]||(t[7]=r("div",{class:"p-3 rounded-full bg-[rgba(212,175,55,0.15)] text-[#D4AF37] mr-4 border border-[#D4AF37]"},[r("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),r("div",null,[r("p",P,n(he.value.open),1),t[6]||(t[6]=r("p",{class:"text-sm text-body"},"Abertos",-1))])])]),r("div",E,[r("div",T,[t[9]||(t[9]=r("div",{class:"p-3 rounded-full bg-[rgba(212,175,55,0.15)] text-[#D4AF37] mr-4 border border-[#D4AF37]"},[r("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),r("div",null,[r("p",H,n(he.value.in_progress),1),t[8]||(t[8]=r("p",{class:"text-sm text-body"},"Em Andamento",-1))])])]),r("div",L,[r("div",N,[t[11]||(t[11]=r("div",{class:"p-3 rounded-full bg-[rgba(212,175,55,0.15)] text-[#D4AF37] mr-4 border border-[#D4AF37]"},[r("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),r("div",null,[r("p",S,n(he.value.completed),1),t[10]||(t[10]=r("p",{class:"text-sm text-body"},"Concluídos",-1))])])])]),r("div",O,[r("div",R,[r("div",null,[t[13]||(t[13]=r("label",{class:"block text-sm font-medium text-body mb-2"},"Status",-1)),d(r("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>be.value.status=e),class:"w-full px-3 py-2 border border-[rgba(212,175,55,0.24)] rounded-md bg-[#1A1A1A] text-heading focus:outline-none focus:ring-2 focus:ring-[#D4AF37] focus:border-[#D4AF37]"},[...t[12]||(t[12]=[u('<option value="">Todos</option><option value="open">Aberto</option><option value="in_progress">Em Andamento</option><option value="completed">Concluído</option><option value="cancelled">Cancelado</option>',5)])],512),[[i,be.value.status]])]),r("div",null,[t[15]||(t[15]=r("label",{class:"block text-sm font-medium text-body mb-2"},"Categoria",-1)),d(r("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>be.value.category=e),class:"w-full px-3 py-2 border border-[rgba(212,175,55,0.24)] rounded-md bg-[#1A1A1A] text-heading focus:outline-none focus:ring-2 focus:ring-[#D4AF37] focus:border-[#D4AF37]"},[t[14]||(t[14]=r("option",{value:""},"Todas",-1)),(x(!0),s(c,null,p(g(xe),e=>(x(),s("option",{key:e.value,value:e.value},n(e.label),9,U))),128))],512),[[i,be.value.category]])]),r("div",null,[t[17]||(t[17]=r("label",{class:"block text-sm font-medium text-body mb-2"},"Ordenar Por",-1)),d(r("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>be.value.sortBy=e),class:"w-full px-3 py-2 border border-[rgba(212,175,55,0.24)] rounded-md bg-[#1A1A1A] text-heading focus:outline-none focus:ring-2 focus:ring-[#D4AF37] focus:border-[#D4AF37]"},[...t[16]||(t[16]=[u('<option value="created_at_desc">Mais Recentes</option><option value="created_at_asc">Mais Antigos</option><option value="budget_desc">Maior Orçamento</option><option value="budget_asc">Menor Orçamento</option><option value="bids_desc">Mais Propostas</option>',5)])],512),[[i,be.value.sortBy]])])]),fe.value?(x(),s("div",q,[r("button",{onClick:_e,class:"text-sm text-[#D4AF37] hover:text-[#E5C04A] font-medium"}," Limpar Filtros ")])):l("",!0)]),ge.value?(x(),s("div",G,[...t[18]||(t[18]=[r("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#D4AF37]"},null,-1),r("p",{class:"mt-4 text-body"},"Carregando projetos...",-1)])])):me.value?(x(),s("div",I,[t[19]||(t[19]=r("svg",{class:"mx-auto h-12 w-12 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[20]||(t[20]=r("h3",{class:"mt-4 text-lg font-medium text-heading"},"Erro ao carregar projetos",-1)),r("p",J,n(me.value),1),r("button",{onClick:je,class:"mt-6 px-4 py-2 bg-[#D4AF37] text-[#0F1117] font-semibold rounded-md hover:bg-[#E5C04A]"}," Tentar Novamente ")])):0===ye.value.length?(x(),s("div",$,[t[22]||(t[22]=r("svg",{class:"mx-auto h-12 w-12 text-[#D4AF37]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t[23]||(t[23]=r("h3",{class:"mt-4 text-lg font-medium text-heading"},"Nenhum projeto encontrado",-1)),r("p",K,n(fe.value?"Tente ajustar os filtros para ver mais resultados.":"Você ainda não criou nenhum projeto."),1),r("div",Q,[m(o,{to:"/create-project",class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700"},{default:v(()=>[...t[21]||(t[21]=[h(" Criar Novo Projeto ",-1)])]),_:1})])])):(x(),s("div",W,[(x(!0),s(c,null,p(ye.value,e=>{return x(),s("div",{key:e.id,class:"bg-surface rounded-lg shadow hover:shadow-md transition-shadow"},[r("div",X,[r("div",Y,[r("div",Z,[r("div",ee,[r("h3",te,n(e.title),1),m(y,{status:e.status},null,8,["status"])]),r("p",oe,n(e.description),1),r("div",ae,[r("span",se,[t[24]||(t[24]=r("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),h(" "+n(Ae(e.category)),1)]),r("span",re,[t[25]||(t[25]=r("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),h(" "+n((a=e.budget,a||0===a?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a):"A combinar")),1)]),r("span",le,[t[26]||(t[26]=r("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})],-1)),h(" "+n(e.bid_count||0)+" propostas ",1)]),r("span",ne,[t[27]||(t[27]=r("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),h(" "+n(ke(e.created_at)),1)])])])]),r("div",de,[m(o,{to:`/projects/${e.id}`,class:"px-4 py-2 text-sm font-medium text-body bg-surface border border-gray-300 rounded-md hover:bg-gray-50"},{default:v(()=>[...t[28]||(t[28]=[h(" Ver Detalhes ",-1)])]),_:1},8,["to"]),"open"===e.status?(x(),s("button",ie," Ver Propostas ("+n(e.bid_count||0)+") ",1)):l("",!0)])])]);var a}),128))])),we.value>1?(x(),s("div",ue,[m(w,{"current-page":ve.value,"total-pages":we.value,onPageChanged:t[3]||(t[3]=e=>ve.value=e)},null,8,["current-page","total-pages"])])):l("",!0)])])}}};export{ce as default};
