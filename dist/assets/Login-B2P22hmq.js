import{K as e,r,a,e as s,h as t,i as l,g as o,p as i,k as d,j as n,C as m,D as c,n as u,t as p,L as x,M as b,u as g,b as f}from"./vue-DDtQ7Z_H.js";import{u as v}from"./index-GrC-7x6E.js";import"./utils-CeLII1lI.js";const y={class:"min-h-screen bg-page flex flex-col justify-center py-12 sm:px-6 lg:px-8"},h={class:"sm:mx-auto sm:w-full sm:max-w-md"},w={class:"mt-2 text-center text-sm text-body"},k={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},M={class:"bg-surface py-8 px-4 shadow-2xl sm:rounded-2xl sm:px-10 border border-gold/10 backdrop-blur-sm"},j={class:"mt-1"},S={key:0,class:"mt-1 text-sm text-red-600"},C={class:"mt-1 relative"},E=["type"],L={key:0,class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},z={key:1,class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_={key:0,class:"mt-1 text-sm text-red-600"},A={class:"flex items-center justify-between"},B={class:"flex items-center"},U={class:"text-sm"},V={key:0,class:"rounded-md bg-red-50 p-4"},q={class:"flex"},D={class:"ml-3"},I={class:"text-sm text-red-700"},K=["disabled"],H={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},O={__name:"Login",setup(O){const T=g(),J=v(),N=e({email:"",password:"",rememberMe:!1}),$=e({email:"",password:"",general:""}),F=r(!1),G=r(!1),P=async()=>{if((()=>{let e=!0;return $.email="",$.password="",$.general="",N.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N.email)||($.email="Email inválido",e=!1):($.email="Email é obrigatório",e=!1),N.password?N.password.length<6&&($.password="Senha deve ter pelo menos 6 caracteres",e=!1):($.password="Senha é obrigatória",e=!1),e})()){G.value=!0;try{const e=await J.login(N.email,N.password,N.rememberMe);if(e.success){const r=e.user||{};if(!0===r.isAdmin||"admin"===r.type){const e=localStorage.getItem("kadesh_token");return e&&(localStorage.setItem("adminToken",e),localStorage.setItem("adminUser",JSON.stringify(r))),void T.push("/admin/dashboard")}T.push("/lobby")}else $.general=e.error}catch(e){$.general="Erro ao fazer login. Tente novamente."}finally{G.value=!1}}};return(e,r)=>{const g=o("router-link");return f(),a("div",y,[s("div",h,[t(g,{to:"/",class:"flex justify-center"},{default:l(()=>[...r[4]||(r[4]=[s("div",{class:"relative group"},[s("div",{class:"absolute -inset-1 bg-gradient-to-r from-gold to-yellow-600 rounded-2xl blur opacity-25 group-hover:opacity-50 transition duration-1000 group-hover:duration-200"}),s("img",{src:"/dist/logo.jpeg",alt:"Kadesh",class:"relative h-40 w-40 object-cover rounded-2xl border-2 border-gold/30 shadow-2xl"})],-1)])]),_:1}),r[7]||(r[7]=s("h2",{class:"mt-8 text-center text-4xl font-extrabold text-heading tracking-tight"}," KADDESH ",-1)),r[8]||(r[8]=s("p",{class:"mt-2 text-center text-gold font-medium tracking-widest uppercase text-xs"}," Service Bridge ",-1)),r[9]||(r[9]=s("h3",{class:"mt-6 text-center text-xl font-semibold text-body"}," Entre na sua conta ",-1)),s("p",w,[r[6]||(r[6]=i(" Ou ",-1)),t(g,{to:"/register",class:"font-medium text-primary-600 hover:text-primary-500"},{default:l(()=>[...r[5]||(r[5]=[i(" crie uma nova conta ",-1)])]),_:1})])]),s("div",k,[s("div",M,[s("form",{onSubmit:d(P,["prevent"]),class:"space-y-6"},[s("div",null,[r[10]||(r[10]=s("label",{for:"email",class:"block text-sm font-medium text-body"}," Email ",-1)),s("div",j,[m(s("input",{id:"email","onUpdate:modelValue":r[0]||(r[0]=e=>N.email=e),type:"email",autocomplete:"email",required:"",class:u(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"border-red-500":$.email}]),placeholder:"seu@email.com"},null,2),[[c,N.email]]),$.email?(f(),a("p",S,p($.email),1)):n("",!0)])]),s("div",null,[r[13]||(r[13]=s("label",{for:"password",class:"block text-sm font-medium text-body"}," Senha ",-1)),s("div",C,[m(s("input",{id:"password","onUpdate:modelValue":r[1]||(r[1]=e=>N.password=e),type:F.value?"text":"password",autocomplete:"current-password",required:"",class:u(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10",{"border-red-500":$.password}]),placeholder:"••••••••"},null,10,E),[[x,N.password]]),s("button",{type:"button",onClick:r[2]||(r[2]=e=>F.value=!F.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[F.value?(f(),a("svg",z,[...r[12]||(r[12]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(f(),a("svg",L,[...r[11]||(r[11]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))]),$.password?(f(),a("p",_,p($.password),1)):n("",!0)])]),s("div",A,[s("div",B,[m(s("input",{id:"remember-me","onUpdate:modelValue":r[3]||(r[3]=e=>N.rememberMe=e),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[b,N.rememberMe]]),r[14]||(r[14]=s("label",{for:"remember-me",class:"ml-2 block text-sm text-heading"}," Lembrar-me ",-1))]),s("div",U,[t(g,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500"},{default:l(()=>[...r[15]||(r[15]=[i(" Esqueceu a senha? ",-1)])]),_:1})])]),$.general?(f(),a("div",V,[s("div",q,[r[16]||(r[16]=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),s("div",D,[s("p",I,p($.general),1)])])])):n("",!0),s("div",null,[s("button",{type:"submit",disabled:G.value,class:"w-full flex justify-center py-3 px-4 border border-transparent rounded-xl shadow-lg text-base font-bold text-dark bg-gold hover:bg-gold-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed"},[G.value?(f(),a("svg",H,[...r[17]||(r[17]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):n("",!0),i(" "+p(G.value?"Entrando...":"Entrar"),1)],8,K)])],32)])])])}}};export{O as default};
