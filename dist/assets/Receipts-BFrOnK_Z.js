import{r as e,c as t,o as a,a as o,e as r,j as s,q as l,n,F as d,k as i,u as c,b as u,t as m,m as p}from"./vue-n9kv2shB.js";import{u as b,a as v}from"./index-D2lEr4-j.js";import"./utils-CeLII1lI.js";const x={class:"min-h-screen bg-page py-8"},h={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},g={class:"bg-[#161821] rounded-lg shadow-lg mb-6 border border-[rgba(212,175,55,0.24)]"},y={class:"flex"},w={key:0,class:"space-y-4"},k={key:0,class:"text-center py-12"},f={key:1,class:"bg-[#161821] rounded-lg shadow-lg p-12 text-center border border-[rgba(212,175,55,0.24)]"},A={key:2,class:"space-y-4"},C={class:"flex justify-between items-start mb-4"},F={class:"text-lg font-semibold text-heading"},D={class:"text-sm text-muted mt-1"},R={class:"text-sm text-body"},j={class:"text-right"},z={class:"text-2xl font-bold text-[#22c55e]"},P={class:"text-sm text-muted mt-1"},B={class:"flex gap-3"},_=["onClick","disabled"],M={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},V={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},E=["onClick"],$={key:1,class:"space-y-4"},H={key:0,class:"text-center py-12"},L={key:1,class:"bg-[#161821] rounded-lg shadow-lg p-12 text-center border border-[rgba(212,175,55,0.24)]"},G={key:2,class:"space-y-4"},I={class:"flex justify-between items-start mb-4"},N={class:"text-lg font-semibold text-heading"},U={class:"text-sm text-muted mt-1"},q={class:"text-sm text-body mt-2"},O={class:"text-right"},T={class:"text-sm text-muted mt-1"},S=["onClick","disabled"],J={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},K={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Q={__name:"Receipts",setup(Q){const W=c(),X=b(),Y=e("contracts"),Z=e(!1),ee=e([]),te=e([]),ae=e(null),oe=t(()=>{var e;return"client"===(null==(e=X.user)?void 0:e.type)}),re=async()=>{Z.value=!0;try{const e=await v.get("/api/contracts",{params:{status:"completed"}});ee.value=e.data.contracts||e.data||[]}catch(e){console.error("Erro ao carregar contratos:",e)}finally{Z.value=!1}},se=async()=>{Z.value=!0;try{const e=await v.get("/api/wallet/transactions");te.value=e.data.transactions||e.data||[]}catch(e){console.error("Erro ao carregar transa√ß√µes:",e)}finally{Z.value=!1}},le=async(e,t)=>{ae.value=e.id;try{const a="contract"===t?`/api/receipts/contract/${e.id}`:`/api/receipts/transaction/${e.id}`,o=await v.get(a,{responseType:"blob"}),r=window.URL.createObjectURL(new Blob([o.data])),s=document.createElement("a");s.href=r;const l="contract"===t?`comprovante-contrato-${e.id}.pdf`:`comprovante-transacao-${e.id}.pdf`;s.setAttribute("download",l),document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(r)}catch(a){console.error("Erro ao gerar comprovante:",a)}finally{ae.value=null}},ne=e=>new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2}).format(e||0),de=e=>{if(!e)return"";return new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})};a(()=>{"contracts"===Y.value?re():se()});const ie=e(Y.value);return setInterval(()=>{ie.value!==Y.value&&(ie.value=Y.value,"contracts"===Y.value?re():se())},100),(e,t)=>(u(),o("div",x,[r("div",h,[t[10]||(t[10]=r("div",{class:"mb-8"},[r("h1",{class:"text-3xl font-bold text-heading mb-2"},"üìÑ Comprovantes de Pagamento"),r("p",{class:"text-body"},"Gere comprovantes em PDF (modelo RPA) das suas transa√ß√µes")],-1)),r("div",g,[r("nav",y,[r("button",{onClick:t[0]||(t[0]=e=>Y.value="contracts"),class:n(["py-4 px-6 font-medium text-sm transition border-b-2","contracts"===Y.value?"border-[#D4AF37] text-[#D4AF37] bg-[rgba(212,175,55,0.1)]":"border-transparent text-body hover:text-heading hover:bg-[#1A1A1A]"])}," Contratos Finalizados ",2),r("button",{onClick:t[1]||(t[1]=e=>Y.value="transactions"),class:n(["py-4 px-6 font-medium text-sm transition border-b-2","transactions"===Y.value?"border-[#D4AF37] text-[#D4AF37] bg-[rgba(212,175,55,0.1)]":"border-transparent text-body hover:text-heading hover:bg-[#1A1A1A]"])}," Transa√ß√µes de Carteira ",2)])]),"contracts"===Y.value?(u(),o("div",w,[Z.value?(u(),o("div",k,[...t[2]||(t[2]=[r("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#D4AF37] mx-auto"},null,-1),r("p",{class:"mt-4 text-body"},"Carregando...",-1)])])):0===ee.value.length?(u(),o("div",f,[...t[3]||(t[3]=[r("svg",{class:"w-16 h-16 text-[#D4AF37] mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),r("p",{class:"text-body"},"Nenhum contrato finalizado ainda",-1)])])):(u(),o("div",A,[(u(!0),o(d,null,i(ee.value,e=>(u(),o("div",{key:e.id,class:"bg-[#161821] rounded-lg shadow-lg p-6 hover:border-[#D4AF37] transition border border-[rgba(212,175,55,0.24)]"},[r("div",C,[r("div",null,[r("h3",F,m(e.project_title),1),r("p",D,"Contrato #"+m(e.id),1),r("p",R,m(oe.value?"Prestador":"Contratante")+": "+m(e.other_party_name),1)]),r("div",j,[r("p",z," R$ "+m(ne(e.total_amount)),1),r("p",P," Finalizado em "+m(de(e.completed_at)),1)])]),r("div",B,[r("button",{onClick:t=>le(e,"contract"),disabled:ae.value===e.id,class:"px-4 py-2 bg-[#D4AF37] text-[#0F1117] font-semibold rounded-md hover:bg-[#E5C04A] disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[ae.value===e.id?(u(),o("svg",M,[...t[4]||(t[4]=[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(u(),o("svg",V,[...t[5]||(t[5]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])),p(" "+m(ae.value===e.id?"Gerando...":"Gerar Comprovante PDF"),1)],8,_),r("button",{onClick:t=>{return a=e.id,void W.push(`/contracts/${a}`);var a},class:"px-4 py-2 bg-[#1A1A1A] text-[#D4AF37] border border-[#D4AF37] rounded-md hover:bg-[rgba(212,175,55,0.15)]"}," Ver Detalhes ",8,E)])]))),128))]))])):s("",!0),"transactions"===Y.value?(u(),o("div",$,[Z.value?(u(),o("div",H,[...t[6]||(t[6]=[r("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#D4AF37] mx-auto"},null,-1),r("p",{class:"mt-4 text-body"},"Carregando...",-1)])])):0===te.value.length?(u(),o("div",L,[...t[7]||(t[7]=[r("svg",{class:"w-16 h-16 text-[#D4AF37] mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})],-1),r("p",{class:"text-body"},"Nenhuma transa√ß√£o registrada",-1)])])):(u(),o("div",G,[(u(!0),o(d,null,i(te.value,e=>{return u(),o("div",{key:e.id,class:"bg-[#161821] rounded-lg shadow-lg p-6 hover:border-[#D4AF37] transition border border-[rgba(212,175,55,0.24)]"},[r("div",I,[r("div",null,[r("h3",N,m((a=e.type,{deposit:"Dep√≥sito",withdrawal:"Saque",credit:"Cr√©dito",debit:"D√©bito",escrow_lock:"Escrow Bloqueado",escrow_release:"Escrow Liberado",escrow_refund:"Escrow Reembolsado"}[a]||a)),1),r("p",U,"Transa√ß√£o #"+m(e.id),1),r("p",q,m(e.description),1)]),r("div",O,[r("p",{class:n(["text-2xl font-bold","credit"===e.type||"deposit"===e.type?"text-[#22c55e]":"text-[#ef4444]"])},m("credit"===e.type||"deposit"===e.type?"+":"-")+" R$ "+m(ne(e.amount)),3),r("p",T,m(de(e.created_at)),1)])]),r("button",{onClick:t=>le(e,"transaction"),disabled:ae.value===e.id,class:"px-4 py-2 bg-[#D4AF37] text-[#0F1117] font-semibold rounded-md hover:bg-[#E5C04A] disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[ae.value===e.id?(u(),o("svg",J,[...t[8]||(t[8]=[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(u(),o("svg",K,[...t[9]||(t[9]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])),p(" "+m(ae.value===e.id?"Gerando...":"Gerar Comprovante PDF"),1)],8,S)]);var a}),128))]))])):s("",!0),t[11]||(t[11]=l('<div class="mt-8 bg-[rgba(212,175,55,0.1)] border border-[#D4AF37] rounded-lg p-6"><div class="flex gap-4"><svg class="w-6 h-6 text-[#D4AF37] flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h4 class="font-semibold text-heading mb-2">üìã Modelo RPA (Recibo de Pagamento Aut√¥nomo)</h4><p class="text-sm text-body mb-2"> Os comprovantes gerados seguem o modelo RPA, ideal para prestadores de servi√ßo aut√¥nomos. </p><ul class="text-sm text-body space-y-1 list-disc list-inside"><li>Inclui dados completos: Contratante, Prestador, valor, data e descri√ß√£o do servi√ßo</li><li>√ötil para declara√ß√£o de IR e contabilidade</li><li>Para emiss√£o de NF-e, entre em contato com o Contratante/Prestador via chat</li></ul></div></div></div>',1))])]))}};export{Q as default};
