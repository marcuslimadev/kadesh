import{d as e,r as t,c as a,a as r,b as l,e as o,j as s,t as n,h as i,p as d,u,o as c,J as v,i as p,g as m,n as b,F as x,l as g,C as f,K as h,q as y,k as w,D as j,m as k,f as _,v as C}from"./vue-NU_yXd1p.js";import{a as A,u as P}from"./index-DjcFZRO0.js";import{_ as M}from"./StatusBadge-BUfCr2p2.js";import{b as B,d as D}from"./utils-CeLII1lI.js";import{l as F}from"./index-Ctu0mvSg.js";import{p as E}from"./projectService-B9AmpsHT.js";import{b as z}from"./bidService-CtahT6Ng.js";const $=e("projects",()=>{const e=t([]),r=t(null),l=t([]),o=t(!1),s=t({total:0,limit:20,offset:0,hasMore:!1}),n=a(()=>e.value.filter(e=>e.featured)),i=a(()=>e.value.filter(e=>"open"===e.status)),d=async(t={})=>{var a,r;o.value=!0;try{const a={limit:s.value.limit,offset:s.value.offset,...t},r=await A.get("/api/projects",{params:a});return 0===s.value.offset?e.value=r.data.projects:e.value.push(...r.data.projects),s.value={total:r.data.total,limit:r.data.limit,offset:r.data.offset,hasMore:r.data.projects.length===r.data.limit},{success:!0}}catch(l){return console.error("Fetch projects error:",l),{success:!1,error:(null==(r=null==(a=l.response)?void 0:a.data)?void 0:r.error)||"Erro ao carregar projetos"}}finally{o.value=!1}};return{projects:e,currentProject:r,userProjects:l,isLoading:o,pagination:s,featuredProjects:n,openProjects:i,fetchProjects:d,fetchProject:async e=>{var t,a;o.value=!0;try{const t=await A.get(`/api/projects/${e}`);return r.value=t.data.project,{success:!0,project:t.data.project}}catch(l){return console.error("Fetch project error:",l),{success:!1,error:(null==(a=null==(t=l.response)?void 0:t.data)?void 0:a.error)||"Erro ao carregar projeto"}}finally{o.value=!1}},createProject:async t=>{var a,r;o.value=!0;try{const a=(await A.post("/api/projects",t)).data.project;return e.value.unshift(a),l.value.unshift(a),{success:!0,project:a}}catch(s){return console.error("Create project error:",s),{success:!1,error:(null==(r=null==(a=s.response)?void 0:a.data)?void 0:r.error)||"Erro ao criar projeto"}}finally{o.value=!1}},updateProject:async(t,a)=>{var s,n,i;o.value=!0;try{const o=(await A.put(`/api/projects/${t}`,a)).data.project,n=e.value.findIndex(e=>e.id===t);-1!==n&&(e.value[n]=o);const i=l.value.findIndex(e=>e.id===t);return-1!==i&&(l.value[i]=o),(null==(s=r.value)?void 0:s.id)===t&&(r.value=o),{success:!0,project:o}}catch(d){return console.error("Update project error:",d),{success:!1,error:(null==(i=null==(n=d.response)?void 0:n.data)?void 0:i.error)||"Erro ao atualizar projeto"}}finally{o.value=!1}},deleteProject:async t=>{var a,s,n;o.value=!0;try{return await A.delete(`/api/projects/${t}`),e.value=e.value.filter(e=>e.id!==t),l.value=l.value.filter(e=>e.id!==t),(null==(a=r.value)?void 0:a.id)===t&&(r.value=null),{success:!0}}catch(i){return console.error("Delete project error:",i),{success:!1,error:(null==(n=null==(s=i.response)?void 0:s.data)?void 0:n.error)||"Erro ao deletar projeto"}}finally{o.value=!1}},fetchUserProjects:async(e="all")=>{var t,a;o.value=!0;try{const t={status:e,limit:50},a=await A.get("/api/projects/user/my-projects",{params:t});return l.value=a.data.projects,{success:!0}}catch(r){return console.error("Fetch user projects error:",r),{success:!1,error:(null==(a=null==(t=r.response)?void 0:t.data)?void 0:a.error)||"Erro ao carregar seus projetos"}}finally{o.value=!1}},searchProjects:async(e,t={})=>d({search:e,...t}),loadMoreProjects:async(e={})=>{if(s.value.hasMore&&!o.value)return s.value.offset+=s.value.limit,d(e)},resetPagination:()=>{s.value.offset=0,s.value.hasMore=!1},clearCurrentProject:()=>{r.value=null}}}),R={class:"bg-[#161821] border border-[rgba(212,175,55,0.24)] rounded-lg p-4 hover:shadow-[0_4px_20px_rgba(212,175,55,0.25)] hover:border-[#D4AF37] transition-all"},V={class:"flex items-start justify-between mb-3"},S={class:"flex items-center space-x-3"},N={class:"w-10 h-10 rounded-full bg-[rgba(212,175,55,0.15)] text-[#D4AF37] flex items-center justify-center text-sm font-semibold border border-[#D4AF37]"},q={class:"font-medium text-heading"},I={class:"flex items-center text-xs text-body"},L={class:"text-right"},U={class:"text-2xl font-bold text-[#D4AF37]"},T={class:"text-xs text-muted"},O={class:"mb-3"},H={class:"text-sm text-body"},K={class:"flex items-center justify-between text-xs text-muted mb-3"},J={class:"flex items-center space-x-4"},W={class:"flex items-center"},G={key:0,class:"flex items-center"},Q={key:0,class:"flex gap-2"},X={key:1,class:"mt-2 p-2 bg-[rgba(34,197,94,0.15)] border border-[#22c55e] rounded text-sm text-[#22c55e]"},Y={key:2,class:"mt-2 p-2 bg-[rgba(239,68,68,0.15)] border border-[#ef4444] rounded text-sm text-[#ef4444]"},Z={__name:"BidCard",props:{bid:{type:Object,required:!0},showActions:{type:Boolean,default:!1}},emits:["accept","reject"],setup(e){const t=e=>{if(!e&&0!==e)return"Novo";const t=Number(e);return Number.isNaN(t)?"Novo":t.toFixed(1)},a=e=>{if(!e)return"Data n√£o dispon√≠vel";try{return B(new Date(e),{addSuffix:!0,locale:F})}catch(t){return"Data inv√°lida"}};return(u,c)=>{return l(),r("div",R,[o("div",V,[o("div",S,[o("div",N,n((m=e.bid.provider_name,m?m.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):"?")),1),o("div",null,[o("p",q,n(e.bid.provider_name),1),o("div",I,[c[2]||(c[2]=o("svg",{class:"w-3 h-3 mr-1 text-[#D4AF37] fill-current",viewBox:"0 0 20 20"},[o("path",{d:"M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"})],-1)),o("span",null,n(t(e.bid.rating)),1),c[3]||(c[3]=o("span",{class:"mx-1"},"‚Ä¢",-1)),o("span",null,n(e.bid.total_projects||0)+" projetos",1)])])]),o("div",L,[o("p",U,n((p=e.bid.amount,p||0===p?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(p):"A combinar")),1),o("p",T,n((v=e.bid.delivery_time??e.bid.delivery_time_days,v?`${v} ${1===v?"dia":"dias"}`:"")),1)])]),o("div",O,[o("p",H,n(e.bid.proposal||e.bid.description),1)]),o("div",K,[o("div",J,[o("span",W,[c[4]||(c[4]=o("svg",{class:"w-3 h-3 mr-1 text-[#D4AF37]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),d(" "+n(a(e.bid.created_at)),1)]),e.bid.score?(l(),r("span",G,[c[5]||(c[5]=o("svg",{class:"w-3 h-3 mr-1 text-[#D4AF37]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)),d(" Score: "+n(e.bid.score.toFixed(1)),1)])):s("",!0)]),i(M,{status:e.bid.status},null,8,["status"])]),e.showActions&&"pending"===e.bid.status?(l(),r("div",Q,[o("button",{onClick:c[0]||(c[0]=t=>u.$emit("accept",e.bid.id)),class:"flex-1 px-4 py-2 bg-[#22c55e] text-white rounded-md hover:bg-[#16a34a] transition-colors text-sm font-medium"}," Aceitar Proposta "),o("button",{onClick:c[1]||(c[1]=t=>u.$emit("reject",e.bid.id)),class:"px-4 py-2 border border-[rgba(212,175,55,0.24)] text-body rounded-md hover:bg-[#1A1A1A] transition-colors text-sm font-medium"}," Rejeitar ")])):s("",!0),"accepted"===e.bid.status?(l(),r("div",X," ‚úì Proposta aceita ")):s("",!0),"rejected"===e.bid.status?(l(),r("div",Y," ‚úó Proposta rejeitada ")):s("",!0)]);var v,p,m}}},ee={key:0,class:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6"},te={class:"flex items-start justify-between"},ae={class:"flex-1"},re={class:"text-sm text-green-700 mb-4"},le={class:"bg-white border border-green-200 rounded p-3 mb-4"},oe={class:"flex items-baseline gap-2"},se={class:"text-2xl font-bold text-green-600"},ne={class:"text-sm text-gray-500"},ie={class:"flex items-center gap-3"},de=["disabled"],ue={key:0,class:"flex items-center justify-center gap-2"},ce={key:1,class:"flex items-center justify-center gap-2"},ve={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},pe={class:"bg-white rounded-lg shadow-xl max-w-md w-full p-6"},me={class:"text-gray-600 mb-6"},be={class:"text-green-600"},xe={class:"bg-yellow-50 border border-yellow-200 rounded p-3 mb-6"},ge={class:"text-sm text-yellow-800"},fe={class:"flex gap-3"},he=["disabled"],ye={__name:"ReleasePaymentButton",props:{projectId:{type:[Number,String],required:!0},paymentStatus:{type:String,required:!0},finalPrice:{type:Number,required:!0},isContractor:{type:Boolean,required:!0},providerName:{type:String,default:"o prestador"}},emits:["payment-released"],setup(e,{emit:i}){const c=e,v=i,p=u(),m=t(!1),b=t(!1),x=t(10),g=a(()=>c.finalPrice),f=a(()=>g.value*(x.value/100)),h=a(()=>g.value-f.value),y=a(()=>c.isContractor&&("escrow_hold"===c.paymentStatus||"pending"===c.paymentStatus)),w=e=>new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),j=()=>{b.value=!0},k=async()=>{var e,t;try{m.value=!0;const e=await A.post(`/projects/${c.projectId}/release-payment`);e.data.success&&(v("payment-released",e.data),alert(`‚úÖ Pagamento liberado com sucesso!\n\nValor transferido: R$ ${w(h.value)}\nTaxa da plataforma: R$ ${w(f.value)}`),setTimeout(()=>{window.location.reload()},1500))}catch(a){console.error("Error releasing payment:",a),alert(`‚ùå Erro ao liberar pagamento: ${(null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.error)||a.message}`)}finally{m.value=!1,b.value=!1}},_=()=>{p.push(`/support/dispute?project=${c.projectId}`)};return(t,a)=>y.value?(l(),r("div",ee,[o("div",te,[o("div",ae,[a[3]||(a[3]=o("div",{class:"flex items-center gap-2 mb-2"},[o("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),o("h3",{class:"text-lg font-semibold text-green-900"},"Projeto Conclu√≠do")],-1)),o("p",re,[d(" O prestador "+n(e.providerName)+" concluiu o trabalho. Revise a entrega e libere o pagamento de ",1),o("strong",null,"R$ "+n(w(g.value)),1),a[1]||(a[1]=d(". ",-1))]),o("div",le,[a[2]||(a[2]=o("p",{class:"text-xs text-gray-600 mb-1"},"üí∞ Valor a ser transferido:",-1)),o("div",oe,[o("span",se,"R$ "+n(w(h.value)),1),o("span",ne,"("+n(x.value)+"% taxa: R$ "+n(w(f.value))+")",1)])])])]),o("div",ie,[o("button",{onClick:j,disabled:m.value,class:"flex-1 px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors shadow-md"},[m.value?(l(),r("span",ce,[...a[5]||(a[5]=[o("svg",{class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),d(" Processando... ",-1)])])):(l(),r("span",ue,[...a[4]||(a[4]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),d(" Liberar Pagamento ",-1)])]))],8,de),o("button",{onClick:_,class:"px-4 py-3 bg-white text-red-600 border-2 border-red-300 font-medium rounded-lg hover:bg-red-50 transition-colors"}," Reportar Problema ")]),b.value?(l(),r("div",ve,[o("div",pe,[a[9]||(a[9]=o("h3",{class:"text-xl font-bold text-gray-900 mb-4"},"Confirmar Libera√ß√£o de Pagamento",-1)),o("p",me,[a[6]||(a[6]=d(" Voc√™ est√° prestes a liberar ",-1)),o("strong",be,"R$ "+n(w(h.value)),1),d(" para "+n(e.providerName)+". Esta a√ß√£o √© irrevers√≠vel. ",1)]),o("div",xe,[o("p",ge,[a[7]||(a[7]=d(" ‚ö†Ô∏è ",-1)),a[8]||(a[8]=o("strong",null,"Aten√ß√£o:",-1)),d(" A taxa da plataforma de "+n(x.value)+"% (R$ "+n(w(f.value))+") ser√° deduzida automaticamente. ",1)])]),o("div",fe,[o("button",{onClick:a[0]||(a[0]=e=>b.value=!1),class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50"}," Cancelar "),o("button",{onClick:k,disabled:m.value,class:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400"}," Confirmar Libera√ß√£o ",8,he)])])])):s("",!0)])):s("",!0)}},we={class:"min-h-screen bg-page py-8"},je={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ke={key:0,class:"text-center py-12"},_e={key:1,class:"bg-surface rounded-lg shadow-md p-8 text-center"},Ce={class:"mt-2 text-sm text-body"},Ae={class:"mt-6"},Pe={key:2,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Me={class:"lg:col-span-2 space-y-6"},Be={class:"bg-surface rounded-lg shadow-md p-6"},De={class:"flex items-start justify-between mb-4"},Fe={class:"flex-1"},Ee={class:"text-3xl font-bold text-heading mb-2"},ze={class:"text-sm text-body mb-2"},$e={class:"font-semibold text-heading"},Re={class:"flex items-center gap-4 text-sm text-body"},Ve={class:"flex items-center"},Se={class:"flex items-center"},Ne={class:"grid grid-cols-2 gap-6 p-6 bg-gradient-to-br from-[#0F1117] to-[#1A1A2E] rounded-xl mb-6 border-2 border-[rgba(212,175,55,0.3)] shadow-lg"},qe={class:"text-4xl font-extrabold text-[#D4AF37]"},Ie={class:"text-2xl font-bold text-heading"},Le={key:0,class:"mt-2"},Ue={class:"flex items-center space-x-2"},Te={key:0,class:"mb-6"},Oe={class:"rounded-xl overflow-hidden border border-[rgba(212,175,55,0.2)] bg-[#0F1117]"},He=["src","alt"],Ke={class:"grid grid-cols-4 gap-3 mt-3"},Je=["onClick"],We=["src","alt"],Ge={class:"text-heading whitespace-pre-line"},Qe={key:1,class:"mt-6"},Xe={class:"text-heading whitespace-pre-line"},Ye={class:"mt-6"},Ze={class:"flex items-center justify-between mb-3"},et={key:0,class:"flex items-center gap-2"},tt={key:0,class:"grid gap-4 md:grid-cols-2"},at={class:"w-16 h-16 rounded-lg bg-gray-100 flex items-center justify-center overflow-hidden"},rt=["src","alt"],lt={key:1,class:"w-8 h-8 text-body",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ot={class:"flex-1 min-w-0"},st={class:"text-sm font-semibold text-heading truncate"},nt={class:"text-xs text-body"},it={key:0},dt={class:"flex flex-wrap gap-2 mt-2"},ut=["href"],ct=["disabled","onClick"],vt={key:1,class:"p-4 border border-dashed rounded-xl text-sm text-body bg-[#0F1117]"},pt={key:0,class:"text-body font-medium"},mt={key:2,class:"mt-6"},bt={class:"flex flex-wrap gap-2"},xt={class:"bg-surface rounded-lg shadow-md p-6","data-bids-section":""},gt={class:"flex items-center justify-between"},ft={class:"flex items-center space-x-3"},ht={class:"text-right"},yt={class:"flex items-center justify-between mb-4"},wt={class:"text-lg font-semibold text-heading"},jt={class:"flex items-center gap-3"},kt={key:0,class:"relative"},_t={key:1,class:"mb-6 p-4 bg-[#0F1117] rounded-lg"},Ct=["disabled"],At={key:2,class:"text-center py-8"},Pt={key:3,class:"space-y-4"},Mt={key:4,class:"text-center py-8 text-body"},Bt={key:0,class:"text-sm mt-1"},Dt={key:5,class:"mt-6 p-4 bg-[rgba(212,175,55,0.1)] border border-[rgba(212,175,55,0.3)] rounded-lg flex items-start gap-3"},Ft={class:"text-sm font-semibold text-heading"},Et={class:"text-xs text-body mt-1"},zt={class:"lg:col-span-1 space-y-6"},$t={class:"bg-surface rounded-lg shadow-md p-6"},Rt={class:"flex items-center mb-4"},Vt={class:"w-12 h-12 rounded-full bg-primary-100 text-primary-600 flex items-center justify-center text-lg font-semibold mr-3"},St={class:"font-medium text-heading"},Nt={class:"bg-surface rounded-lg shadow-md p-6"},qt={class:"space-y-3"},It={class:"flex justify-between"},Lt={class:"text-sm font-medium text-heading"},Ut={class:"flex justify-between"},Tt={class:"text-sm font-medium text-heading"},Ot={class:"flex justify-between"},Ht={key:0,class:"bg-surface rounded-lg shadow-md p-6"},Kt={class:"space-y-3"},Jt=["disabled"],Wt={key:1,class:"text-xs text-body text-center"},Gt={key:2,class:"w-full px-4 py-2 border border-red-300 rounded-md text-sm font-medium text-red-700 bg-surface hover:bg-red-50 transition-colors"},Qt={key:1,class:"bg-surface rounded-lg shadow-md p-6 border-2 border-green-500"},Xt={class:"flex items-center space-x-3"},Yt={class:"w-10 h-10 rounded-full bg-green-100 text-green-600 flex items-center justify-center font-semibold"},Zt={class:"font-medium text-heading"},ea={class:"text-sm text-green-600 font-semibold"},ta={__name:"ProjectDetail",setup(e){const A=C(),R=u(),V=P();$();const S=t(null),N=t([]),q=t(!1),I=t(!1),L=t(null),U=t(!0),T=t(!1),O=t(null),H=t(null),K=t("score"),J=t(!1),W=t(null),G=t(!1),Q=t(null),X=t({amount:null,proposal:"",delivery_time:null}),Y=a(()=>{var e;return(null==(e=S.value)?void 0:e.skills)?S.value.skills.split(",").map(e=>e.trim()).filter(Boolean):[]}),ee=a(()=>{var e,t,a,r;return((null==(t=null==(e=V.user)?void 0:e.value)?void 0:t.id)||(null==(a=V.user)?void 0:a.id))===(null==(r=S.value)?void 0:r.client_id)}),te=a(()=>{var e,t,a;return(null==(e=S.value)?void 0:e.client_name)?S.value.client_name:(null==(a=null==(t=S.value)?void 0:t.client)?void 0:a.name)?S.value.client.name:"Contratante"}),ae=a(()=>{var e;return V.isProvider&&"open"===(null==(e=S.value)?void 0:e.status)&&!ee.value});a(()=>{var e;return!!(null==(e=S.value)?void 0:e.deadline)&&new Date(S.value.deadline)<new Date});const re=a(()=>{if(!O.value)return null;const{days:e,hours:t,minutes:a,seconds:r,expired:l}=O.value;return l?{text:"Prazo encerrado",class:"text-red-600"}:e>0?{text:`${e}d ${t}h ${a}m`,class:e>2?"text-green-600":"text-yellow-600"}:t>0?{text:`${t}h ${a}m ${r}s`,class:t>6?"text-yellow-600":"text-orange-600"}:{text:`${a}m ${r}s`,class:"text-red-600 font-bold"}}),le=a(()=>{if(!N.value||0===N.value.length)return[];const e=[...N.value];switch(K.value){case"price-low":return e.sort((e,t)=>(e.amount||0)-(t.amount||0));case"price-high":return e.sort((e,t)=>(t.amount||0)-(e.amount||0));case"date-new":return e.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at));case"date-old":return e.sort((e,t)=>new Date(e.created_at)-new Date(t.created_at));default:return e.sort((e,t)=>{const a=e.score||0,r=t.score||0;return r!==a?r-a:(e.amount||0)-(t.amount||0)})}}),oe=a(()=>{var e;return(null==(e=S.value)?void 0:e.attachments)&&Array.isArray(S.value.attachments)?S.value.attachments:[]}),se=a(()=>oe.value.filter(e=>pe(e))),ne=a(()=>N.value&&0!==N.value.length?N.value.find(e=>"accepted"===e.status):null),ie=e=>{if(!e)return"Data n√£o dispon√≠vel";try{return B(new Date(e),{addSuffix:!0,locale:F})}catch(t){return"Data inv√°lida"}},de=e=>{if(!e)return"N√£o especificado";try{return new Date(e).toLocaleString("pt-BR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return"Data inv√°lida"}},ue=e=>e||0===e?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e):"A combinar",ce=e=>{const t=E.getCategories().find(t=>t.value===e||t.label===e);return t?t.label:e},ve=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):"?",pe=e=>Boolean((null==e?void 0:e.mime_type)&&e.mime_type.startsWith("image/")),me=async e=>{var t,a;if(!(null==(t=S.value)?void 0:t.id))return;const r=Array.from((null==(a=e.target)?void 0:a.files)||[]);if(r.length){G.value=!0;try{let e=0,t=0;for(const a of r)if(a.size>5242880)t++;else try{const r=await E.uploadAttachment(S.value.id,a);if(r.success){e++;const t=oe.value;S.value.attachments=[...t,r.data.attachment]}else t++}catch(l){t++,console.error("Erro ao enviar anexo:",l)}}finally{G.value=!1,e.target&&(e.target.value="")}}},be=()=>{var e;if(!(null==(e=S.value)?void 0:e.deadline))return void(O.value=null);const t=new Date(S.value.deadline),a=D(t,new Date);if(a<=0)return O.value={days:0,hours:0,minutes:0,seconds:0,expired:!0},void(H.value&&(clearInterval(H.value),H.value=null));const r=Math.floor(a/86400),l=Math.floor(a%86400/3600),o=Math.floor(a%3600/60),s=a%60;O.value={days:r,hours:l,minutes:o,seconds:s,expired:!1}},xe=async()=>{q.value=!0,L.value=null;try{const e=A.params.id,t=await E.getProject(e);if(t.success){S.value=t.data.project;const e=se.value;Q.value=e[0]||null,"open"===S.value.status&&S.value.deadline&&(H.value&&clearInterval(H.value),be(),H.value=setInterval(be,1e3)),await ge()}else L.value=t.error}catch(e){console.error("Error loading project:",e),L.value="Erro ao carregar projeto"}finally{q.value=!1}},ge=async()=>{var e;if(null==(e=S.value)?void 0:e.id){I.value=!0;try{const e=await E.getProjectBids(S.value.id);e.success?(N.value=e.data.bids||[],S.value&&(S.value.bid_count=N.value.length)):console.error("Error loading bids:",e.error)}catch(t){console.error("Error loading bids:",t)}finally{I.value=!1}}},fe=async()=>{if(V.isAuthenticated){if(V.isProvider&&X.value.amount&&X.value.proposal&&X.value.delivery_time&&X.value.proposal.trim()){T.value=!0;try{const e={project_id:S.value.id,amount:X.value.amount,proposal:X.value.proposal,delivery_time:X.value.delivery_time};(await z.createBid(e)).success&&(U.value=!1,X.value={amount:null,proposal:"",delivery_time:null},await ge(),setTimeout(()=>{const e=document.querySelector("[data-bids-section]");e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})},300))}catch(e){console.error("Error submitting bid:",e)}finally{T.value=!1}}}else R.push("/login")},he=async e=>{if(confirm("Tem certeza que deseja aceitar esta proposta? Isso encerrar√° o Leilao."))try{(await z.acceptBid(S.value.id,e)).success&&await xe()}catch(t){console.error("Error accepting bid:",t)}},ta=async e=>{if(confirm("Tem certeza que deseja rejeitar esta proposta?"))try{(await z.rejectBid(e)).success&&await ge()}catch(t){console.error("Error rejecting bid:",t)}},aa=async e=>{console.log("Payment released:",e),await xe()},ra=async()=>{if(0===N.value.length)return;const e=[...N.value].sort((e,t)=>(e.amount||0)-(t.amount||0))[0],t=`Encerrar o Leilao agora?\n\nO vencedor ser√°: ${e.provider_name}\nValor: R$ ${new Intl.NumberFormat("pt-BR").format(e.amount)}\n\nEsta a√ß√£o n√£o pode ser desfeita.`;if(confirm(t)){J.value=!0;try{(await E.closeAuction(S.value.id)).success&&await xe()}catch(a){console.error("Error closing auction:",a)}finally{J.value=!1}}};return c(()=>{xe()}),v(()=>{H.value&&clearInterval(H.value)}),(e,t)=>{var a,u,c,v,C,A,P,B,D,F,z,$,R,H,be,xe,ge,la;const oa=m("router-link");return l(),r("div",we,[o("div",je,[q.value?(l(),r("div",ke,[...t[5]||(t[5]=[o("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"},null,-1),o("p",{class:"mt-4 text-body"},"Carregando projeto...",-1)])])):L.value?(l(),r("div",_e,[t[7]||(t[7]=o("svg",{class:"mx-auto h-12 w-12 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[8]||(t[8]=o("h3",{class:"mt-4 text-lg font-medium text-heading"},"Erro ao carregar projeto",-1)),o("p",Ce,n(L.value),1),o("div",Ae,[i(oa,{to:"/projects",class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700"},{default:p(()=>[...t[6]||(t[6]=[d(" Voltar para Projetos ",-1)])]),_:1})])])):S.value?(l(),r("div",Pe,[o("div",Me,[o("div",Be,[o("div",De,[o("div",Fe,[o("h1",Ee,n(S.value.title),1),o("p",ze,[t[9]||(t[9]=d(" Anunciado por ",-1)),o("span",$e,n(te.value),1)]),o("div",Re,[o("span",Ve,[t[10]||(t[10]=o("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),d(" "+n(ce(S.value.category)),1)]),o("span",Se,[t[11]||(t[11]=o("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),d(" "+n(ie(S.value.created_at)),1)])])]),i(M,{status:S.value.status},null,8,["status"])]),o("div",Ne,[o("div",null,[t[12]||(t[12]=o("p",{class:"text-xs uppercase tracking-wider text-[#8A8A8A] mb-2 flex items-center gap-2"},[o("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z","clip-rule":"evenodd"})]),d(" Or√ßamento ")],-1)),o("p",qe,n(ue(S.value.budget)),1)]),o("div",null,[t[14]||(t[14]=o("p",{class:"text-xs uppercase tracking-wider text-[#8A8A8A] mb-2 flex items-center gap-2"},[o("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})]),d(" Prazo de Entrega ")],-1)),o("p",Ie,n(de(S.value.deadline)),1),"open"===S.value.status&&re.value?(l(),r("div",Le,[o("div",Ue,[(l(),r("svg",{class:b(["w-4 h-4",re.value.class]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[13]||(t[13]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),o("span",{class:b(["text-sm font-medium",re.value.class])},n(re.value.text),3)])])):s("",!0)])]),se.value.length?(l(),r("div",Te,[o("div",Oe,[o("img",{src:(null==(a=Q.value)?void 0:a.file_url)||se.value[0].file_url,alt:(null==(u=Q.value)?void 0:u.original_name)||"Imagem do projeto",class:"w-full h-80 object-cover"},null,8,He)]),o("div",Ke,[(l(!0),r(x,null,g(se.value,e=>{var t;return l(),r("button",{key:e.id,type:"button",class:b(["rounded-lg overflow-hidden border",(null==(t=Q.value)?void 0:t.id)===e.id?"border-[#D4AF37]":"border-[rgba(212,175,55,0.2)]"]),onClick:t=>Q.value=e},[o("img",{src:e.file_url,alt:e.original_name,class:"w-full h-20 object-cover"},null,8,We)],10,Je)}),128))])])):s("",!0),o("div",null,[t[15]||(t[15]=o("h2",{class:"text-lg font-semibold text-heading mb-3"},"Descricao",-1)),o("p",Ge,n(S.value.description),1)]),S.value.requirements?(l(),r("div",Qe,[t[16]||(t[16]=o("h2",{class:"text-lg font-semibold text-heading mb-3"},"Requisitos",-1)),o("p",Xe,n(S.value.requirements),1)])):s("",!0),o("div",Ye,[o("div",Ze,[t[19]||(t[19]=o("h2",{class:"text-lg font-semibold text-heading"},"Arquivos Anexados",-1)),ee.value?(l(),r("div",et,[o("input",{id:"detailAttachmentUpload",type:"file",class:"hidden",multiple:"",accept:"image/*,video/*,.pdf",onChange:me},null,32),o("label",{for:"detailAttachmentUpload",class:b(["inline-flex items-center px-3 py-2 rounded-lg border border-amber-200 text-sm font-medium text-amber-700 bg-amber-50 hover:bg-amber-100 cursor-pointer disabled:opacity-50",{"pointer-events-none opacity-60":G.value}])},[t[17]||(t[17]=o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),d(" "+n(G.value?"Enviando...":"Adicionar Anexos"),1)],2),t[18]||(t[18]=o("p",{class:"text-xs text-body"},"M√°x. 5MB por arquivo",-1))])):s("",!0)]),oe.value.length?(l(),r("div",tt,[(l(!0),r(x,null,g(oe.value,e=>{return l(),r("div",{key:e.id,class:"flex items-center gap-4 p-4 border rounded-xl hover:border-primary-300 hover:bg-primary-50 transition"},[o("div",at,[pe(e)?(l(),r("img",{key:0,src:e.file_url,alt:e.original_name,class:"object-cover w-full h-full"},null,8,rt)):(l(),r("svg",lt,[...t[20]||(t[20]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h10M7 11h10M7 15h7"},null,-1)])]))]),o("div",ot,[o("p",st,n(e.original_name),1),o("p",nt,[d(n(e.mime_type||"Arquivo")+" ",1),e.file_size?(l(),r("span",it," ¬∑ "+n((a=e.file_size,a||0===a?a<1048576?`${(a/1024).toFixed(1)} KB`:`${(a/1048576).toFixed(1)} MB`:"")),1)):s("",!0)]),o("div",dt,[o("a",{href:e.file_url,target:"_blank",rel:"noopener",class:"text-xs font-semibold text-amber-600 hover:text-amber-800"}," Baixar / Abrir ",8,ut),ee.value?(l(),r("button",{key:0,type:"button",class:"text-xs font-semibold text-red-600 hover:text-red-800 disabled:opacity-50",disabled:W.value===e.id,onClick:t=>(async e=>{var t;if(!(null==(t=S.value)?void 0:t.id)||!e)return;if(window.confirm("Remover este anexo? Essa a√ß√£o n√£o pode ser desfeita.")){W.value=e;try{if((await E.deleteAttachment(S.value.id,e)).success){const t=oe.value.filter(t=>t.id!==e);S.value.attachments=t}}catch(a){console.error("Erro ao remover anexo:",a)}finally{W.value=null}}})(e.id)},n(W.value===e.id?"Removendo...":"Remover"),9,ct)):s("",!0)])])]);var a}),128))])):(l(),r("div",vt,[t[21]||(t[21]=d(" Nenhum anexo enviado at√© o momento. ",-1)),ee.value?(l(),r("span",pt,"Use o bot√£o acima para subir arquivos de refer√™ncia.")):s("",!0)]))]),S.value.skills?(l(),r("div",mt,[t[22]||(t[22]=o("h2",{class:"text-lg font-semibold text-heading mb-3"},"Habilidades Necessarias",-1)),o("div",bt,[(l(!0),r(x,null,g(Y.value,e=>(l(),r("span",{key:e,class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary-100 text-primary-800"},n(e),1))),128))])])):s("",!0)]),o("div",xt,["open"===S.value.status&&re.value&&!re.value.expired?(l(),r("div",{key:0,class:b(["mb-4 p-4 rounded-lg border-2",{"bg-green-50 border-green-300":(null==(c=O.value)?void 0:c.days)>2,"bg-yellow-50 border-yellow-300":(null==(v=O.value)?void 0:v.days)<=2&&(null==(C=O.value)?void 0:C.hours)>6,"bg-orange-50 border-orange-300":(null==(A=O.value)?void 0:A.hours)<=6&&(null==(P=O.value)?void 0:P.hours)>0,"bg-red-50 border-red-300":0===(null==(B=O.value)?void 0:B.hours)}])},[o("div",gt,[o("div",ft,[o("div",{class:b(["flex items-center justify-center w-10 h-10 rounded-full",{"bg-green-100":(null==(D=O.value)?void 0:D.days)>2,"bg-yellow-100":(null==(F=O.value)?void 0:F.days)<=2&&(null==(z=O.value)?void 0:z.hours)>6,"bg-orange-100":(null==($=O.value)?void 0:$.hours)<=6&&(null==(R=O.value)?void 0:R.hours)>0,"bg-red-100":0===(null==(H=O.value)?void 0:H.hours)}])},[(l(),r("svg",{class:b(["w-6 h-6",re.value.class]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[23]||(t[23]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2))],2),t[24]||(t[24]=o("div",null,[o("p",{class:"font-semibold text-heading"},"Leilao Ativo"),o("p",{class:"text-sm text-body"},"Envie sua proposta antes do prazo")],-1))]),o("div",ht,[t[25]||(t[25]=o("p",{class:"text-sm text-body"},"Tempo restante",-1)),o("p",{class:b(["text-2xl font-bold",re.value.class])},n(re.value.text),3)])])],2)):s("",!0),o("div",yt,[o("h2",wt," Propostas ("+n(N.value.length)+") ",1),o("div",jt,[N.value.length>1?(l(),r("div",kt,[t[27]||(t[27]=o("label",{for:"bidSort",class:"sr-only"},"Ordenar Propostas",-1)),f(o("select",{id:"bidSort","onUpdate:modelValue":t[0]||(t[0]=e=>K.value=e),class:"block pl-3 pr-10 py-2 text-sm border border-[rgba(212,175,55,0.35)] bg-[#0F1117] text-heading focus:outline-none focus:ring-primary-500 focus:border-primary-500 rounded-md"},[...t[26]||(t[26]=[y('<option value="score">Melhor Score</option><option value="price-low">Menor Pre√ßo</option><option value="price-high">Maior Pre√ßo</option><option value="date-new">Mais Recentes</option><option value="date-old">Mais Antigas</option>',5)])],512),[[h,K.value]])])):s("",!0),ae.value?(l(),r("button",{key:1,onClick:t[1]||(t[1]=e=>U.value=!U.value),class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors"},n(U.value?"Cancelar":"Enviar Proposta"),1)):s("",!0)])]),U.value&&ae.value?(l(),r("div",_t,[t[31]||(t[31]=o("h3",{class:"font-medium text-heading mb-4"},"Nova Proposta",-1)),o("form",{onSubmit:w(fe,["prevent"]),class:"space-y-4"},[o("div",null,[t[28]||(t[28]=o("label",{for:"bidAmount",class:"block text-sm font-medium text-body mb-1"}," Valor da Proposta (R$) * ",-1)),f(o("input",{id:"bidAmount","onUpdate:modelValue":t[2]||(t[2]=e=>X.value.amount=e),type:"number",min:"0",step:"0.01",required:"",class:"w-full px-3 py-2 border border-[rgba(212,175,55,0.35)] bg-[#0F1117] text-heading rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"0.00"},null,512),[[j,X.value.amount,void 0,{number:!0}]])]),o("div",null,[t[29]||(t[29]=o("label",{for:"bidDescription",class:"block text-sm font-medium text-body mb-1"}," Descricao da Proposta * ",-1)),f(o("textarea",{id:"bidDescription","onUpdate:modelValue":t[3]||(t[3]=e=>X.value.proposal=e),rows:"4",required:"",class:b(["w-full px-3 py-2 border-2 bg-[#0F1117] text-heading rounded-md focus:outline-none transition-all",ae.value?"border-[#D4AF37] ring-4 ring-[#D4AF37]/20 shadow-lg shadow-[#D4AF37]/10 animate-pulse":"border-[rgba(212,175,55,0.35)]"]),placeholder:"Descreva como voce pretende realizar o projeto..."},null,2),[[j,X.value.proposal]])]),o("div",null,[t[30]||(t[30]=o("label",{for:"bidDeliveryTime",class:"block text-sm font-medium text-body mb-1"}," Tempo de Entrega (dias) * ",-1)),f(o("input",{id:"bidDeliveryTime","onUpdate:modelValue":t[4]||(t[4]=e=>X.value.delivery_time=e),type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-[rgba(212,175,55,0.35)] bg-[#0F1117] text-heading rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"7"},null,512),[[j,X.value.delivery_time,void 0,{number:!0}]])]),o("button",{type:"submit",disabled:T.value,class:"w-full px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:bg-gray-400 transition-colors"},n(T.value?"Enviando...":"Enviar Proposta"),9,Ct)],32)])):s("",!0),I.value?(l(),r("div",At,[...t[32]||(t[32]=[o("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),o("p",{class:"mt-2 text-body text-sm"},"Carregando Propostas...",-1)])])):N.value.length>0?(l(),r("div",Pt,[(l(!0),r(x,null,g(le.value,e=>(l(),k(Z,{key:e.id,bid:e,"show-actions":ee.value,onAccept:he,onReject:ta},null,8,["bid","show-actions"]))),128))])):(l(),r("div",Mt,[t[33]||(t[33]=o("svg",{class:"mx-auto h-12 w-12 text-body",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t[34]||(t[34]=o("p",{class:"mt-2"},"Nenhuma proposta enviada ainda",-1)),ae.value?(l(),r("p",Bt,"Seja o primeiro a enviar uma proposta!")):s("",!0)])),"open"===S.value.status?(l(),r("div",Dt,[t[35]||(t[35]=o("svg",{class:"w-5 h-5 text-[#D4AF37] mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1)),o("div",null,[o("p",Ft,"üí¨ Chat com o "+n(ee.value?"vencedor":"contratante"),1),o("p",Et," O chat ser√° liberado automaticamente ap√≥s "+n(ee.value?"aceitar uma proposta":"sua proposta ser aceita")+". Voc√™ poder√° acess√°-lo na p√°gina de Contratos. ",1)])])):s("",!0)])]),o("div",zt,[o("div",$t,[t[37]||(t[37]=o("h3",{class:"text-lg font-semibold text-heading mb-4"},"Contratante",-1)),o("div",Rt,[o("div",Vt,n(ve(S.value.client_name)),1),o("div",null,[o("p",St,n(S.value.client_name),1),t[36]||(t[36]=o("p",{class:"text-sm text-body"},"Contratante",-1))])])]),o("div",Nt,[t[41]||(t[41]=o("h3",{class:"text-lg font-semibold text-heading mb-4"},"Estat√≠sticas",-1)),o("div",qt,[o("div",It,[t[38]||(t[38]=o("span",{class:"text-sm text-body"},"Propostas",-1)),o("span",Lt,n(S.value.bid_count||0),1)]),o("div",Ut,[t[39]||(t[39]=o("span",{class:"text-sm text-body"},"Orcamento M√©dio",-1)),o("span",Tt,n(ue(S.value.budget)),1)]),o("div",Ot,[t[40]||(t[40]=o("span",{class:"text-sm text-body"},"Status",-1)),i(M,{status:S.value.status},null,8,["status"])])])]),(null==(be=_(V).user)?void 0:be.id)===S.value.client_id?(l(),r("div",Ht,[t[43]||(t[43]=o("h3",{class:"text-lg font-semibold text-heading mb-4"},"Acoes",-1)),o("div",Kt,[t[42]||(t[42]=o("button",{class:"w-full px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-body bg-surface hover:bg-[#0F1117] transition-colors"}," Editar Projeto ",-1)),"open"===S.value.status&&N.value.length>0?(l(),r("button",{key:0,onClick:ra,disabled:J.value,class:"w-full px-4 py-2 border border-green-500 rounded-md text-sm font-medium text-green-700 bg-surface hover:bg-green-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},n(J.value?"Encerrando...":"üèÅ Encerrar Leilao e Selecionar Vencedor"),9,Jt)):s("",!0),"open"===S.value.status&&N.value.length>0?(l(),r("p",Wt," O vencedor ser√° o lance de menor valor ")):s("",!0),"open"===S.value.status?(l(),r("button",Gt," Cancelar Projeto ")):s("",!0)])])):s("",!0),"in_progress"===S.value.status&&ne.value?(l(),r("div",Qt,[t[44]||(t[44]=o("div",{class:"flex items-center space-x-2 mb-3"},[o("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),o("h3",{class:"text-lg font-semibold text-green-800"},"Vencedor do Leilao")],-1)),o("div",Xt,[o("div",Yt,n(ve(ne.value.provider_name)),1),o("div",null,[o("p",Zt,n(ne.value.provider_name),1),o("p",ea,n(ue(ne.value.amount)),1)])])])):s("",!0),"awarded"===S.value.status||"escrow_hold"===S.value.payment_status?(l(),k(ye,{key:2,"project-id":S.value.id,"payment-status":S.value.payment_status,"final-price":S.value.final_price||(null==(xe=ne.value)?void 0:xe.amount)||S.value.budget,"is-contractor":(null==(ge=_(V).user)?void 0:ge.id)===S.value.client_id,"provider-name":(null==(la=ne.value)?void 0:la.provider_name)||"o prestador",onPaymentReleased:aa},null,8,["project-id","payment-status","final-price","is-contractor","provider-name"])):s("",!0)])])):s("",!0)])])}}};export{ta as default};
