import{a as e,e as a,b as l,r as t,s as r,o as s,l as o,G as i,t as d,h as n,f as u,F as c,j as v,i as p,g,u as m,m as x}from"./vue-Cs7imW6x.js";import{r as f,_ as b}from"./ReviewList-0XVR-ERC.js";import{a as h}from"./index-CmAi4J-F.js";import"./utils-CeLII1lI.js";function y(t,r){return l(),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function w(t,r){return l(),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{d:"M10.464 8.746c.227-.18.497-.311.786-.394v2.795a2.252 2.252 0 0 1-.786-.393c-.394-.313-.546-.681-.546-1.004 0-.323.152-.691.546-1.004ZM12.75 15.662v-2.824c.347.085.664.228.921.421.427.32.579.686.579.991 0 .305-.152.671-.579.991a2.534 2.534 0 0 1-.921.42Z"}),a("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v.816a3.836 3.836 0 0 0-1.72.756c-.712.566-1.112 1.35-1.112 2.178 0 .829.4 1.612 1.113 2.178.502.4 1.102.647 1.719.756v2.978a2.536 2.536 0 0 1-.921-.421l-.879-.66a.75.75 0 0 0-.9 1.2l.879.66c.533.4 1.169.645 1.821.75V18a.75.75 0 0 0 1.5 0v-.81a4.124 4.124 0 0 0 1.821-.749c.745-.559 1.179-1.344 1.179-2.191 0-.847-.434-1.632-1.179-2.191a4.122 4.122 0 0 0-1.821-.75V8.354c.29.082.559.213.786.393l.415.33a.75.75 0 0 0 .933-1.175l-.415-.33a3.836 3.836 0 0 0-1.719-.755V6Z","clip-rule":"evenodd"})])}const k={class:"min-h-screen bg-page"},_={key:0,class:"max-w-5xl mx-auto px-4 py-8"},j={key:1,class:"max-w-5xl mx-auto px-4 py-8 space-y-6"},P={class:"bg-surface rounded-lg shadow-sm border border-gray-200 overflow-hidden"},Z={class:"px-8 pb-8"},C={class:"flex flex-col md:flex-row items-start md:items-end gap-6 -mt-16"},M={class:"flex-shrink-0"},$={key:1,class:"w-32 h-32 rounded-full border-4 border-white shadow-lg bg-gradient-to-br from-primary-400 to-accent-400 flex items-center justify-center text-white text-4xl font-bold"},E={class:"flex-1 mt-4"},S={class:"text-3xl font-bold text-heading mb-2"},V={key:0,class:"text-lg text-body mb-3"},I={class:"flex flex-wrap gap-4 text-sm text-body"},A={key:0,class:"flex items-center gap-1"},B={class:"font-semibold"},F={key:1,class:"flex items-center gap-1"},L={key:2,class:"flex items-center gap-1"},R={key:0,class:"bg-surface rounded-lg shadow-sm border border-gray-200 p-6"},G={class:"text-body whitespace-pre-wrap"},H={key:1,class:"bg-surface rounded-lg shadow-sm border border-gray-200 p-6"},N={class:"flex flex-wrap gap-2"},U={key:2,class:"bg-surface rounded-lg shadow-sm border border-gray-200 p-6"},q=["href"],z={class:"bg-surface rounded-lg shadow-sm border border-gray-200 p-6"},D={key:2,class:"max-w-5xl mx-auto px-4 py-16 text-center"},J={__name:"PublicProviderProfile",setup(J){const K=r(),O=m(),Q=t(K.params.id),T=t(null),W=t(null),X=t({rating:0,reviews_count:0,completed_contracts:0}),Y=t(!0),ee=()=>{O.push(`/projects/new?provider=${Q.value}`)};return s(()=>{(async()=>{Y.value=!0;try{const{data:a}=await h.get(`/users/${Q.value}`);if(T.value=a.user,"provider"!==a.user.user_type)throw new Error("Não é um prestador");try{const e=await h.get(`/users/${Q.value}/profile`);W.value=e.data.profile}catch(e){console.log("Profile not found, using basic info")}try{const e=await h.get("/reviews",{params:{user_id:Q.value,limit:1}});X.value.reviews_count=e.data.pagination.total,X.value.rating=e.data.pagination.avg_rating||0}catch(e){console.log("Stats not available")}}catch(a){console.error("Error loading provider:",a),T.value=null}finally{Y.value=!1}})()}),(t,r)=>{var s,m,h,J,K,O,ae;const le=g("router-link");return l(),e("div",k,[Y.value?(l(),e("div",_,[...r[0]||(r[0]=[a("div",{class:"animate-pulse space-y-6"},[a("div",{class:"h-48 bg-gray-200 rounded-lg"}),a("div",{class:"h-32 bg-gray-200 rounded-lg"}),a("div",{class:"h-64 bg-gray-200 rounded-lg"})],-1)])])):T.value?(l(),e("div",j,[a("div",P,[r[1]||(r[1]=a("div",{class:"h-32 bg-gradient-to-r from-primary-500 to-accent-500"},null,-1)),a("div",Z,[a("div",C,[a("div",M,[T.value.avatar?(l(),e("div",{key:0,class:"w-32 h-32 rounded-full border-4 border-white shadow-lg bg-cover bg-center",style:i({backgroundImage:`url(${T.value.avatar})`})},null,4)):(l(),e("div",$,d(null==(s=T.value.name)?void 0:s.charAt(0).toUpperCase()),1))]),a("div",E,[a("h1",S,d(T.value.name),1),(null==(m=W.value)?void 0:m.title)?(l(),e("p",V,d(W.value.title),1)):o("",!0),a("div",I,[X.value.rating>0?(l(),e("div",A,[n(u(f),{class:"w-5 h-5 text-yellow-400 fill-yellow-400"}),a("span",B,d(X.value.rating.toFixed(1)),1),a("span",null,"("+d(X.value.reviews_count)+" avaliações)",1)])):o("",!0),X.value.completed_contracts?(l(),e("div",F,[n(u(y),{class:"w-5 h-5 text-green-500"}),a("span",null,d(X.value.completed_contracts)+" projetos concluídos",1)])):o("",!0),(null==(h=W.value)?void 0:h.hourly_rate)?(l(),e("div",L,[n(u(w),{class:"w-5 h-5 text-primary-500"}),a("span",null,"R$ "+d(W.value.hourly_rate)+"/hora",1)])):o("",!0)])]),a("div",{class:"flex-shrink-0"},[a("button",{onClick:ee,class:"px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition"}," Contratar ")])])])]),(null==(J=W.value)?void 0:J.bio)?(l(),e("div",R,[r[2]||(r[2]=a("h2",{class:"text-xl font-bold text-heading mb-4"},"Sobre",-1)),a("p",G,d(W.value.bio),1)])):o("",!0),(null==(O=null==(K=W.value)?void 0:K.skills)?void 0:O.length)?(l(),e("div",H,[r[3]||(r[3]=a("h2",{class:"text-xl font-bold text-heading mb-4"},"Habilidades",-1)),a("div",N,[(l(!0),e(c,null,v(W.value.skills,a=>(l(),e("span",{key:a,class:"px-4 py-2 bg-primary-50 text-primary-700 rounded-full text-sm font-medium"},d(a),1))),128))])])):o("",!0),(null==(ae=W.value)?void 0:ae.portfolio_url)?(l(),e("div",U,[r[4]||(r[4]=a("h2",{class:"text-xl font-bold text-heading mb-4"},"Portfólio",-1)),a("a",{href:W.value.portfolio_url,target:"_blank",class:"text-primary-600 hover:text-primary-700 font-medium"},d(W.value.portfolio_url),9,q)])):o("",!0),a("div",z,[r[5]||(r[5]=a("h2",{class:"text-xl font-bold text-heading mb-6"},"Avaliações",-1)),n(b,{userId:Q.value},null,8,["userId"])])])):(l(),e("div",D,[r[7]||(r[7]=a("h2",{class:"text-2xl font-bold text-heading mb-2"},"Perfil não encontrado",-1)),r[8]||(r[8]=a("p",{class:"text-body mb-6"},"Este prestador não existe ou foi removido.",-1)),n(le,{to:"/projects",class:"text-primary-600 hover:text-primary-700 font-medium"},{default:p(()=>[...r[6]||(r[6]=[x(" Ver projetos ",-1)])]),_:1})]))])}}};export{J as default};
