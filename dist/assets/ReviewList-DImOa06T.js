import{a as e}from"./index-GrC-7x6E.js";import{a,e as t,b as l,r as s,c as r,o as i,j as o,h as d,f as n,t as v,F as c,l as u,n as g,q as m,H as y}from"./vue-DDtQ7Z_H.js";function p(e,s){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z","clip-rule":"evenodd"})])}const f={class:"space-y-4"},x={key:0,class:"bg-gradient-to-r from-primary-50 to-accent-50 rounded-lg p-6 border border-primary-200"},w={class:"flex items-center justify-between"},b={class:"flex items-center gap-2 mb-1"},h={class:"text-3xl font-bold text-gray-900"},k={class:"text-sm text-gray-600"},_={class:"text-right"},j={class:"flex gap-1 mb-1"},R={key:1,class:"space-y-4"},I={key:2,class:"space-y-4"},C={class:"flex items-start gap-4"},L={class:"flex-shrink-0"},M={key:1,class:"w-12 h-12 rounded-full bg-gradient-to-br from-primary-400 to-accent-400 flex items-center justify-center text-white font-bold"},S={class:"flex-1 min-w-0"},q={class:"flex items-start justify-between mb-2"},B={class:"font-semibold text-gray-900"},D={class:"text-sm text-gray-500"},F={class:"flex gap-0.5"},N={key:0,class:"text-gray-700 whitespace-pre-wrap"},$={key:3,class:"text-center py-12"},A={key:4,class:"text-center pt-4"},E={__name:"ReviewList",props:{userId:{type:[String,Number],required:!0}},setup(E,{expose:H}){const U=E,Z=s([]),z=s(!1),G=s(null),J=s({total:0,limit:10,offset:0}),K=r(()=>J.value.offset+Z.value.length<J.value.total),O=async(a=!1)=>{z.value=!0;try{const{data:t}=await e.get(`/reviews-simple/user/${U.userId}`,{params:{limit:J.value.limit,offset:a?J.value.offset:0}});Z.value=a?[...Z.value,...t.data.reviews]:t.data.reviews,J.value={total:t.data.totalReviews,limit:parseInt(t.pagination.limit),offset:parseInt(t.pagination.offset)},G.value={total:t.data.totalReviews,average:t.data.avgRating||0}}catch(t){console.error("Error loading reviews:",t)}finally{z.value=!1}},P=()=>{J.value.offset+=J.value.limit,O(!0)};return i(()=>{O()}),H({loadReviews:O}),(e,s)=>(l(),a("div",f,[G.value?(l(),a("div",x,[t("div",w,[t("div",null,[t("div",b,[d(n(p),{class:"w-8 h-8 text-yellow-400 fill-yellow-400"}),t("span",h,v(G.value.average.toFixed(1)),1)]),t("p",k,v(G.value.total)+" avaliações",1)]),t("div",_,[t("div",j,[(l(),a(c,null,u(5,e=>d(n(p),{key:e,class:g(["w-5 h-5",e<=Math.round(G.value.average)?"text-yellow-400 fill-yellow-400":"text-gray-300"])},null,8,["class"])),64))]),s[0]||(s[0]=t("p",{class:"text-xs text-gray-500"},"Média geral",-1))])])])):o("",!0),z.value?(l(),a("div",R,[(l(),a(c,null,u(3,e=>t("div",{key:e,class:"animate-pulse"},[...s[1]||(s[1]=[m('<div class="bg-white rounded-lg border border-gray-200 p-6"><div class="flex items-start gap-4"><div class="w-12 h-12 bg-gray-200 rounded-full"></div><div class="flex-1 space-y-3"><div class="h-4 bg-gray-200 rounded w-1/4"></div><div class="h-4 bg-gray-200 rounded w-3/4"></div><div class="h-4 bg-gray-200 rounded w-1/2"></div></div></div></div>',1)])])),64))])):Z.value.length>0?(l(),a("div",I,[(l(!0),a(c,null,u(Z.value,e=>{var s,r;return l(),a("div",{key:e.id,class:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition"},[t("div",C,[t("div",L,[e.reviewer_avatar?(l(),a("div",{key:0,class:"w-12 h-12 rounded-full bg-cover bg-center",style:y({backgroundImage:`url(${e.reviewer_avatar})`})},null,4)):(l(),a("div",M,v(null==(s=e.reviewer_name)?void 0:s.charAt(0).toUpperCase()),1))]),t("div",S,[t("div",q,[t("div",null,[t("h4",B,v(e.reviewer_name),1),t("p",D,v((r=e.created_at,new Date(r).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}))),1)]),t("div",F,[(l(),a(c,null,u(5,a=>d(n(p),{key:a,class:g(["w-5 h-5",a<=e.rating?"text-yellow-400 fill-yellow-400":"text-gray-300"])},null,8,["class"])),64))])]),e.comment?(l(),a("p",N,v(e.comment),1)):o("",!0)])])])}),128))])):(l(),a("div",$,[d(n(p),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s[2]||(s[2]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Nenhuma avaliação ainda",-1)),s[3]||(s[3]=t("p",{class:"text-gray-600"},"Seja o primeiro a avaliar!",-1))])),K.value&&!z.value?(l(),a("div",A,[t("button",{onClick:P,class:"px-6 py-2 text-primary-600 font-medium hover:bg-primary-50 rounded-lg transition"}," Carregar mais ")])):o("",!0)]))}};export{E as _,p as r};
