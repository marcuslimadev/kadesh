import{r as a,o as s,m as t,i as e,u as n,b as i,a as d,e as l,t as o,p as r,F as c,l as m,n as v}from"./vue-NU_yXd1p.js";import{_ as u,a as p}from"./index-FOjKMSjo.js";import{A as g}from"./AdminLayout-xH_6EQOs.js";import"./utils-CeLII1lI.js";const h={key:0,class:"text-center py-12"},f={key:1},y={class:"admin-stats-grid mb-8"},b={class:"admin-stat-card admin-stat-card-primary"},x={class:"admin-stat-content"},k={class:"admin-stat-info"},j={class:"admin-stat-value"},w={class:"admin-stat-meta"},_={class:"admin-stat-footer"},M={class:"font-medium"},P={class:"font-medium"},A={class:"admin-stat-card admin-stat-card-success"},C={class:"admin-stat-content"},B={class:"admin-stat-info"},R={class:"admin-stat-value"},V={class:"admin-stat-meta"},z={class:"admin-stat-footer"},F={class:"font-medium"},T={class:"font-medium"},D={class:"admin-stat-card admin-stat-card-secondary"},I={class:"admin-stat-content"},$={class:"admin-stat-info"},H={class:"admin-stat-value"},U={class:"admin-stat-meta"},E={class:"admin-stat-footer"},S={class:"font-medium"},K={class:"font-medium"},L={class:"admin-stat-card admin-stat-card-warning"},N={class:"admin-stat-content"},q={class:"admin-stat-info"},G={class:"admin-stat-value"},J={class:"admin-stat-meta"},O={class:"admin-stat-footer"},Q={class:"font-medium"},W={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},X={class:"admin-card"},Y={class:"admin-card-body"},Z={class:"space-y-3"},aa={class:"font-medium admin-text-primary"},sa={class:"admin-text-xs admin-text-secondary"},ta={class:"admin-card"},ea={class:"admin-card-body"},na={class:"space-y-3"},ia={class:"flex items-start justify-between"},da={class:"flex-1"},la={class:"font-medium admin-text-primary"},oa={class:"admin-text-xs admin-text-secondary mt-1"},ra={class:"admin-text-sm font-bold text-amber-400"},ca=u({__name:"AdminDashboard",setup(u){const ca=n(),ma=a(!0),va=a({}),ua=()=>{const a=localStorage.getItem("adminToken")||localStorage.getItem("kadesh_token");return a?{Authorization:`Bearer ${a}`}:{}},pa=a=>new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a);return s(()=>{(async()=>{var a;try{const a=await p.get("/api/admin/stats/dashboard",{headers:ua()});a.data.success&&(va.value=a.data.data)}catch(s){console.error("Error fetching dashboard stats:",s),401===(null==(a=s.response)?void 0:a.status)&&ca.push("/admin/login")}finally{ma.value=!1}})()}),(a,s)=>(i(),t(g,null,{header:e(()=>[...s[0]||(s[0]=[l("div",null,[l("h1",{class:"admin-heading-1"},"Dashboard Administrativo"),l("p",{class:"admin-text-secondary mt-2"},"Visão geral da plataforma Kadesh")],-1)])]),default:e(()=>{var a,t,e,n,u,p,g,ca,ua,ga,ha,fa,ya,ba,xa;return[ma.value?(i(),d("div",h,[...s[1]||(s[1]=[l("div",{class:"admin-spinner-lg"},null,-1),l("p",{class:"mt-4 admin-text-secondary"},"Carregando estatísticas...",-1)])])):(i(),d("div",f,[l("div",y,[l("div",b,[l("div",x,[l("div",k,[s[2]||(s[2]=l("p",{class:"admin-stat-label"},"Total de Usuários",-1)),l("p",j,o((null==(a=va.value.users)?void 0:a.total)||0),1),l("p",w,o((null==(t=va.value.users)?void 0:t.new_this_month)||0)+" novos este mês ",1)]),s[3]||(s[3]=l("div",{class:"admin-stat-icon admin-stat-icon-primary"},[l("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})])],-1))]),l("div",_,[l("span",M,o((null==(e=va.value.users)?void 0:e.clients)||0),1),s[4]||(s[4]=r(" Contratantes • ",-1)),l("span",P,o((null==(n=va.value.users)?void 0:n.providers)||0),1),s[5]||(s[5]=r(" Prestadores ",-1))])]),l("div",A,[l("div",C,[l("div",B,[s[6]||(s[6]=l("p",{class:"admin-stat-label"},"Total de Projetos",-1)),l("p",R,o((null==(u=va.value.projects)?void 0:u.total)||0),1),l("p",V,o((null==(p=va.value.projects)?void 0:p.new_this_month)||0)+" novos este mês ",1)]),s[7]||(s[7]=l("div",{class:"admin-stat-icon admin-stat-icon-success"},[l("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))]),l("div",z,[l("span",F,o((null==(g=va.value.projects)?void 0:g.open)||0),1),s[8]||(s[8]=r(" Abertos • ",-1)),l("span",T,o((null==(ca=va.value.projects)?void 0:ca.in_progress)||0),1),s[9]||(s[9]=r(" Em andamento ",-1))])]),l("div",D,[l("div",I,[l("div",$,[s[10]||(s[10]=l("p",{class:"admin-stat-label"},"Total de Propostas",-1)),l("p",H,o((null==(ua=va.value.bids)?void 0:ua.total)||0),1),l("p",U,o((null==(ga=va.value.bids)?void 0:ga.new_this_month)||0)+" novas este mês ",1)]),s[11]||(s[11]=l("div",{class:"admin-stat-icon admin-stat-icon-secondary"},[l("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1))]),l("div",E,[l("span",S,o((null==(ha=va.value.bids)?void 0:ha.pending)||0),1),s[12]||(s[12]=r(" Pendentes • ",-1)),l("span",K,o((null==(fa=va.value.bids)?void 0:fa.accepted)||0),1),s[13]||(s[13]=r(" Aceitas ",-1))])]),l("div",L,[l("div",N,[l("div",q,[s[14]||(s[14]=l("p",{class:"admin-stat-label"},"Volume de Pagamentos",-1)),l("p",G," R$ "+o(pa((null==(ya=va.value.payments)?void 0:ya.total_amount)||0)),1),l("p",J,o((null==(ba=va.value.payments)?void 0:ba.total)||0)+" transações ",1)]),s[15]||(s[15]=l("div",{class:"admin-stat-icon admin-stat-icon-warning"},[l("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))]),l("div",O,[s[16]||(s[16]=r(" Taxas: ",-1)),l("span",Q,"R$ "+o(pa((null==(xa=va.value.payments)?void 0:xa.total_fees)||0)),1)])])]),l("div",W,[l("div",X,[s[17]||(s[17]=l("div",{class:"admin-card-header"},[l("h3",{class:"admin-heading-3"},"Usuários Recentes")],-1)),l("div",Y,[l("div",Z,[(i(!0),d(c,null,m(va.value.recentUsers,a=>(i(),d("div",{key:a.email,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[l("div",null,[l("p",aa,o(a.name),1),l("p",sa,o(a.email),1)]),l("span",{class:v(["admin-badge","client"===a.type?"admin-badge-primary":"admin-badge-success"])},o("client"===a.type?"Contratante":"Prestador"),3)]))),128))])])]),l("div",ta,[s[18]||(s[18]=l("div",{class:"admin-card-header"},[l("h3",{class:"admin-heading-3"},"Projetos Recentes")],-1)),l("div",ea,[l("div",na,[(i(!0),d(c,null,m(va.value.recentProjects,a=>(i(),d("div",{key:a.id,class:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[l("div",ia,[l("div",da,[l("p",la,o(a.title),1),l("p",oa,"Por: "+o(a.client_name),1)]),l("span",ra," R$ "+o(pa(a.budget)),1)])]))),128))])])])])]))]}),_:1}))}},[["__scopeId","data-v-166974fc"]]);export{ca as default};
