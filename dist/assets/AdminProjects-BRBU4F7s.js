import{r as e,o as t,a,e as s,h as r,i as o,g as l,B as d,C as n,K as i,q as m,F as u,k as c,f as p,j as x,u as g,b as y,m as v,t as b,n as f}from"./vue-n9kv2shB.js";import{p as h}from"./projectService-Da_8BIZR.js";import{a as w}from"./index-CCHv34OP.js";import"./utils-CeLII1lI.js";const k={class:"min-h-screen bg-gray-100"},j={class:"bg-white shadow-lg border-b border-gray-200"},_={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},C={class:"flex justify-between h-16"},S={class:"flex items-center"},A={class:"hidden md:ml-10 md:flex md:space-x-4"},B={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},I={class:"bg-white rounded-xl shadow-md p-6 mb-6"},P={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},T=["value"],U={class:"bg-white rounded-xl shadow-md overflow-hidden"},D={key:0,class:"text-center py-12"},E={key:1,class:"overflow-x-auto"},L={class:"min-w-full divide-y divide-gray-200"},R={class:"bg-white divide-y divide-gray-200"},V={class:"px-6 py-4"},z={class:"text-sm font-medium text-gray-900"},F={class:"text-xs text-gray-500"},K={class:"px-6 py-4 text-sm text-gray-600"},N={class:"px-6 py-4"},q={class:"px-6 py-4 text-sm text-gray-600"},G={class:"px-6 py-4 text-sm text-gray-600"},O={key:0,class:"text-center py-12 text-gray-500"},$={__name:"AdminProjects",setup($){const H=g(),J=e(!0),M=e([]),Q=e({search:"",status:"",category:""}),W=h.getCategories(),X=e({page:1,limit:20,total:0,pages:0}),Y=()=>{const e=localStorage.getItem("adminToken")||localStorage.getItem("kadesh_token");return e?{Authorization:`Bearer ${e}`}:{}},Z=async()=>{try{J.value=!0;const e={page:X.value.page,per_page:X.value.limit,search:Q.value.search,status:Q.value.status,category:Q.value.category},t=await w.get("/api/admin/projects",{params:e,headers:Y()});t.data.success&&(M.value=t.data.data,X.value=t.data.pagination)}catch(e){console.error("Error fetching projects:",e)}finally{J.value=!1}},ee=()=>{Q.value={search:"",status:"",category:""},X.value.page=1,Z()},te=e=>({open:"Aberto",in_progress:"Em andamento",completed:"Concluido",cancelled:"Cancelado"}[e]||e),ae=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),H.push("/admin/login")};return t(()=>{Z()}),(e,t)=>{const g=l("router-link");return y(),a("div",k,[s("nav",j,[s("div",_,[s("div",C,[s("div",S,[t[10]||(t[10]=s("h1",{class:"text-2xl font-bold text-amber-600"},"Kaddesh Admin",-1)),s("div",A,[r(g,{to:"/admin/dashboard",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"},{default:o(()=>[...t[3]||(t[3]=[v("Dashboard",-1)])]),_:1}),r(g,{to:"/admin/users",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"},{default:o(()=>[...t[4]||(t[4]=[v("Usuários",-1)])]),_:1}),r(g,{to:"/admin/projects",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-900 bg-gray-100"},{default:o(()=>[...t[5]||(t[5]=[v("Projetos",-1)])]),_:1}),r(g,{to:"/admin/payments",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"},{default:o(()=>[...t[6]||(t[6]=[v("Pagamentos",-1)])]),_:1}),r(g,{to:"/admin/disputes",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"},{default:o(()=>[...t[7]||(t[7]=[v("Disputas",-1)])]),_:1}),r(g,{to:"/admin/advertisements",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"},{default:o(()=>[...t[8]||(t[8]=[v("Anúncios",-1)])]),_:1}),r(g,{to:"/admin/settings",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100"},{default:o(()=>[...t[9]||(t[9]=[v("Configurações",-1)])]),_:1})])]),s("div",{class:"flex items-center"},[s("button",{onClick:ae,class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium"},"Sair")])])])]),s("div",B,[t[18]||(t[18]=s("h2",{class:"text-3xl font-bold text-gray-900 mb-6"},"Gerenciar Projetos",-1)),s("div",I,[s("div",P,[s("div",null,[t[11]||(t[11]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Buscar",-1)),d(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>Q.value.search=e),onInput:Z,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Titulo ou descricao..."},null,544),[[n,Q.value.search]])]),s("div",null,[t[13]||(t[13]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),d(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>Q.value.status=e),onChange:Z,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},[...t[12]||(t[12]=[m('<option value="">Todos</option><option value="open">Aberto</option><option value="in_progress">Em andamento</option><option value="completed">Concluido</option><option value="cancelled">Cancelado</option>',5)])],544),[[i,Q.value.status]])]),s("div",null,[t[15]||(t[15]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Categoria",-1)),d(s("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>Q.value.category=e),onChange:Z,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},[t[14]||(t[14]=s("option",{value:""},"Todas",-1)),(y(!0),a(u,null,c(p(W),e=>(y(),a("option",{key:e.value,value:e.value},b(e.label),9,T))),128))],544),[[i,Q.value.category]])]),s("div",{class:"flex items-end"},[s("button",{onClick:ee,class:"w-full px-4 py-2 border border-gray-300 rounded-md text-sm font-medium"}," Limpar filtros ")])])]),s("div",U,[J.value?(y(),a("div",D,[...t[16]||(t[16]=[s("div",{class:"inline-block animate-spin rounded-full h-10 w-10 border-b-2 border-amber-600"},null,-1),s("p",{class:"mt-4 text-gray-600"},"Carregando projetos...",-1)])])):(y(),a("div",E,[s("table",L,[t[17]||(t[17]=s("thead",{class:"bg-gray-50"},[s("tr",null,[s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Projeto"),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Contratante"),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Orcamento"),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Criado em")])],-1)),s("tbody",R,[(y(!0),a(u,null,c(M.value,e=>{return y(),a("tr",{key:e.id},[s("td",V,[s("div",z,b(e.title),1),s("div",F,b(e.category||"-"),1)]),s("td",K,b(e.client_name||"-"),1),s("td",N,[s("span",{class:f(["px-2 py-1 text-xs font-semibold rounded-full",(o=e.status,{open:"bg-green-100 text-green-800",in_progress:"bg-amber-100 text-amber-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"}[o]||"bg-gray-100 text-gray-800")])},b(te(e.status)),3)]),s("td",q,b((r=e.budget,r||0===r?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r):"A combinar")),1),s("td",G,b((t=e.created_at,t?new Date(t).toLocaleDateString("pt-BR"):"-")),1)]);var t,r,o}),128))])]),0===M.value.length?(y(),a("div",O," Nenhum projeto encontrado ")):x("",!0)]))])])])}}};export{$ as default};
