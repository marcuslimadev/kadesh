const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-KxHZC3jW.js","assets/vue-DDtQ7Z_H.js","assets/utils-CeLII1lI.js","assets/Tutorial-nbDna1O0.js","assets/AuctionLobby-BLqAdpQA.js","assets/projectService-BHpKJd_c.js","assets/Login-hbc37YV0.js","assets/Register-DAZciU6u.js","assets/ForgotPassword-TKXY5mpK.js","assets/ResetPassword-fw19iIkA.js","assets/Dashboard-CAEMUX0H.js","assets/StatusBadge-DHup6cxz.js","assets/index-Ctu0mvSg.js","assets/Projects-BMPUBkB4.js","assets/Pagination-DY4WjV3X.js","assets/ProjectDetail--QV_z-gV.js","assets/bidService-CtG1E9QY.js","assets/CreateProject-CpE-EGXy.js","assets/MyProjects-M06YNfAw.js","assets/MyBids-lCyJ0wxd.js","assets/ProviderProfile-C-JE7FFm.js","assets/ReviewList-Pye8RyHG.js","assets/PublicProviderProfile-tAOQW0FM.js","assets/Wallet-C6jkvx5e.js","assets/Receipts-B-jFPhru.js","assets/Contracts-C2fbNURh.js","assets/ContractDetail-BB4zdU6m.js","assets/Settings-b26tUtr3.js","assets/Notifications-CKEZJhVs.js","assets/AdminLogin-B_ZZF5y4.js","assets/AdminDashboard-C7onAWNB.js","assets/AdminLayout-B-leafcR.js","assets/AdminUsers-DvBp8Dgz.js","assets/AdminProjects-tGCamMHn.js","assets/AdminPayments-BkJzG2hJ.js","assets/AdminDisputes-ClgpHtje.js","assets/AdminAdvertisements-BZYZSKML.js","assets/AdminSettings-C6swJ64d.js"])))=>i.map(i=>d[i]);
import{d as e,r as t,c as o,w as r,u as s,o as a,a as n,b as l,e as i,n as d,f as c,t as u,s as m,g as p,h,i as v,j as f,k as g,F as b,l as _,m as k,p as w,T as x,q as y,v as A,x as j,y as E,z as P,A as C}from"./vue-DDtQ7Z_H.js";import{a as I}from"./utils-CeLII1lI.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const M=I.create({baseURL:"",timeout:parseInt("30000")||6e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});M.interceptors.request.use(e=>{const t=localStorage.getItem("kadesh_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),M.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&console.warn("[API] 401 Unauthorized recebido"),Promise.reject(e)));const S="kadesh_view_mode",D=e("viewMode",()=>{const e=t((()=>{if("undefined"==typeof window)return"contractor";try{return localStorage.getItem(S)||"contractor"}catch{return"contractor"}})()),r=o(()=>"contractor"===e.value),s=o(()=>"provider"===e.value),a=o(()=>"contractor"===e.value?"Contratante":"Prestador"),n=o(()=>"contractor"===e.value?"C":"P"),l=o(()=>"contractor"===e.value?"blue":"green"),i=t=>{"contractor"===t||"provider"===t?(e.value=t,(e=>{if("undefined"!=typeof window)try{localStorage.setItem(S,e)}catch{}})(t)):console.error('Modo invÃ¡lido. Use "contractor" ou "provider"')};return{currentMode:e,isContractor:r,isProvider:s,modeLabel:a,modeIcon:n,modeColor:l,setMode:i,toggleMode:()=>{const t="contractor"===e.value?"provider":"contractor";i(t)},setContractorMode:()=>i("contractor"),setProviderMode:()=>i("provider")}}),L=()=>{if("undefined"==typeof window)return console.log("[Auth] isSessionValid: window undefined"),!1;let e=localStorage.getItem("kadesh_token"),t=localStorage.getItem("kadesh_session_expires");if(console.log("[Auth] isSessionValid check:",{hasToken:!!e,tokenLength:(null==e?void 0:e.length)||0,expiresAt:t,expiresDate:t?new Date(parseInt(t)).toLocaleString("pt-BR"):"N/A"}),!e)return console.warn("[Auth] isSessionValid: FALSE - token ou expiresAt ausente"),!1;if(!t){t=String(Date.now()+144e5);try{localStorage.setItem("kadesh_session_expires",t)}catch{}}const o=Date.now(),r=parseInt(t,10),s=o<r;if(s){const e=((r-o)/36e5).toFixed(2);console.log(`[Auth] isSessionValid: TRUE - vÃ¡lida por ${e}h`)}else console.warn("[Auth] isSessionValid: FALSE - sessÃ£o expirada",{now:new Date(o).toLocaleString("pt-BR"),expires:new Date(r).toLocaleString("pt-BR")});return s},V=()=>{if("undefined"==typeof window)return;const e=Date.now()+144e5;localStorage.setItem("kadesh_session_expires",e.toString()),console.log("[Auth] SessÃ£o renovada por 4 horas")},T=e("auth",()=>{const e=t(null),r=t(localStorage.getItem("kadesh_token")),s=t(!1),a=o(()=>!!r.value&&L()),n=o(()=>{var t;return"client"===(null==(t=e.value)?void 0:t.type)}),l=o(()=>{var t,o;return"provider"===(null==(t=e.value)?void 0:t.type)||"unified"===(null==(o=e.value)?void 0:o.type)}),i=o(()=>{var t,o;return!0===(null==(t=e.value)?void 0:t.isAdmin)||"admin"===(null==(o=e.value)?void 0:o.type)}),d=o(()=>{var t;return(null==(t=e.value)?void 0:t.name)?e.value.name.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):""}),c=e=>{var t;try{const o=D(),r=null==e?void 0:e.type,s=(null==(t=o.currentMode)?void 0:t.value)||o.currentMode;"provider"===r&&"contractor"===s&&o.setProviderMode(),"client"===r&&"provider"===s&&o.setContractorMode()}catch(o){console.warn("[Auth] Erro ao sincronizar modo de visualizaÃ§Ã£o",o)}},u=()=>{e.value=null,r.value=null,localStorage.removeItem("kadesh_token"),localStorage.removeItem("kadesh_user"),localStorage.removeItem("kadesh_session_expires"),M.defaults.headers.common&&delete M.defaults.headers.common.Authorization},m=()=>{if(!L())return void u();const t=localStorage.getItem("kadesh_user"),o=localStorage.getItem("kadesh_token");if(t&&o)try{e.value=JSON.parse(t),r.value=o,M.defaults.headers.common&&(M.defaults.headers.common.Authorization=`Bearer ${o}`),c(e.value)}catch(s){u()}};return m(),{user:e,token:r,isLoading:s,isAuthenticated:a,isClient:n,isProvider:l,isAdmin:i,userInitials:d,login:async(t,o)=>{var a,n,l,i;s.value=!0;try{const s=await M.post("/api/auth/login",new URLSearchParams({email:t,password:o}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}),{user:a,token:n}=s.data;return e.value=a,r.value=n,localStorage.setItem("kadesh_token",n),localStorage.setItem("kadesh_user",JSON.stringify(a)),V(),M.defaults.headers.common&&(M.defaults.headers.common.Authorization=`Bearer ${n}`),c(a),{success:!0,user:a}}catch(d){return console.error("[Auth] Erro ao fazer login:",(null==(n=null==(a=d.response)?void 0:a.data)?void 0:n.error)||d.message),{success:!1,error:(null==(i=null==(l=d.response)?void 0:l.data)?void 0:i.error)||"Erro ao fazer login"}}finally{s.value=!1}},register:async t=>{var o,a;s.value=!0;try{const o=await M.post("/api/auth/register",new URLSearchParams({name:((null==t?void 0:t.name)||""),email:((null==t?void 0:t.email)||""),password:((null==t?void 0:t.password)||""),user_type:((null==t?void 0:t.user_type)||(null==t?void 0:t.type)||"both")}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}),{user:s,token:a}=o.data;return e.value=s,r.value=a,localStorage.setItem("kadesh_token",a),localStorage.setItem("kadesh_user",JSON.stringify(s)),V(),M.defaults.headers.common&&(M.defaults.headers.common.Authorization=`Bearer ${a}`),c(s),{success:!0,user:s}}catch(n){return console.error("[Auth] Erro ao registrar:",n),{success:!1,error:(null==(a=null==(o=n.response)?void 0:o.data)?void 0:a.error)||"Erro ao criar conta"}}finally{s.value=!1}},logout:u,verifyToken:async()=>{if(!L())return u(),!1;if(r.value&&!e.value){const o=localStorage.getItem("kadesh_user");if(o)try{e.value=JSON.parse(o),c(e.value)}catch(t){return u(),!1}}return V(),!0},updateProfile:async t=>{var o,r;s.value=!0;try{const o=await M.put("/api/users/profile",t);return e.value=o.data.user,localStorage.setItem("kadesh_user",JSON.stringify(o.data.user)),{success:!0,user:o.data.user}}catch(a){return{success:!1,error:(null==(r=null==(o=a.response)?void 0:o.data)?void 0:r.error)||"Erro ao atualizar perfil"}}finally{s.value=!1}},initializeAuth:m}}),O="kadesh_theme",R=e("theme",()=>{const e=t((()=>{if("undefined"==typeof window)return"light";try{const e=localStorage.getItem(O);return e||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}catch(e){return console.warn("NÃ£o foi possÃ­vel restaurar o tema salvo:",e),"light"}})()),s=o(()=>"dark"===e.value),a=o(()=>"light"===e.value),n=()=>{if("undefined"==typeof document)return;const t=document.documentElement;t.classList.remove("theme-dark","theme-light"),t.classList.add(`theme-${e.value}`)},l=t=>{e.value="dark"===t?"dark":"light",(e=>{if("undefined"!=typeof window)try{localStorage.setItem(O,e)}catch(t){console.warn("NÃ£o foi possÃ­vel salvar o tema selecionado:",t)}})(e.value)};return r(()=>{n()}),{currentTheme:e,isDark:s,isLight:a,toggleTheme:()=>{l(s.value?"light":"dark")},setTheme:l,applyTheme:n}}),q=e("sidebar",()=>{const e=t(!0);return{isVisible:e,show:()=>{e.value=!0},hide:()=>{e.value=!0},toggle:()=>{e.value=!0}}}),z="/dist/assets/logo-0SHYoDMy.png",B=(e,t)=>{const o=e.__vccOpts||e;for(const[r,s]of t)o[r]=s;return o},H={class:"md:hidden flex items-center justify-center"},N={class:"text-xl transition-transform duration-500"},$={class:"text-sm"},F=B({__name:"ViewModeSwitch",props:{variant:{type:String,default:"default"}},setup(e){const r=e,m=o(()=>"sidebar"===r.variant),p=D(),h=t(!1),v=s();a(()=>{if("undefined"==typeof window)return;const e=parseInt(localStorage.getItem("kadesh_viewmode_tooltip_count")||"0");e<3&&(h.value=!0,localStorage.setItem("kadesh_viewmode_tooltip_count",(e+1).toString()),setTimeout(()=>{h.value=!1},5e3))});const f=e=>{p.setMode(e);const t={name:"auction-lobby",query:{mode:e,ts:Date.now()}};("auction-lobby"===v.currentRoute.value.name?v.replace:v.push)(t).catch(()=>{})};return(e,t)=>(l(),n("div",{class:d(["view-mode-switch",m.value?"view-mode-switch--sidebar":""])},[i("div",{class:d(["hidden md:flex items-center rounded-full transition-all duration-500","vm-shell",m.value?"vm-shell--sidebar":"vm-shell--inline"])},[i("button",{onClick:t[0]||(t[0]=e=>f("contractor")),class:d(["vm-pill",m.value?"vm-pill--sidebar":"vm-pill--inline",c(p).isContractor?"vm-pill--active":"vm-pill--inactive"])},[i("span",{class:d(["text-lg transition-transform duration-500",c(p).isContractor?"scale-110":""])},"ðŸ“˜",2),t[3]||(t[3]=i("span",{class:"text-sm font-semibold"},"Contratante",-1))],2),i("button",{onClick:t[1]||(t[1]=e=>f("provider")),class:d(["vm-pill",m.value?"vm-pill--sidebar":"vm-pill--inline",c(p).isProvider?"vm-pill--active":"vm-pill--inactive"])},[i("span",{class:d(["text-lg transition-transform duration-500",c(p).isProvider?"scale-110":""])},"ðŸ› ï¸",2),t[4]||(t[4]=i("span",{class:"text-sm font-semibold"},"Prestador",-1))],2)],2),i("div",H,[i("button",{onClick:t[2]||(t[2]=e=>(()=>{const e=p.isContractor?"provider":"contractor";f(e)})()),class:"vm-pill vm-pill--mobile"},[i("span",N,u(c(p).modeIcon),1),i("span",$,"Ver como "+u(c(p).modeLabel),1),(l(),n("svg",{class:d(["w-4 h-4 transition-transform duration-700",c(p).isProvider?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[5]||(t[5]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"},null,-1)])],2))])])],2))}},[["__scopeId","data-v-474cc0e4"]]),K={class:"sticky top-0 z-40 bg-nav text-offwhite flex md:hidden items-center justify-between px-4 py-3 shadow-lg"},U=["src"],J={class:"h-6 w-6 text-offwhite",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},W={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},Y={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},G={class:"absolute top-0 right-0 w-72 h-full sidebar-drawer p-4 overflow-y-auto"},Q={class:"flex items-center justify-between mb-4"},X=["src"],Z={key:0,class:"mb-4"},ee={class:"sidebar-switch"},te={class:"mb-4"},oe={class:"flex items-center gap-2"},re={class:"h-5 w-5 text-[#D4AF37]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},se=["d"],ae={class:"font-semibold sidebar-text"},ne={class:"text-xs font-semibold sidebar-theme-chip"},le={class:"space-y-2"},ie={class:"h-5 w-5 text-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},de=["d"],ce={key:1,class:"mt-6 border-t pt-4 space-y-2"},ue={class:"h-5 w-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},me=["d"],pe={class:"h-5 w-5 text-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},he=["d"],ve={class:"h-5 w-5 text-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},fe=["d"],ge={class:"fixed inset-y-0 left-0 w-64 bg-nav text-offwhite z-30 hidden md:flex flex-col border-r border-gold/20 shadow-2xl"},be={class:"p-6 border-b border-gold/20 flex items-center justify-between gap-3"},_e=["src"],ke={key:0,class:"p-4 border-b border-gold/20"},we={class:"sidebar-switch"},xe={class:"p-4 border-b border-gold/20"},ye={class:"flex items-center gap-3"},Ae={class:"relative w-8 h-8 flex items-center justify-center"},je=["d"],Ee={class:"font-semibold sidebar-text"},Pe={class:"text-xs font-medium px-2 py-1 rounded-full sidebar-theme-chip"},Ce={class:"flex-1 overflow-y-auto p-4 space-y-1"},Ie={class:"h-5 w-5 text-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Me=["d"],Se={class:"mt-4"},De={class:"h-5 w-5 text-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Le=["d"],Ve={key:0,class:"mt-4"},Te={class:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Oe=["d"],Re={class:"text-red-400"},qe={class:"h-5 w-5 text-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ze=["d"],Be={class:"h-5 w-5 text-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},He=["d"],Ne={class:"p-4 border-t border-gold/20 text-sm"},$e={key:0,class:"flex items-center gap-3"},Fe={class:"w-10 h-10 bg-gold text-dark rounded-full flex items-center justify-center font-bold"},Ke={class:"font-semibold"},Ue={class:"text-offwhite-muted text-xs"},Je={key:1,class:"space-x-2"},We=B({__name:"NavBar",setup(e){const r=s(),a=T(),y=D(),A=R(),j=q(),{isVisible:E}=m(j),P=t(!1),C=a.token,I=o(()=>{const e=C&&"object"==typeof C&&"value"in C?C.value:C,t="undefined"!=typeof window?localStorage.getItem("kadesh_token"):null;return Boolean(e||t)}),M=o(()=>a.isAdmin),S=o(()=>a.user),L=o(()=>a.userInitials);o(()=>E.value);const V=o(()=>r.currentRoute.value.path),O=o(()=>A.isDark?"Tema escuro":"Tema claro"),B=o(()=>A.isDark?"M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z":"M12 3v2m0 14v2m9-9h-2M5 12H3m14.364-7.364l-1.414 1.414M7.05 16.95l-1.414 1.414m0-12.728l1.414 1.414M16.95 16.95l1.414 1.414M12 7a5 5 0 100 10 5 5 0 000-10z"),H={target:"M12 3a9 9 0 100 18 9 9 0 000-18zm0 4a5 5 0 100 10 5 5 0 000-10zm0 3a2 2 0 110 4 2 2 0 010-4z",book:"M4 6.5A2.5 2.5 0 016.5 4h9A2.5 2.5 0 0118 6.5v11a.5.5 0 01-.757.429L12 14.5l-5.243 3.429A.5.5 0 016 17.5v-11z",dashboard:"M4 13h6v8H4v-8zm0-10h6v8H4V3zm10 10h6v8h-6v-8zm0-10h6v8h-6V3z",projects:"M4 6h16M4 12h16M4 18h16",bids:"M12 6v2m0 8v2m0-6a2 2 0 100-4 2 2 0 000 4zm0 8c-4.418 0-8-2.686-8-6 0-1.657 1.343-3 3-3h10c1.657 0 3 1.343 3 3 0 3.314-3.582 6-8 6z",contracts:"M7 7h10M7 11h10M7 15h6m-1-10l-2-2H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7h-4z",wallet:"M4 7h16v10H4z M4 11h12",receipts:"M7 5h10v14l-2-1-2 1-2-1-2 1-2-1-2 1V5z M9 9h6m-6 4h6",bell:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9",profile:"M12 12a5 5 0 100-10 5 5 0 000 10zm-7 8a7 7 0 0114 0",settings:"M10.325 4.317l1.09-.63a1 1 0 011.09 0l1.09.63a1 1 0 00.98 0l1.26-.73a1 1 0 011.5.86v1.26a1 1 0 00.29.7l.9.9a1 1 0 010 1.41l-.9.9a1 1 0 00-.29.71v1.26a1 1 0 01-1.5.86l-1.26-.73a1 1 0 00-.98 0l-1.09.63a1 1 0 01-1.09 0l-1.09-.63a1 1 0 00-.98 0l-1.26.73a1 1 0 01-1.5-.86v-1.26a1 1 0 00-.29-.7l-.9-.9a1 1 0 010-1.41l.9-.9a1 1 0 00.29-.71v-1.26a1 1 0 011.5-.86l1.26.73a1 1 0 00.98 0z",admin:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},N=[{to:"/lobby",label:"Lobby",icon:"target",auth:!0},{to:"/tutorial",label:"Tutorial",icon:"book"},{to:"/dashboard",label:"Dashboard",icon:"dashboard",auth:!0}],$=[{to:"/projects",label:"Projetos",icon:"projects"},{to:"/my-projects",label:"Meus Projetos",icon:"projects"}],We=[{to:"/my-bids",label:"Minhas Propostas",icon:"bids"},{to:"/contracts",label:"Contratos",icon:"contracts"}],Ye=[{to:"/wallet",label:"Carteira",icon:"wallet"},{to:"/receipts",label:"Comprovantes",icon:"receipts"},{to:"/notifications",label:"NotificaÃ§Ãµes",icon:"bell"}],Ge="/profile",Qe="Meu Perfil",Xe="profile",Ze="/settings",et="ConfiguraÃ§Ãµes",tt="settings",ot="/admin/dashboard",rt="Admin",st="admin",at=o(()=>{if(!I.value)return N.filter(e=>!e.auth);const e=[...N];return y.isContractor&&e.push(...$),y.isProvider&&e.push(...We),e}),nt=o(()=>I.value?Ye:[]),lt=o(()=>{const e=[...N];return I.value&&(y.isContractor&&e.push(...$),y.isProvider&&e.push(...We),e.push(...Ye)),e}),it=e=>"/"===e?"/"===V.value:V.value===e||V.value.startsWith(`${e}/`),dt=e=>["sidebar-link",it(e)?"sidebar-link-active":"sidebar-link-idle"],ct=e=>["sidebar-link",it(e)?"sidebar-link-active":"sidebar-link-idle"],ut=e=>{P.value=!1,r.push(e)},mt=async()=>{await a.logout(),P.value=!1,r.push("/")},pt=()=>{A.toggleTheme()};return(e,t)=>{var o,r;const s=p("router-link");return l(),n(b,null,[i("header",K,[h(s,{to:"/",class:"flex items-center gap-3"},{default:v(()=>[i("img",{src:c(z),alt:"Kaddesh",class:"h-10 w-10 rounded-lg border border-gold/40 object-cover"},null,8,U),t[6]||(t[6]=i("div",null,[i("p",{class:"text-sm text-gold font-semibold"},"KADDESH"),i("p",{class:"text-xs text-offwhite-muted"},"Service Bridge")],-1))]),_:1}),i("button",{onClick:t[0]||(t[0]=e=>P.value=!P.value),class:"p-2 rounded-md hover:bg-dark-80 transition","aria-label":"Abrir menu"},[(l(),n("svg",J,[P.value?(l(),n("path",Y)):(l(),n("path",W))]))])]),h(x,{name:"fade"},{default:v(()=>[P.value?(l(),n("div",{key:0,class:"md:hidden fixed inset-0 z-40 bg-black/50",onClick:t[5]||(t[5]=g(e=>P.value=!1,["self"]))},[i("div",G,[i("div",Q,[h(s,{to:"/",class:"flex items-center gap-2"},{default:v(()=>[i("img",{src:c(z),alt:"Kaddesh",class:"h-10 w-10 rounded-lg border border-gold/40 object-cover"},null,8,X),t[7]||(t[7]=i("div",null,[i("p",{class:"text-sm font-semibold sidebar-text"},"KADDESH"),i("p",{class:"text-xs sidebar-muted"},"Service Bridge")],-1))]),_:1}),i("button",{onClick:t[1]||(t[1]=e=>P.value=!1),class:"p-2 rounded sidebar-close-btn"},[...t[8]||(t[8]=[i("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),I.value?(l(),n("div",Z,[i("div",ee,[h(F,{variant:"sidebar"})])])):f("",!0),i("div",te,[i("button",{class:"w-full flex items-center justify-between px-3 py-2 rounded-lg sidebar-theme-btn",onClick:pt},[i("span",oe,[(l(),n("svg",re,[i("path",{d:B.value,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,8,se)])),i("span",ae,u(O.value),1)]),i("span",ne,u(c(A).isDark?"ðŸŒ™":"â˜€ï¸"),1)])]),i("div",le,[(l(!0),n(b,null,_(lt.value,e=>(l(),k(s,{key:e.to,to:e.to,class:d(ct(e.to)),onClick:t=>ut(e.to)},{default:v(()=>[(l(),n("svg",ie,[i("path",{d:H[e.icon]||H.target,"stroke-width":"1.7","stroke-linecap":"round","stroke-linejoin":"round"},null,8,de)])),i("span",null,u(e.label),1)]),_:2},1032,["to","class","onClick"]))),128))]),I.value?(l(),n("div",ce,[M.value?(l(),k(s,{key:0,to:ot,class:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-semibold sidebar-danger",onClick:t[2]||(t[2]=e=>ut(ot))},{default:v(()=>[(l(),n("svg",ue,[i("path",{d:H[st]||H.target,"stroke-width":"1.7","stroke-linecap":"round","stroke-linejoin":"round"},null,8,me)])),i("span",null,u(rt),1)]),_:1},8,["to"])):f("",!0),h(s,{to:Ge,class:d(ct(Ge)),onClick:t[3]||(t[3]=e=>ut(Ge))},{default:v(()=>[(l(),n("svg",pe,[i("path",{d:H[Xe]||H.target,"stroke-width":"1.7","stroke-linecap":"round","stroke-linejoin":"round"},null,8,he)])),i("span",null,u(Qe),1)]),_:1},8,["to","class"]),h(s,{to:Ze,class:d(ct(Ze)),onClick:t[4]||(t[4]=e=>ut(Ze))},{default:v(()=>[(l(),n("svg",ve,[i("path",{d:H[tt]||H.target,"stroke-width":"1.7","stroke-linecap":"round","stroke-linejoin":"round"},null,8,fe)])),i("span",null,u(et),1)]),_:1},8,["to","class"]),i("button",{onClick:mt,class:"w-full flex items-center gap-2 px-3 py-2 rounded-lg sidebar-danger"},[...t[9]||(t[9]=[i("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17l5-5-5-5M20 12H9m4 9H5a2 2 0 01-2-2V5a2 2 0 012-2h8"})],-1),w(" Sair ",-1)])])])):f("",!0)])])):f("",!0)]),_:1}),i("aside",ge,[i("div",be,[h(s,{to:"/",class:"flex items-center gap-3"},{default:v(()=>[i("img",{src:c(z),alt:"Kaddesh",class:"h-14 w-14 rounded-xl border border-gold/40 object-cover shadow"},null,8,_e),t[10]||(t[10]=i("div",null,[i("p",{class:"text-gold font-heading text-xl leading-none"},"KADDESH"),i("p",{class:"text-xs text-offwhite-muted"},"Service Bridge")],-1))]),_:1})]),I.value?(l(),n("div",ke,[i("div",we,[h(F,{variant:"sidebar"})])])):f("",!0),i("div",xe,[i("button",{class:"w-full flex items-center justify-between px-4 py-3 rounded-xl sidebar-theme-btn group",onClick:pt},[i("span",ye,[i("div",Ae,[(l(),n("svg",{class:d(["h-6 w-6 transition-all duration-300",(c(A).isDark,"text-[#D4AF37]")]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{d:B.value,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,8,je)],2))]),i("span",Ee,u(c(A).isDark?"Modo Escuro":"Modo Claro"),1)]),i("span",Pe,u(c(A).isDark?"ðŸŒ™":"â˜€ï¸"),1)])]),i("nav",Ce,[(l(!0),n(b,null,_(at.value,e=>(l(),k(s,{key:e.to,to:e.to,class:d(dt(e.to))},{default:v(()=>[(l(),n("svg",Ie,[i("path",{d:H[e.icon]||H.target,"stroke-width":"1.7","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Me)])),i("span",null,u(e.label),1)]),_:2},1032,["to","class"]))),128)),i("div",Se,[t[11]||(t[11]=i("p",{class:"text-xs uppercase tracking-wide text-offwhite-muted px-2 mb-2"},"Acesso rÃ¡pido",-1)),(l(!0),n(b,null,_(nt.value,e=>(l(),k(s,{key:e.to,to:e.to,class:d(dt(e.to))},{default:v(()=>[(l(),n("svg",De,[i("path",{d:H[e.icon]||H.target,"stroke-width":"1.7","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Le)])),i("span",null,u(e.label),1)]),_:2},1032,["to","class"]))),128))]),I.value?(l(),n("div",Ve,[t[13]||(t[13]=i("p",{class:"text-xs uppercase tracking-wide text-offwhite-muted px-2 mb-2"},"Conta",-1)),M.value?(l(),k(s,{key:0,to:ot,class:d(dt(ot))},{default:v(()=>[(l(),n("svg",Te,[i("path",{d:H[st]||H.target,"stroke-width":"1.7","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Oe)])),i("span",Re,u(rt),1)]),_:1},8,["to","class"])):f("",!0),h(s,{to:Ge,class:d(dt(Ge))},{default:v(()=>[(l(),n("svg",qe,[i("path",{d:H[Xe]||H.target,"stroke-width":"1.7","stroke-linecap":"round","stroke-linejoin":"round"},null,8,ze)])),i("span",null,u(Qe),1)]),_:1},8,["to","class"]),h(s,{to:Ze,class:d(dt(Ze))},{default:v(()=>[(l(),n("svg",Be,[i("path",{d:H[tt]||H.target,"stroke-width":"1.7","stroke-linecap":"round","stroke-linejoin":"round"},null,8,He)])),i("span",null,u(et),1)]),_:1},8,["to","class"]),i("button",{onClick:mt,class:"mt-2 w-full flex items-center gap-2 px-3 py-2 rounded-lg sidebar-danger"},[...t[12]||(t[12]=[i("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17l5-5-5-5M20 12H9m4 9H5a2 2 0 01-2-2V5a2 2 0 012-2h8"})],-1),w(" Sair ",-1)])])])):f("",!0)]),i("div",Ne,[I.value?(l(),n("div",$e,[i("div",Fe,u(L.value),1),i("div",null,[i("p",Ke,u(null==(o=S.value)?void 0:o.name),1),i("p",Ue,u(null==(r=S.value)?void 0:r.email),1)])])):(l(),n("div",Je,[h(s,{to:"/login",class:"text-gold font-semibold hover:underline"},{default:v(()=>[...t[14]||(t[14]=[w("Login",-1)])]),_:1}),t[16]||(t[16]=i("span",{class:"text-offwhite-muted"},"/",-1)),h(s,{to:"/register",class:"text-gold font-semibold hover:underline"},{default:v(()=>[...t[15]||(t[15]=[w("Cadastrar",-1)])]),_:1})]))])])],64)}}},[["__scopeId","data-v-f5f28482"]]),Ye={class:"bg-gray-900 text-white mt-auto"},Ge={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},Qe={class:"grid grid-cols-1 md:grid-cols-4 gap-8"},Xe={class:"space-y-2"},Ze={class:"border-t border-gray-800 mt-8 pt-8 text-center"},et={class:"text-gray-400 text-sm"},tt={__name:"Footer",setup(e){const t=o(()=>(new Date).getFullYear());return(e,o)=>{const r=p("router-link");return l(),n("footer",Ye,[i("div",Ge,[i("div",Qe,[o[3]||(o[3]=i("div",null,[i("h3",{class:"text-lg font-bold mb-4"},"Kadesh"),i("p",{class:"text-gray-400 text-sm"}," Conectando profissionais talentosos com projetos incrÃ­veis. ")],-1)),i("div",null,[o[2]||(o[2]=i("h4",{class:"text-sm font-semibold mb-4 uppercase tracking-wider"},"Plataforma",-1)),i("ul",Xe,[i("li",null,[h(r,{to:"/projects",class:"text-gray-400 hover:text-white text-sm transition"},{default:v(()=>[...o[0]||(o[0]=[w(" Explorar Projetos ",-1)])]),_:1})]),i("li",null,[h(r,{to:"/register",class:"text-gray-400 hover:text-white text-sm transition"},{default:v(()=>[...o[1]||(o[1]=[w(" Criar Conta ",-1)])]),_:1})])])]),o[4]||(o[4]=y('<div><h4 class="text-sm font-semibold mb-4 uppercase tracking-wider">Suporte</h4><ul class="space-y-2"><li><a href="#" class="text-gray-400 hover:text-white text-sm transition"> Central de Ajuda </a></li><li><a href="#" class="text-gray-400 hover:text-white text-sm transition"> Contato </a></li></ul></div><div><h4 class="text-sm font-semibold mb-4 uppercase tracking-wider">Legal</h4><ul class="space-y-2"><li><a href="#" class="text-gray-400 hover:text-white text-sm transition"> Termos de Uso </a></li><li><a href="#" class="text-gray-400 hover:text-white text-sm transition"> Privacidade </a></li></ul></div>',2))]),i("div",Ze,[i("p",et," Â© "+u(t.value)+" Kadesh. Todos os direitos reservados. ",1)])])])}}},ot={key:0,class:"fixed top-4 right-4 z-40 flex items-center gap-2"},rt={class:"text-lg"},st={class:"text-sm font-bold"},at={__name:"ModeIndicator",setup(e){const t=s(),r=A(),a=T(),m=D(),p=q(),h=o(()=>a.isAuthenticated),v=o(()=>{if(r.path.startsWith("/admin"))return!1;return!(p.isVisible&&"object"==typeof p.isVisible&&"value"in p.isVisible?p.isVisible.value:p.isVisible)}),g=()=>{m.toggleMode(),m.isProvider?t.push("/my-bids"):t.push("/projects")};return(e,t)=>h.value&&v.value?(l(),n("div",ot,[i("div",{class:d(["flex items-center gap-2 px-4 py-2 rounded-full shadow-lg backdrop-blur-sm border transition-all duration-300",c(m).isProvider?"bg-emerald-500/90 border-emerald-400/50 text-white":"bg-amber-500/90 border-amber-400/50 text-white"])},[i("span",rt,u(c(m).isProvider?"ðŸ› ï¸":"ðŸ“˜"),1),i("span",st,u(c(m).isProvider?"Prestador":"Contratante"),1)],2),i("button",{onClick:g,class:"p-2 rounded-full bg-surface border border-accent/30 shadow-lg hover:border-accent/60 hover:scale-105 transition-all",title:"Alternar modo"},[...t[0]||(t[0]=[i("svg",{class:"w-4 h-4 text-accent",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])])])):f("",!0)}},nt={key:0,class:"fixed inset-0 bg-white z-50 flex items-center justify-center"},lt={__name:"App",setup(e){const r=A(),s=T(),c=R(),u=q(),m=t(!0),v=o(()=>{if(["login","register","forgot-password","reset-password"].includes(r.name))return console.log("[App] Rota de auth - nÃ£o mostrar nav:",r.name),!1;if(r.path&&r.path.startsWith("/admin"))return!1;const e=s.token&&"object"==typeof s.token&&"value"in s.token?s.token.value:s.token,t="undefined"!=typeof window?localStorage.getItem("kadesh_token"):null,o=!!(e||t);return console.log("[App] showNavigation check:",{route:r.name,authenticated:o,hasToken:!!e,hasUser:!!s.user}),o}),g=o(()=>{if(!v.value)return"app-main";return(u.isVisible&&"object"==typeof u.isVisible&&"value"in u.isVisible?u.isVisible.value:u.isVisible)?"app-main pt-16 md:pt-0 md:pl-64":"app-main pt-16 md:pt-0"}),_=o(()=>["min-h-screen app-shell",c.isDark?"theme-dark":"theme-light"]),w=()=>{m.value&&(m.value=!1)};return a(()=>{const e=setTimeout(w,2e3);(async()=>{try{return await M.get("/api/health",{timeout:7e4}),!0}catch(e){return!1}})().catch(()=>{});if(!((s.token&&"object"==typeof s.token&&"value"in s.token?s.token.value:s.token)||"undefined"!=typeof window&&localStorage.getItem("kadesh_token")))return clearTimeout(e),void w();s.verifyToken().catch(e=>{console.warn("App initialization: token verify falhou, mas mantendo sessÃ£o se token existir",e.message)}).finally(()=>{clearTimeout(e),w()}),c.applyTheme()}),(e,t)=>{const o=p("router-view");return l(),n("div",{id:"app",class:d(_.value)},[m.value?(l(),n("div",nt,[...t[0]||(t[0]=[i("div",{class:"text-center"},[i("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto"}),i("p",{class:"mt-4 text-gray-600"},"Carregando...")],-1)])])):(l(),n(b,{key:1},[v.value?(l(),k(We,{key:0})):f("",!0),v.value?(l(),k(at,{key:1})):f("",!0),i("main",{class:d(g.value)},[h(o)],2),v.value?(l(),k(tt,{key:2})):f("",!0)],64))],2)}}},it={},dt=function(e,t,o){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),o=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/dist/"+e}(e))in it)return;it[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,o&&s.setAttribute("nonce",o),document.head.appendChild(s),t?new Promise((t,o)=>{s.addEventListener("load",t),s.addEventListener("error",()=>o(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})},ct=[{path:"/",name:"home",component:()=>dt(()=>import("./Home-KxHZC3jW.js"),__vite__mapDeps([0,1,2])),meta:{requiresAuth:!1}},{path:"/tutorial",name:"tutorial",component:()=>dt(()=>import("./Tutorial-nbDna1O0.js"),__vite__mapDeps([3,1])),meta:{requiresAuth:!1}},{path:"/lobby",name:"auction-lobby",component:()=>dt(()=>import("./AuctionLobby-BLqAdpQA.js"),__vite__mapDeps([4,1,5,2])),meta:{requiresAuth:!0}},{path:"/login",name:"login",component:()=>dt(()=>import("./Login-hbc37YV0.js"),__vite__mapDeps([6,1,2])),meta:{requiresAuth:!1,guestOnly:!0}},{path:"/register",name:"register",component:()=>dt(()=>import("./Register-DAZciU6u.js"),__vite__mapDeps([7,1,2])),meta:{requiresAuth:!1,guestOnly:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>dt(()=>import("./ForgotPassword-TKXY5mpK.js"),__vite__mapDeps([8,1,2])),meta:{requiresAuth:!1,guestOnly:!0}},{path:"/reset-password",name:"reset-password",component:()=>dt(()=>import("./ResetPassword-fw19iIkA.js"),__vite__mapDeps([9,1,2])),meta:{requiresAuth:!1,guestOnly:!0}},{path:"/dashboard",name:"dashboard",component:()=>dt(()=>import("./Dashboard-CAEMUX0H.js"),__vite__mapDeps([10,11,1,2,12])),meta:{requiresAuth:!0}},{path:"/projects",name:"projects",component:()=>dt(()=>import("./Projects-BMPUBkB4.js"),__vite__mapDeps([13,1,11,2,12,14,5])),meta:{requiresAuth:!1}},{path:"/projects/:id",name:"project-detail",component:()=>dt(()=>import("./ProjectDetail--QV_z-gV.js"),__vite__mapDeps([15,1,11,2,12,5,16])),meta:{requiresAuth:!1}},{path:"/projects/create",name:"create-project",component:()=>dt(()=>import("./CreateProject-CpE-EGXy.js"),__vite__mapDeps([17,1,5,2])),meta:{requiresAuth:!0}},{path:"/my-projects",name:"my-projects",component:()=>dt(()=>import("./MyProjects-M06YNfAw.js"),__vite__mapDeps([18,1,11,14,5,2,12])),meta:{requiresAuth:!0}},{path:"/my-bids",name:"my-bids",component:()=>dt(()=>import("./MyBids-lCyJ0wxd.js"),__vite__mapDeps([19,1,11,14,16,5,2,12])),meta:{requiresAuth:!0}},{path:"/profile",name:"profile",component:()=>dt(()=>import("./ProviderProfile-C-JE7FFm.js"),__vite__mapDeps([20,1,21,2])),meta:{requiresAuth:!0}},{path:"/provider/:id",name:"public-provider-profile",component:()=>dt(()=>import("./PublicProviderProfile-tAOQW0FM.js"),__vite__mapDeps([22,1,21,2])),meta:{requiresAuth:!1}},{path:"/wallet",name:"wallet",component:()=>dt(()=>import("./Wallet-C6jkvx5e.js"),__vite__mapDeps([23,1,11,14,2])),meta:{requiresAuth:!0}},{path:"/receipts",name:"receipts",component:()=>dt(()=>import("./Receipts-B-jFPhru.js"),__vite__mapDeps([24,1,2])),meta:{requiresAuth:!0}},{path:"/contracts",name:"contracts",component:()=>dt(()=>import("./Contracts-C2fbNURh.js"),__vite__mapDeps([25,1,2])),meta:{requiresAuth:!0}},{path:"/contracts/:id",name:"contract-detail",component:()=>dt(()=>import("./ContractDetail-BB4zdU6m.js"),__vite__mapDeps([26,1,2])),meta:{requiresAuth:!0}},{path:"/settings",name:"settings",component:()=>dt(()=>import("./Settings-b26tUtr3.js"),__vite__mapDeps([27,1,2])),meta:{requiresAuth:!0}},{path:"/notifications",name:"notifications",component:()=>dt(()=>import("./Notifications-CKEZJhVs.js"),__vite__mapDeps([28,1,14,2,12])),meta:{requiresAuth:!0}},{path:"/admin/login",name:"admin-login",component:()=>dt(()=>import("./AdminLogin-B_ZZF5y4.js"),__vite__mapDeps([29,1,2])),meta:{requiresAuth:!1,adminOnly:!0}},{path:"/admin/dashboard",name:"admin-dashboard",component:()=>dt(()=>import("./AdminDashboard-C7onAWNB.js"),__vite__mapDeps([30,1,2,31])),meta:{requiresAdminAuth:!0}},{path:"/admin/users",name:"admin-users",component:()=>dt(()=>import("./AdminUsers-DvBp8Dgz.js"),__vite__mapDeps([32,1,2,31])),meta:{requiresAdminAuth:!0}},{path:"/admin/projects",name:"admin-projects",component:()=>dt(()=>import("./AdminProjects-tGCamMHn.js"),__vite__mapDeps([33,1])),meta:{requiresAdminAuth:!0}},{path:"/admin/payments",name:"admin-payments",component:()=>dt(()=>import("./AdminPayments-BkJzG2hJ.js"),__vite__mapDeps([34,1])),meta:{requiresAdminAuth:!0}},{path:"/admin/disputes",name:"admin-disputes",component:()=>dt(()=>import("./AdminDisputes-ClgpHtje.js"),__vite__mapDeps([35,1,2])),meta:{requiresAdminAuth:!0}},{path:"/admin/advertisements",name:"admin-advertisements",component:()=>dt(()=>import("./AdminAdvertisements-BZYZSKML.js"),__vite__mapDeps([36,1,2])),meta:{requiresAdminAuth:!0}},{path:"/admin/settings",name:"admin-settings",component:()=>dt(()=>import("./AdminSettings-C6swJ64d.js"),__vite__mapDeps([37,1,2])),meta:{requiresAdminAuth:!0}},{path:"/:pathMatch(.*)*",redirect:"/"}],ut=j({history:E(),routes:ct,scrollBehavior:(e,t,o)=>o||{top:0}});ut.beforeEach(async(e,t,o)=>{var r,s;const a="undefined"!=typeof window,n=T(),l=D(),i=a?localStorage.getItem("kadesh_token"):null,d=a?localStorage.getItem("adminToken"):null,c=e.meta.requiresAuth,u=e.meta.requiresAdminAuth,m=e.meta.guestOnly;if(u&&!d)return o({name:"admin-login"});if(c){if(!i)return o({name:"login",query:{redirect:e.fullPath}});const t=null==(s=null==(r=n.user)?void 0:r.value)?void 0:s.type;t&&("provider"===t?l.setProviderMode():"client"===t&&l.setContractorMode())}return m&&(n.isAuthenticated||i)?o({name:"dashboard"}):o()});const mt=P(lt);mt.use(C()),mt.use(ut),mt.mount("#app");export{B as _,M as a,D as b,z as l,T as u};




