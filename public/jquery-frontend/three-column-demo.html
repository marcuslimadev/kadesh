<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leilões Ativos - Kadesh</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/kadesh/assets/images/favicon.png">
    
    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Animate CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <style>
        body {
            padding-top: 52px;
            background: #f5f7fa;
        }
        
        /* Three Column Layout */
        .three-column-layout {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            gap: 1.5rem;
            max-width: 1600px;
            margin: 0 auto;
            padding: 1.5rem;
        }
        
        /* Sidebar Styles */
        .sidebar {
            position: sticky;
            top: 70px;
            height: fit-content;
            max-height: calc(100vh - 90px);
            overflow-y: auto;
        }
        
        .sidebar::-webkit-scrollbar {
            width: 6px;
        }
        
        .sidebar::-webkit-scrollbar-thumb {
            background: #dbdbdb;
            border-radius: 3px;
        }
        
        .sidebar::-webkit-scrollbar-thumb:hover {
            background: #b5b5b5;
        }
        
        /* Left Sidebar - Filters */
        .sidebar-left {
            grid-column: 1;
        }
        
        /* Main Content */
        .main-content {
            grid-column: 2;
        }
        
        /* Right Sidebar - Featured */
        .sidebar-right {
            grid-column: 3;
        }
        
        /* Category Filter Item */
        .category-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.5rem;
        }
        
        .category-item:hover {
            background: #f5f7fa;
            transform: translateX(5px);
        }
        
        .category-item.is-active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .category-item .icon {
            margin-right: 0.75rem;
        }
        
        .category-item .count {
            margin-left: auto;
            font-size: 0.85rem;
            opacity: 0.7;
        }
        
        /* Price Range Slider */
        .price-range {
            padding: 1rem;
        }
        
        .price-inputs {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        /* Featured Card */
        .featured-card {
            border-left: 4px solid #48c774;
            transition: all 0.3s ease;
        }
        
        .featured-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        
        .featured-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #48c774;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        /* Stats Widget */
        .stats-widget {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        
        .stat-item {
            text-align: center;
            padding: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            color: white;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
        }
        
        .stat-label {
            font-size: 0.85rem;
            opacity: 0.9;
            margin-top: 0.25rem;
        }
        
        /* Responsive */
        @media screen and (max-width: 1280px) {
            .three-column-layout {
                grid-template-columns: 250px 1fr 280px;
            }
        }
        
        @media screen and (max-width: 1024px) {
            .three-column-layout {
                grid-template-columns: 1fr;
            }
            
            .sidebar-left {
                order: 2;
            }
            
            .main-content {
                order: 1;
            }
            
            .sidebar-right {
                order: 3;
            }
            
            .sidebar {
                position: static;
                max-height: none;
            }
        }
        
        /* Ad Banner */
        .ad-banner {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .ad-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .ad-content {
            position: relative;
            z-index: 1;
        }
        
        /* Quick Actions */
        .quick-actions {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .quick-action-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem;
            border-radius: 6px;
            font-weight: 600;
            transition: all 0.2s ease;
        }
        
        .quick-action-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar is-fixed-top is-white" role="navigation">
        <div class="navbar-brand">
            <a class="navbar-item" href="/kadesh/jquery-frontend/index.html">
                <img src="/kadesh/assets/images/logo-kaddesh.svg" alt="Kadesh" height="40">
                <span class="ml-2 has-text-weight-bold is-size-5">Kadesh</span>
            </a>
        </div>
        
        <div class="navbar-menu">
            <div class="navbar-start">
                <a class="navbar-item is-active" href="/kadesh/jquery-frontend/three-column-demo.html">
                    <span class="icon"><i class="fas fa-gavel"></i></span>
                    <span>Leilões</span>
                </a>
                <a class="navbar-item" href="/kadesh/jquery-frontend/escopo.html">
                    <span class="icon"><i class="fas fa-diagram-project"></i></span>
                    <span>Escopo</span>
                </a>
                <a class="navbar-item" href="/kadesh/jquery-frontend/requisitos.html">
                    <span class="icon"><i class="fas fa-clipboard-list"></i></span>
                    <span>Requisitos</span>
                </a>
            </div>
            
            <div class="navbar-end">
                <div class="navbar-item">
                    <a class="button is-primary" href="#create-project">
                        <span class="icon"><i class="fas fa-plus"></i></span>
                        <span>Criar Projeto</span>
                    </a>
                </div>
                <div class="navbar-item">
                    <a class="button is-light" href="#dashboard">
                        <span class="icon"><i class="fas fa-user"></i></span>
                        <span>Dashboard</span>
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Three Column Layout -->
    <div class="three-column-layout">
        <!-- Left Sidebar - Filters & Categories -->
        <aside class="sidebar sidebar-left">
            <!-- Categories -->
            <div class="box">
                <h3 class="title is-5 mb-4">
                    <span class="icon has-text-primary"><i class="fas fa-filter"></i></span>
                    <span>Categorias</span>
                </h3>
                <div id="category-filters">
                    <div class="category-item is-active" data-category="all">
                        <span class="icon"><i class="fas fa-th"></i></span>
                        <span>Todas</span>
                        <span class="count">124</span>
                    </div>
                    <div class="category-item" data-category="obras">
                        <span class="icon"><i class="fas fa-hard-hat"></i></span>
                        <span>Obras</span>
                        <span class="count">34</span>
                    </div>
                    <div class="category-item" data-category="pintura">
                        <span class="icon"><i class="fas fa-paint-roller"></i></span>
                        <span>Pintura</span>
                        <span class="count">18</span>
                    </div>
                    <div class="category-item" data-category="eletrica">
                        <span class="icon"><i class="fas fa-bolt"></i></span>
                        <span>Elétrica</span>
                        <span class="count">22</span>
                    </div>
                    <div class="category-item" data-category="hidraulica">
                        <span class="icon"><i class="fas fa-faucet"></i></span>
                        <span>Hidráulica</span>
                        <span class="count">15</span>
                    </div>
                    <div class="category-item" data-category="impermeabilizacao">
                        <span class="icon"><i class="fas fa-droplet"></i></span>
                        <span>Impermeabilização</span>
                        <span class="count">9</span>
                    </div>
                    <div class="category-item" data-category="hvac">
                        <span class="icon"><i class="fas fa-fan"></i></span>
                        <span>HVAC</span>
                        <span class="count">12</span>
                    </div>
                    <div class="category-item" data-category="solar">
                        <span class="icon"><i class="fas fa-solar-panel"></i></span>
                        <span>Solar</span>
                        <span class="count">8</span>
                    </div>
                    <div class="category-item" data-category="alvenaria">
                        <span class="icon"><i class="fas fa-bricks"></i></span>
                        <span>Alvenaria</span>
                        <span class="count">6</span>
                    </div>
                </div>
            </div>
            
            <!-- Price Range -->
            <div class="box">
                <h3 class="title is-5 mb-4">
                    <span class="icon has-text-success"><i class="fas fa-dollar-sign"></i></span>
                    <span>Faixa de Preço</span>
                </h3>
                <div class="price-range">
                    <input type="range" class="slider is-fullwidth is-success" min="0" max="100000" step="1000" value="50000" id="priceRange">
                    <div class="price-inputs mt-3">
                        <div class="control">
                            <input class="input is-small" type="text" placeholder="Min" value="R$ 0" readonly>
                        </div>
                        <div class="control">
                            <input class="input is-small" type="text" placeholder="Max" value="R$ 50.000" id="maxPriceDisplay">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Status Filter -->
            <div class="box">
                <h3 class="title is-5 mb-4">
                    <span class="icon has-text-warning"><i class="fas fa-clock"></i></span>
                    <span>Status</span>
                </h3>
                <label class="checkbox is-block mb-2">
                    <input type="checkbox" checked> Aberto
                </label>
                <label class="checkbox is-block mb-2">
                    <input type="checkbox" checked> Encerrando em breve
                </label>
                <label class="checkbox is-block">
                    <input type="checkbox"> Finalizado
                </label>
            </div>
            
            <!-- Location Filter -->
            <div class="box">
                <h3 class="title is-5 mb-4">
                    <span class="icon has-text-info"><i class="fas fa-location-dot"></i></span>
                    <span>Localização</span>
                </h3>
                <div class="field">
                    <div class="control has-icons-left">
                        <input class="input" type="text" placeholder="Cidade ou Estado">
                        <span class="icon is-left">
                            <i class="fas fa-search"></i>
                        </span>
                    </div>
                </div>
                <div class="field mt-3">
                    <label class="label is-small">Raio (km)</label>
                    <div class="control">
                        <input type="range" class="slider is-fullwidth" min="0" max="200" step="10" value="50" id="radiusRange">
                    </div>
                    <p class="help">Até <span id="radiusDisplay">50</span> km</p>
                </div>
            </div>
        </aside>

        <!-- Main Content - Auction Cards -->
        <main class="main-content">
            <!-- Controls Bar -->
            <div class="box mb-4">
                <div class="level">
                    <div class="level-left">
                        <div class="level-item">
                            <p class="subtitle is-5 mb-0">
                                <strong>124</strong> leilões ativos
                            </p>
                        </div>
                    </div>
                    <div class="level-right">
                        <div class="level-item">
                            <div class="field has-addons">
                                <div class="control">
                                    <span class="select">
                                        <select id="sortSelect">
                                            <option value="score">Melhor Score</option>
                                            <option value="price">Menor Preço</option>
                                            <option value="rating">Melhor Avaliação</option>
                                            <option value="time">Encerrando Primeiro</option>
                                        </select>
                                    </span>
                                </div>
                                <div class="control">
                                    <button class="button is-primary" id="refreshBtn">
                                        <span class="icon"><i class="fas fa-sync"></i></span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Auction Cards Grid -->
            <div id="auctionCardsContainer" class="columns is-multiline">
                <!-- Cards will be loaded here by JavaScript -->
            </div>
            
            <!-- Loading State -->
            <div id="loadingState" class="box has-text-centered" style="display: none;">
                <span class="icon is-large has-text-primary">
                    <i class="fas fa-spinner fa-pulse fa-2x"></i>
                </span>
                <p class="mt-3">Carregando leilões...</p>
            </div>
            
            <!-- Empty State -->
            <div id="emptyState" class="box has-text-centered" style="display: none;">
                <span class="icon is-large has-text-grey-light">
                    <i class="fas fa-inbox fa-3x"></i>
                </span>
                <p class="mt-3 has-text-grey">Nenhum leilão encontrado</p>
            </div>
        </main>

        <!-- Right Sidebar - Featured & Ads -->
        <aside class="sidebar sidebar-right">
            <!-- Stats Widget -->
            <div class="box mb-4">
                <h3 class="title is-5 mb-4">
                    <span class="icon has-text-primary"><i class="fas fa-chart-line"></i></span>
                    <span>Estatísticas</span>
                </h3>
                <div class="stats-widget">
                    <div class="stat-item">
                        <div class="stat-value">124</div>
                        <div class="stat-label">Ativos</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">18</div>
                        <div class="stat-label">Hoje</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">R$ 2.5M</div>
                        <div class="stat-label">Total</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">4.8</div>
                        <div class="stat-label">Média ⭐</div>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="box mb-4">
                <h3 class="title is-5 mb-4">
                    <span class="icon has-text-success"><i class="fas fa-bolt"></i></span>
                    <span>Ações Rápidas</span>
                </h3>
                <div class="quick-actions">
                    <a href="#create-project" class="button is-primary quick-action-btn">
                        <span class="icon"><i class="fas fa-plus"></i></span>
                        <span>Criar Projeto</span>
                    </a>
                    <a href="#my-bids" class="button is-info quick-action-btn">
                        <span class="icon"><i class="fas fa-gavel"></i></span>
                        <span>Minhas Propostas</span>
                    </a>
                    <a href="#watchlist" class="button is-warning quick-action-btn">
                        <span class="icon"><i class="fas fa-star"></i></span>
                        <span>Favoritos</span>
                    </a>
                </div>
            </div>
            
            <!-- Featured Projects -->
            <div class="box mb-4">
                <h3 class="title is-5 mb-4">
                    <span class="icon has-text-warning"><i class="fas fa-star"></i></span>
                    <span>Projetos em Destaque</span>
                </h3>
                
                <div class="featured-card box mb-3" style="position: relative;">
                    <span class="featured-badge">
                        <i class="fas fa-fire"></i> HOT
                    </span>
                    <h4 class="title is-6">Reforma Comercial Centro</h4>
                    <p class="has-text-grey is-size-7 mb-2">
                        <span class="icon is-small"><i class="fas fa-location-dot"></i></span>
                        São Paulo - SP
                    </p>
                    <div class="tags">
                        <span class="tag is-success is-light">R$ 45.000</span>
                        <span class="tag is-info is-light">32 lances</span>
                    </div>
                    <p class="help has-text-danger">
                        <i class="fas fa-clock"></i> Encerra em 2h 15min
                    </p>
                </div>
                
                <div class="featured-card box mb-3" style="position: relative;">
                    <span class="featured-badge">
                        <i class="fas fa-crown"></i> VIP
                    </span>
                    <h4 class="title is-6">Instalação Solar 10kW</h4>
                    <p class="has-text-grey is-size-7 mb-2">
                        <span class="icon is-small"><i class="fas fa-location-dot"></i></span>
                        Curitiba - PR
                    </p>
                    <div class="tags">
                        <span class="tag is-success is-light">R$ 28.900</span>
                        <span class="tag is-info is-light">18 lances</span>
                    </div>
                    <p class="help has-text-warning">
                        <i class="fas fa-clock"></i> Encerra em 5h 42min
                    </p>
                </div>
                
                <div class="featured-card box" style="position: relative;">
                    <span class="featured-badge">
                        <i class="fas fa-bolt"></i> NOVO
                    </span>
                    <h4 class="title is-6">Manutenção Predial</h4>
                    <p class="has-text-grey is-size-7 mb-2">
                        <span class="icon is-small"><i class="fas fa-location-dot"></i></span>
                        Rio de Janeiro - RJ
                    </p>
                    <div class="tags">
                        <span class="tag is-success is-light">R$ 12.500</span>
                        <span class="tag is-info is-light">8 lances</span>
                    </div>
                    <p class="help has-text-success">
                        <i class="fas fa-clock"></i> Encerra em 1d 3h
                    </p>
                </div>
            </div>
            
            <!-- Ad Banner -->
            <div class="ad-banner mb-4">
                <div class="ad-content">
                    <span class="icon is-large mb-2">
                        <i class="fas fa-rocket fa-2x"></i>
                    </span>
                    <h4 class="title is-5 has-text-white mb-2">Destaque seu Projeto!</h4>
                    <p class="is-size-7 mb-3">Apareça no topo e receba mais propostas</p>
                    <button class="button is-white is-small">
                        <span class="icon"><i class="fas fa-arrow-right"></i></span>
                        <span>Saiba Mais</span>
                    </button>
                </div>
            </div>
            
            <!-- Help Widget -->
            <div class="box">
                <h3 class="title is-6 mb-3">
                    <span class="icon has-text-info"><i class="fas fa-question-circle"></i></span>
                    <span>Precisa de Ajuda?</span>
                </h3>
                <p class="is-size-7 has-text-grey mb-3">
                    Nossa equipe está pronta para te ajudar!
                </p>
                <button class="button is-info is-light is-fullwidth is-small">
                    <span class="icon"><i class="fas fa-headset"></i></span>
                    <span>Suporte</span>
                </button>
            </div>
        </aside>
    </div>

    <!-- Bid Modal Placeholder -->
    <div id="bidModalContainer"></div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    
    <!-- JavaScript Modules -->
    <script src="/kadesh/jquery-frontend/assets/js/countdown-bulma.js"></script>
    <script src="/kadesh/jquery-frontend/assets/js/score-calculator-bulma.js"></script>
    <script src="/kadesh/jquery-frontend/assets/js/auction-sorter-bulma.js"></script>
    <script src="/kadesh/jquery-frontend/assets/js/auction-cards-bulma.js"></script>
    <script src="/kadesh/jquery-frontend/assets/js/bid-modal-bulma.js"></script>
    <script src="/kadesh/jquery-frontend/assets/js/three-column-filters-bulma.js"></script>
    <script src="/kadesh/jquery-frontend/assets/js/responsive-layout-bulma.js"></script>
    
    <script>
        $(document).ready(function() {
            // Load bid modal component and initialize when ready
            $('#bidModalContainer').load('/kadesh/jquery-frontend/components/bid-modal-bulma.html', function() {
                // modal markup uses id="bid-modal"
                window.bidModal = new BidModal('#bid-modal');
            });
            
            // Initialize responsive layout
            const responsiveLayout = new ResponsiveLayout({
                leftSidebar: '.sidebar-left',
                rightSidebar: '.sidebar-right',
                mainContent: '.main-content',
                mobileBreakpoint: 1024
            });
            
            // Initialize filters
            const filters = new ThreeColumnFilters({
                categorySelector: '#category-filters',
                priceRangeSelector: '#priceRange',
                maxPriceDisplay: '#maxPriceDisplay',
                statusCheckboxes: '.box input[type="checkbox"]',
                locationInput: 'input[placeholder="Cidade ou Estado"]',
                radiusSelector: '#radiusRange',
                radiusDisplay: '#radiusDisplay'
            });
            
            // Initialize auction cards
            const auctionCards = new AuctionCards('#auctionCardsContainer');
            window.auctionCards = auctionCards; // expose globally so modal can trigger reloads
            auctionCards.load();
            
            // Listen to filter changes
            filters.on('filter-changed', (currentFilters) => {
                console.log('Filters changed:', currentFilters);
                // TODO: Apply filters to auction cards
                auctionCards.load(); // Reload with filters
            });
            
            // Refresh button
            $('#refreshBtn').on('click', function() {
                $(this).find('i').addClass('fa-spin');
                auctionCards.load();
                setTimeout(() => {
                    $(this).find('i').removeClass('fa-spin');
                }, 1000);
            });
            
            // Sort change handler (integrated with AuctionSorter)
            $('#sortSelect').on('change', function() {
                console.log('Sort changed to:', $(this).val());
            });
            
            // Adjust sidebar heights on load and resize
            responsiveLayout.adjustSidebarHeights();
            $(window).on('resize', () => responsiveLayout.adjustSidebarHeights());
        });
    </script>
</body>
</html>
