import{r as e,c as t,A as o,o as s,a as r,e as a,i as l,t as n,B as d,J as u,q as i,F as c,l as p,f as m,h as v,j as g,g as b,b as x,p as f}from"./vue-_iW_wwAQ.js";import{u as h}from"./index-BiWDJfwt.js";import{_ as y}from"./StatusBadge-DFy4JmzA.js";import{_ as w}from"./Pagination-BYJXTjY_.js";import{p as k}from"./projectService-4xyhWrQP.js";import{b as C}from"./utils-CeLII1lI.js";import{l as F}from"./index-Ctu0mvSg.js";const A={class:"min-h-screen bg-page py-8"},_={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},j={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},D={class:"bg-[#161821] rounded-lg shadow-lg p-6 border border-[rgba(212,175,55,0.24)]"},M={class:"flex items-center"},B={class:"text-2xl font-bold text-[#F5F5F5]"},V={class:"bg-[#161821] rounded-lg shadow-lg p-6 border border-[rgba(212,175,55,0.24)]"},z={class:"flex items-center"},P={class:"text-2xl font-bold text-[#F5F5F5]"},E={class:"bg-[#161821] rounded-lg shadow-lg p-6 border border-[rgba(212,175,55,0.24)]"},T={class:"flex items-center"},H={class:"text-2xl font-bold text-[#F5F5F5]"},L={class:"bg-[#161821] rounded-lg shadow-lg p-6 border border-[rgba(212,175,55,0.24)]"},N={class:"flex items-center"},S={class:"text-2xl font-bold text-[#F5F5F5]"},O={class:"bg-[#161821] rounded-lg shadow-lg p-6 mb-6 border border-[rgba(212,175,55,0.24)]"},R={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},U=["value"],q={key:0,class:"mt-4"},G={key:0,class:"text-center py-12"},I={key:1,class:"bg-[#161821] rounded-lg shadow-lg p-8 text-center border border-[rgba(212,175,55,0.24)]"},J={class:"mt-2 text-sm text-[#C7C7C7]"},$={key:2,class:"bg-[#161821] rounded-lg shadow-lg p-12 text-center border border-[rgba(212,175,55,0.24)]"},K={class:"mt-2 text-sm text-[#C7C7C7]"},Q={class:"mt-6"},W={key:3,class:"space-y-4"},X={class:"p-6"},Y={class:"flex items-start justify-between"},Z={class:"flex-1"},ee={class:"flex items-center gap-3 mb-2"},te={class:"text-xl font-semibold text-heading"},oe={class:"text-body text-sm mb-4 line-clamp-2"},se={class:"flex items-center gap-6 text-sm text-gray-500 mb-4"},re={class:"flex items-center"},ae={class:"flex items-center"},le={class:"flex items-center"},ne={class:"flex items-center"},de={class:"flex items-center justify-end gap-3 mt-4 pt-4 border-t border-gray-200"},ue={key:0,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700"},ie={key:4,class:"mt-8"},ce={__name:"MyProjects",setup(ce){h();const pe=e([]),me=e(!1),ve=e(null),ge=e(1),be=e({status:"",category:"",sortBy:"created_at_desc"}),xe=k.getCategories(),fe=t(()=>({total:pe.value.length,open:pe.value.filter(e=>"open"===e.status).length,in_progress:pe.value.filter(e=>"in_progress"===e.status).length,completed:pe.value.filter(e=>"completed"===e.status).length})),he=t(()=>""!==be.value.status||""!==be.value.category),ye=t(()=>{let e=[...pe.value];be.value.status&&(e=e.filter(e=>e.status===be.value.status)),be.value.category&&(e=e.filter(e=>e.category===be.value.category)),e.sort((e,t)=>{switch(be.value.sortBy){case"created_at_desc":return new Date(t.created_at)-new Date(e.created_at);case"created_at_asc":return new Date(e.created_at)-new Date(t.created_at);case"budget_desc":return(t.budget||0)-(e.budget||0);case"budget_asc":return(e.budget||0)-(t.budget||0);case"bids_desc":return(t.bid_count||0)-(e.bid_count||0);default:return 0}});const t=10*(ge.value-1),o=t+10;return e.slice(t,o)}),we=t(()=>{let e=[...pe.value];return be.value.status&&(e=e.filter(e=>e.status===be.value.status)),be.value.category&&(e=e.filter(e=>e.category===be.value.category)),Math.ceil(e.length/10)}),ke=e=>{if(!e)return"Data não disponível";try{return C(new Date(e),{addSuffix:!0,locale:F})}catch(t){return"Data inválida"}},Ce=e=>{const t=xe.find(t=>t.value===e);return t?t.label:e},Fe=()=>{be.value={status:"",category:"",sortBy:"created_at_desc"},ge.value=1},Ae=async()=>{me.value=!0,ve.value=null;try{const e=await k.getMyProjects();e.success?pe.value=e.data.projects||[]:ve.value=e.error}catch(e){console.error("Error loading projects:",e),ve.value="Erro ao carregar projetos"}finally{me.value=!1}};return o(()=>[be.value.status,be.value.category],()=>{ge.value=1}),s(()=>{Ae()}),(e,t)=>{const o=b("router-link");return x(),r("div",A,[a("div",_,[t[29]||(t[29]=a("div",{class:"mb-8"},[a("h1",{class:"text-3xl font-bold text-heading"},"Meus Projetos"),a("p",{class:"mt-2 text-body"},"Gerencie todos os seus projetos publicados")],-1)),a("div",j,[a("div",D,[a("div",M,[t[5]||(t[5]=a("div",{class:"p-3 rounded-full bg-[rgba(212,175,55,0.15)] text-[#D4AF37] mr-4 border border-[#D4AF37]"},[a("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),a("div",null,[a("p",B,n(fe.value.total),1),t[4]||(t[4]=a("p",{class:"text-sm text-[#C7C7C7]"},"Total",-1))])])]),a("div",V,[a("div",z,[t[7]||(t[7]=a("div",{class:"p-3 rounded-full bg-[rgba(212,175,55,0.15)] text-[#D4AF37] mr-4 border border-[#D4AF37]"},[a("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),a("div",null,[a("p",P,n(fe.value.open),1),t[6]||(t[6]=a("p",{class:"text-sm text-[#C7C7C7]"},"Abertos",-1))])])]),a("div",E,[a("div",T,[t[9]||(t[9]=a("div",{class:"p-3 rounded-full bg-[rgba(212,175,55,0.15)] text-[#D4AF37] mr-4 border border-[#D4AF37]"},[a("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),a("div",null,[a("p",H,n(fe.value.in_progress),1),t[8]||(t[8]=a("p",{class:"text-sm text-[#C7C7C7]"},"Em Andamento",-1))])])]),a("div",L,[a("div",N,[t[11]||(t[11]=a("div",{class:"p-3 rounded-full bg-[rgba(212,175,55,0.15)] text-[#D4AF37] mr-4 border border-[#D4AF37]"},[a("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),a("div",null,[a("p",S,n(fe.value.completed),1),t[10]||(t[10]=a("p",{class:"text-sm text-[#C7C7C7]"},"Concluídos",-1))])])])]),a("div",O,[a("div",R,[a("div",null,[t[13]||(t[13]=a("label",{class:"block text-sm font-medium text-[#C7C7C7] mb-2"},"Status",-1)),d(a("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>be.value.status=e),class:"w-full px-3 py-2 border border-[rgba(212,175,55,0.24)] rounded-md bg-[#1A1A1A] text-[#F5F5F5] focus:outline-none focus:ring-2 focus:ring-[#D4AF37] focus:border-[#D4AF37]"},[...t[12]||(t[12]=[i('<option value="">Todos</option><option value="open">Aberto</option><option value="in_progress">Em Andamento</option><option value="completed">Concluído</option><option value="cancelled">Cancelado</option>',5)])],512),[[u,be.value.status]])]),a("div",null,[t[15]||(t[15]=a("label",{class:"block text-sm font-medium text-[#C7C7C7] mb-2"},"Categoria",-1)),d(a("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>be.value.category=e),class:"w-full px-3 py-2 border border-[rgba(212,175,55,0.24)] rounded-md bg-[#1A1A1A] text-[#F5F5F5] focus:outline-none focus:ring-2 focus:ring-[#D4AF37] focus:border-[#D4AF37]"},[t[14]||(t[14]=a("option",{value:""},"Todas",-1)),(x(!0),r(c,null,p(m(xe),e=>(x(),r("option",{key:e.value,value:e.value},n(e.label),9,U))),128))],512),[[u,be.value.category]])]),a("div",null,[t[17]||(t[17]=a("label",{class:"block text-sm font-medium text-[#C7C7C7] mb-2"},"Ordenar Por",-1)),d(a("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>be.value.sortBy=e),class:"w-full px-3 py-2 border border-[rgba(212,175,55,0.24)] rounded-md bg-[#1A1A1A] text-[#F5F5F5] focus:outline-none focus:ring-2 focus:ring-[#D4AF37] focus:border-[#D4AF37]"},[...t[16]||(t[16]=[i('<option value="created_at_desc">Mais Recentes</option><option value="created_at_asc">Mais Antigos</option><option value="budget_desc">Maior Orçamento</option><option value="budget_asc">Menor Orçamento</option><option value="bids_desc">Mais Propostas</option>',5)])],512),[[u,be.value.sortBy]])])]),he.value?(x(),r("div",q,[a("button",{onClick:Fe,class:"text-sm text-[#D4AF37] hover:text-[#E5C04A] font-medium"}," Limpar Filtros ")])):l("",!0)]),me.value?(x(),r("div",G,[...t[18]||(t[18]=[a("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#D4AF37]"},null,-1),a("p",{class:"mt-4 text-[#C7C7C7]"},"Carregando projetos...",-1)])])):ve.value?(x(),r("div",I,[t[19]||(t[19]=a("svg",{class:"mx-auto h-12 w-12 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[20]||(t[20]=a("h3",{class:"mt-4 text-lg font-medium text-[#F5F5F5]"},"Erro ao carregar projetos",-1)),a("p",J,n(ve.value),1),a("button",{onClick:Ae,class:"mt-6 px-4 py-2 bg-[#D4AF37] text-[#0F1117] font-semibold rounded-md hover:bg-[#E5C04A]"}," Tentar Novamente ")])):0===ye.value.length?(x(),r("div",$,[t[22]||(t[22]=a("svg",{class:"mx-auto h-12 w-12 text-[#D4AF37]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t[23]||(t[23]=a("h3",{class:"mt-4 text-lg font-medium text-[#F5F5F5]"},"Nenhum projeto encontrado",-1)),a("p",K,n(he.value?"Tente ajustar os filtros para ver mais resultados.":"Você ainda não criou nenhum projeto."),1),a("div",Q,[v(o,{to:"/create-project",class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700"},{default:g(()=>[...t[21]||(t[21]=[f(" Criar Novo Projeto ",-1)])]),_:1})])])):(x(),r("div",W,[(x(!0),r(c,null,p(ye.value,e=>{return x(),r("div",{key:e.id,class:"bg-surface rounded-lg shadow hover:shadow-md transition-shadow"},[a("div",X,[a("div",Y,[a("div",Z,[a("div",ee,[a("h3",te,n(e.title),1),v(y,{status:e.status},null,8,["status"])]),a("p",oe,n(e.description),1),a("div",se,[a("span",re,[t[24]||(t[24]=a("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),f(" "+n(Ce(e.category)),1)]),a("span",ae,[t[25]||(t[25]=a("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),f(" "+n((s=e.budget,s||0===s?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s):"A combinar")),1)]),a("span",le,[t[26]||(t[26]=a("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})],-1)),f(" "+n(e.bid_count||0)+" propostas ",1)]),a("span",ne,[t[27]||(t[27]=a("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),f(" "+n(ke(e.created_at)),1)])])])]),a("div",de,[v(o,{to:`/projects/${e.id}`,class:"px-4 py-2 text-sm font-medium text-body bg-surface border border-gray-300 rounded-md hover:bg-gray-50"},{default:g(()=>[...t[28]||(t[28]=[f(" Ver Detalhes ",-1)])]),_:1},8,["to"]),"open"===e.status?(x(),r("button",ue," Ver Propostas ("+n(e.bid_count||0)+") ",1)):l("",!0)])])]);var s}),128))])),we.value>1?(x(),r("div",ie,[v(w,{"current-page":ge.value,"total-pages":we.value,onPageChanged:t[3]||(t[3]=e=>ge.value=e)},null,8,["current-page","total-pages"])])):l("",!0)])])}}};export{ce as default};
